/**
 * My Dreams Dashboard
 * Real-time integration with Travel Fund Manager
 * Professional progress tracking and provider offer management
 */

import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  Wallet, TrendingUp, Users, Gift, Target, Calendar,
  DollarSign, Star, ArrowRight, Plus, RefreshCw
} from 'lucide-react';
import { Card } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Progress } from '@/components/ui/progress';
import { useToast } from '@/hooks/use-toast';

interface UserDream {
  id: string;
  packageId: string;
  title: string;
  destination: string;
  imageUrl: string;
  budget: {
    total: number;
    saved: number;
    monthly: number;
  };
  travelers: number;
  dates: { start: string; end: string; flexible: boolean };
  collaborators: number;
  giftContributions: number;
  providerOffers: number;
  travelFundId: string;
  status: 'planning' | 'saving' | 'offers-received' | 'ready-to-book' | 'booked';
  createdAt: string;
}\n\nconst MyDreamsDashboard = () => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const [dreams, setDreams] = useState<UserDream[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchUserDreams();\n  }, []);\n\n  const fetchUserDreams = async () => {\n    try {\n      // TODO: Replace with real API call\n      // const response = await fetch(`${API_URL}/api/smart-dreams/user/dreams`);\n      \n      // Mock data for now\n      setDreams([\n        {\n          id: 'user-dream-1',\n          packageId: 'dream-1',\n          title: 'Maldives Overwater Paradise',\n          destination: 'Maldives',\n          imageUrl: 'https://images.unsplash.com/photo-1637576308588-6647bf80944d?w=800',\n          budget: { total: 7500, saved: 2250, monthly: 500 },\n          travelers: 2,\n          dates: { start: '2025-12-01', end: '2025-12-08', flexible: true },\n          collaborators: 2,\n          giftContributions: 500,\n          providerOffers: 8,\n          travelFundId: 'fund-123',\n          status: 'offers-received',\n          createdAt: '2025-01-15'\n        }\n      ]);\n    } catch (error) {\n      console.error('Failed to fetch dreams:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getSavingsProgress = (dream: UserDream) => {\n    return Math.round((dream.budget.saved / dream.budget.total) * 100);\n  };\n\n  const getStatusConfig = (status: UserDream['status']) => {\n    switch (status) {\n      case 'planning':\n        return { color: 'bg-slate-100 text-slate-700', label: 'Planning', icon: Calendar };\n      case 'saving':\n        return { color: 'bg-blue-100 text-blue-700', label: 'Saving', icon: Wallet };\n      case 'offers-received':\n        return { color: 'bg-green-100 text-green-700', label: 'Has Offers', icon: Target };\n      case 'ready-to-book':\n        return { color: 'bg-purple-100 text-purple-700', label: 'Ready to Book', icon: Star };\n      case 'booked':\n        return { color: 'bg-amber-100 text-amber-700', label: 'Booked', icon: Star };\n    }\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-slate-900 mb-2\">My Dreams</h1>\n          <p className=\"text-slate-600\">Track your dream journeys and provider offers</p>\n        </div>\n        <Button onClick={() => navigate('/smart-dreams?tab=library')} size=\"lg\">\n          <Plus className=\"w-4 h-4 mr-2\" />\n          New Dream\n        </Button>\n      </div>\n\n      {/* Dreams Grid */}\n      {dreams.length > 0 ? (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {dreams.map((dream) => {\n            const statusConfig = getStatusConfig(dream.status);\n            const progress = getSavingsProgress(dream);\n            const StatusIcon = statusConfig.icon;\n\n            return (\n              <Card key={dream.id} className=\"overflow-hidden hover:shadow-xl transition-shadow\">\n                {/* Dream Header */}\n                <div className=\"relative h-48\">\n                  <img src={dream.imageUrl} alt={dream.title} className=\"w-full h-full object-cover\" />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n                  <Badge className={`absolute top-4 right-4 ${statusConfig.color}`}>\n                    <StatusIcon className=\"w-3 h-3 mr-1\" />\n                    {statusConfig.label}\n                  </Badge>\n                  <div className=\"absolute bottom-4 left-4 right-4\">\n                    <h3 className=\"text-xl font-bold text-white mb-1\">{dream.title}</h3>\n                    <p className=\"text-white/90 text-sm\">{dream.destination}</p>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  {/* Savings Progress */}\n                  <div className=\"mb-6\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-slate-700\">Savings Progress</span>\n                      <span className=\"text-sm font-bold text-purple-600\">{progress}%</span>\n                    </div>\n                    <Progress value={progress} className=\"h-2 mb-2\" />\n                    <div className=\"flex justify-between text-xs text-slate-600\">\n                      <span>${dream.budget.saved.toLocaleString()} saved</span>\n                      <span>${dream.budget.total.toLocaleString()} goal</span>\n                    </div>\n                    <p className=\"text-xs text-green-600 mt-1\">\n                      \ud83d\udcc8 +${dream.budget.monthly.toLocaleString()}/month\n                    </p>\n                  </div>\n\n                  {/* Stats Grid */}\n                  <div className=\"grid grid-cols-3 gap-3 mb-4\">\n                    <div className=\"text-center p-3 bg-blue-50 rounded-lg\">\n                      <Users className=\"w-4 h-4 text-blue-600 mx-auto mb-1\" />\n                      <p className=\"text-lg font-bold text-slate-900\">{dream.collaborators}</p>\n                      <p className=\"text-xs text-slate-600\">Planning</p>\n                    </div>\n                    <div className=\"text-center p-3 bg-pink-50 rounded-lg\">\n                      <Gift className=\"w-4 h-4 text-pink-600 mx-auto mb-1\" />\n                      <p className=\"text-lg font-bold text-slate-900\">${dream.giftContributions}</p>\n                      <p className=\"text-xs text-slate-600\">Gifted</p>\n                    </div>\n                    <div className=\"text-center p-3 bg-green-50 rounded-lg\">\n                      <Target className=\"w-4 h-4 text-green-600 mx-auto mb-1\" />\n                      <p className=\"text-lg font-bold text-slate-900\">{dream.providerOffers}</p>\n                      <p className=\"text-xs text-slate-600\">Offers</p>\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => navigate(`/travel-fund?dreamId=${dream.id}`)}\n                    >\n                      <Wallet className=\"w-4 h-4 mr-2\" />\n                      Manage Fund\n                    </Button>\n                    {dream.providerOffers > 0 && (\n                      <Button\n                        className=\"bg-green-600 hover:bg-green-700\"\n                        onClick={() => navigate(`/smart-dreams?tab=marketplace&dreamId=${dream.id}`)}\n                      >\n                        View {dream.providerOffers} Offers\n                        <ArrowRight className=\"w-4 h-4 ml-2\" />\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </Card>\n            );\n          })}\n        </div>\n      ) : (\n        <Card className=\"p-12 text-center\">\n          <Wallet className=\"w-16 h-16 text-slate-300 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold mb-2 text-slate-900\">No Dreams Yet</h3>\n          <p className=\"text-slate-600 mb-6\">\n            Start by browsing our expert-curated dream packages\n          </p>\n          <Button onClick={() => navigate('/smart-dreams?tab=library')} size=\"lg\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Browse Dream Library\n          </Button>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default MyDreamsDashboard;\n