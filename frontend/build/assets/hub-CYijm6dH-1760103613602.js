import{r as c,h as E,s as n,j as e,a,d as r,e as l,b as i,i as I,B as L,f as x,T as W}from"./index-cL9etfPl-1760103613602.js";import{T as Z,a as z,b as d,c as o}from"./tabs-Du9D1R7o-1760103613602.js";import{B as h}from"./brain-dYAazFkP-1760103613602.js";import{S as A}from"./search-BRdHcmCt-1760103613602.js";import{C as _}from"./clock-DUxD1Emg-1760103613602.js";import{Z as C}from"./zap-gq0nfscB-1760103613602.js";import{T as M}from"./trending-up-DK66qwah-1760103613602.js";import{A as D}from"./activity-DV7hTo3G-1760103613602.js";import{C as O}from"./circle-check-big-DrxdnNO6-1760103613602.js";import{W as U}from"./workflow-D0k39e56-1760103613602.js";const V=({userId:$,className:u=""})=>{const[j,S]=c.useState([]),[f,T]=c.useState([]),[p,P]=c.useState([]),[R,v]=c.useState(!0),[g,N]=c.useState(!1),{toast:m}=E();c.useEffect(()=>{y()},[]);const y=async()=>{v(!0);try{await Promise.all([k(),B(),F()])}catch(s){console.error("Failed to load automation data:",s),m({title:"Error",description:"Failed to load automation data",variant:"destructive"})}finally{v(!1)}},k=async()=>{const{data:s,error:t}=await n.from("discovery_automation_rules").select("*").order("priority",{ascending:!0});if(t)throw t;S(s||[])},B=async()=>{const{data:s,error:t}=await n.from("provider_discovery_log").select("*").order("created_at",{ascending:!1}).limit(10);if(t)throw t;T(s||[])},F=async()=>{const{data:s,error:t}=await n.from("pending_providers").select("*").order("created_at",{ascending:!1}).limit(20);if(t)throw t;P(s||[])},H=async(s="all")=>{N(!0);try{const{data:t,error:b}=await n.functions.invoke("provider-discovery-engine",{body:{method:s,provider_type:"all"}});if(b)throw b;m({title:"Discovery Complete",description:`Found ${t.discovered_count} new providers`,variant:"default"}),await y()}catch(t){console.error("Discovery failed:",t),m({title:"Discovery Failed",description:"Failed to run provider discovery",variant:"destructive"})}finally{N(!1)}},w=s=>{switch(s){case"verified":case"approved":return e.jsx(O,{className:"h-4 w-4 text-green-500"});case"pending":return e.jsx(_,{className:"h-4 w-4 text-yellow-500"});case"failed":case"rejected":return e.jsx(W,{className:"h-4 w-4 text-red-500"});default:return e.jsx(D,{className:"h-4 w-4 text-gray-500"})}};return R?e.jsxs(a,{className:u,children:[e.jsx(r,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Smart Automation Hub"]})}),e.jsx(i,{children:e.jsx("div",{className:"text-center py-8",children:"Loading automation data..."})})]}):e.jsxs(a,{className:u,children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Smart Automation Hub"]}),e.jsx(I,{children:"Intelligent provider discovery and automation management"})]}),e.jsx(i,{children:e.jsxs(Z,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(z,{className:"grid w-full grid-cols-4",children:[e.jsx(d,{value:"overview",children:"Overview"}),e.jsx(d,{value:"discovery",children:"Discovery"}),e.jsx(d,{value:"automation",children:"Automation"}),e.jsx(d,{value:"pending",children:"Pending"})]}),e.jsxs(o,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(a,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs(l,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Recent Discoveries"]})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),e.jsxs(a,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs(l,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Pending Approval"]})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.filter(s=>s.approval_status==="pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting review"})]})]}),e.jsxs(a,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs(l,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Active Rules"]})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.filter(s=>s.is_active).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automation rules"})]})]}),e.jsxs(a,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs(l,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Auto Success"]})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"94%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Success rate"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Provider Discovery"}),e.jsxs(L,{onClick:()=>H("all"),disabled:g,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),g?"Discovering...":"Full Discovery"]})]})]}),e.jsx(o,{value:"discovery",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:f.map(s=>e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w(s.verification_status),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.discovered_provider_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Method: ",s.discovery_method]})]})]}),e.jsx(x,{variant:"outline",children:s.verification_status})]})})},s.id))})}),e.jsx(o,{value:"automation",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:j.map(s=>e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.rule_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",s.rule_type," • Priority: ",s.priority]})]}),e.jsx(x,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]})})},s.id))})}),e.jsx(o,{value:"pending",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:p.map(s=>e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.provider_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",s.provider_type," • Complexity: ",s.integration_complexity]})]}),w(s.approval_status)]})})},s.id))})})]})})]})};function ae(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Automation Hub"}),e.jsx("p",{className:"text-muted-foreground",children:"Centralized control for all automation workflows and intelligent processes"})]}),e.jsxs(x,{variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"System Active"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Active Workflows"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"12"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+3 from last hour"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"AI Agents"}),e.jsx(h,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All systems operational"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Automation Score"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"94%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Efficiency rating"})]})]})]}),e.jsx(V,{})]})}export{ae as default};
