import{r as $,a7 as q,E as C,u as Y,j as e,af as O,Z as A,B as P,i as D,t as k,n as x,H as Z,Q as J,M as H,v as U,d as V}from"./index-d-8tyMGC-1758786116292.js";import{I as K}from"./SessionRecoveryBanner-DneQJZ_--1758786116292.js";import{W}from"./wifi-bhS4Qhjp-1758786116292.js";import{C as z}from"./car-BmSIGP5u-1758786116292.js";import{U as Q}from"./utensils-CkLJduUp-1758786116292.js";import"./circle-alert-Cq7gXx2Y-1758786116292.js";import"./clock-LT3pi_jf-1758786116292.js";const M={hotels:[{id:"h1",type:"hotel",name:"Ocean View Resort & Spa",location:"Maldives",price:350,originalPrice:450,rating:4.8,reviews:1234,image:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"Best Deal",marketplace:"Family"},{id:"h2",type:"hotel",name:"Urban Luxury Suites",location:"Sydney, Australia",price:280,originalPrice:350,rating:4.7,reviews:892,image:"https://images.unsplash.com/photo-1564501049412-61c2a3083791?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"City Center",marketplace:"Solo"},{id:"h3",type:"hotel",name:"Mountain Lodge Retreat",location:"Swiss Alps",price:220,originalPrice:290,rating:4.9,reviews:2156,image:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"Pet Friendly",marketplace:"Pet"},{id:"h4",type:"hotel",name:"Zen Wellness Resort",location:"Bali, Indonesia",price:180,originalPrice:240,rating:4.9,reviews:756,image:"https://images.unsplash.com/photo-1540541338287-41700207dee6?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"Spa Special",marketplace:"Spiritual"}],flights:[{id:"f1",type:"flight",name:"Sydney to Melbourne",from:"Sydney",to:"Melbourne",location:"Australia",price:180,originalPrice:250,airline:"Qantas",duration:"1h 30m",stops:"Direct",rating:4.6,image:"https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=300&h=130&fit=crop&fm=webp&q=70"},{id:"f2",type:"flight",name:"London to Tokyo",from:"London",to:"Tokyo",location:"International",price:750,originalPrice:950,airline:"Japan Airlines",duration:"11h 45m",stops:"Direct",rating:4.8,image:"https://images.unsplash.com/photo-1544168190-79c17527004f?w=300&h=130&fit=crop&fm=webp&q=70"}],activities:[{id:"a1",type:"activity",name:"Harbour Bridge Climb",location:"Sydney, Australia",price:120,originalPrice:160,duration:"3 hours",rating:4.9,reviews:342,image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=200&fit=crop&fm=webp&q=80"},{id:"a2",type:"activity",name:"Cooking Class with Local Chef",location:"Tuscany, Italy",price:85,originalPrice:110,duration:"4 hours",rating:4.8,reviews:567,image:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop&fm=webp&q=80"}],loading:!1,error:null,lastFetched:null},G=()=>{const[L,S]=$.useState(M),y=$.useCallback((l,n)=>{var h,f;const m=((h=l==null?void 0:l.data)==null?void 0:h.data)||((f=l==null?void 0:l.data)==null?void 0:f[`${n}s`])||(l==null?void 0:l.data);return Array.isArray(m)?m.slice(0,4).map((s,r)=>{var a,t,c,g,F,I,p,v,j,b,w,N,i,B,E,_;const d=s.isDemoData||((t=(a=l==null?void 0:l.data)==null?void 0:a.meta)==null?void 0:t.isDemoData),o=`${n}_${d?"demo":"live"}_${Date.now()}_${r}`;return n==="hotel"?{id:o,type:"hotel",name:s.name||`Premium Hotel ${r+1}`,location:s.address||s.location||s.city||"Prime Location",price:Math.round(((c=s.price)==null?void 0:c.amount)||150+r*50),originalPrice:Math.round((((g=s.price)==null?void 0:g.amount)||150+r*50)*1.3),rating:((F=s.rating)==null?void 0:F.score)||s.rating||4.5+Math.random()*.4,reviews:((I=s.rating)==null?void 0:I.reviews)||Math.floor(Math.random()*1e3)+200,image:`https://images.unsplash.com/photo-1566073771259-6a8506099945?w=300&h=192&fit=crop&fm=webp&q=70&sig=${r}`,verified:!0,badge:d?"Demo Data":["Best Deal","Top Rated","Exclusive","Limited Time"][r%4],marketplace:["Family","Solo","Pet","Spiritual"][r%4]}:n==="flight"?{id:o,type:"flight",name:`${((p=s.departure)==null?void 0:p.airport)||s.from||"SYD"} to ${((v=s.arrival)==null?void 0:v.airport)||s.to||"MEL"}`,from:((j=s.departure)==null?void 0:j.city)||s.from||"Sydney",to:((b=s.arrival)==null?void 0:b.city)||s.to||"Melbourne",location:"Flight Route",price:Math.round(((w=s.price)==null?void 0:w.amount)||200+r*100),originalPrice:Math.round((((N=s.price)==null?void 0:N.amount)||200+r*100)*1.25),airline:s.airline||"Demo Airways",duration:s.duration||"2h 30m",stops:s.stops||"Direct",rating:4.4+Math.random()*.5,image:`https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=300&h=130&fit=crop&fm=webp&q=70&sig=${r}`}:n==="activity"?{id:o,type:"activity",name:s.name||`Exciting Activity ${r+1}`,location:s.location||"Sydney",price:Math.round(((i=s.price)==null?void 0:i.amount)||80+r*40),originalPrice:Math.round((((B=s.price)==null?void 0:B.amount)||80+r*40)*1.4),duration:s.duration||`${2+r} hours`,rating:((E=s.rating)==null?void 0:E.score)||4.6+Math.random()*.3,reviews:((_=s.rating)==null?void 0:_.reviews)||Math.floor(Math.random()*500)+100,image:`https://images.unsplash.com/photo-1483347756197-71ef80e95f73?w=300&h=200&fit=crop&fm=webp&q=80&sig=${r}`}:{id:o,type:n,name:"Featured Deal",location:"Unknown",price:100,image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=200&fit=crop&fm=webp&q=80"}}):[]},[]),u=$.useCallback(async()=>{var l,n,m,h,f,s,r,d,o;S(a=>({...a,loading:!0,error:null}));try{const a=new Date,t=new Date(a);t.setDate(t.getDate()+1);const c=new Date(a);c.setDate(c.getDate()+7);const g=a.toISOString().split("T")[0],F=t.toISOString().split("T")[0],I=[q.functions.invoke("provider-rotation",{body:{searchType:"hotel",params:{cityCode:"SYD",checkInDate:g,checkOutDate:F,adults:2,roomQuantity:1,timeout:8e3}}}).catch(()=>null),q.functions.invoke("provider-rotation",{body:{searchType:"flight",params:{originLocationCode:"SYD",destinationLocationCode:"MEL",departureDate:c.toISOString().split("T")[0],adults:1,timeout:8e3}}}).catch(()=>null),q.functions.invoke("provider-rotation",{body:{searchType:"activity",params:{destination:"sydney",date:g,participants:2,radius:20,timeout:8e3}}}).catch(()=>null)],[p,v,j]=await Promise.allSettled(I);let b=M.hotels,w=M.flights,N=M.activities;if(p.status==="fulfilled"&&((l=p.value)!=null&&l.data)){const i=y(p.value.data,"hotel");i.length>0&&(b=i,C.info("✅ Featured deals: Using hotel data",{count:i.length,isDemo:(m=(n=p.value.data)==null?void 0:n.meta)==null?void 0:m.isDemoData}))}if(v.status==="fulfilled"&&((h=v.value)!=null&&h.data)){const i=y(v.value.data,"flight");i.length>0&&(w=i,C.info("✅ Featured deals: Using flight data",{count:i.length,isDemo:(s=(f=v.value.data)==null?void 0:f.meta)==null?void 0:s.isDemoData}))}if(j.status==="fulfilled"&&((r=j.value)!=null&&r.data)){const i=y(j.value.data,"activity");i.length>0&&(N=i,C.info("✅ Featured deals: Using activity data",{count:i.length,isDemo:(o=(d=j.value.data)==null?void 0:d.meta)==null?void 0:o.isDemoData}))}S({hotels:b,flights:w,activities:N,loading:!1,error:null,lastFetched:new Date}),C.info("✅ Featured deals refresh completed",{hotelsCount:b.length,flightsCount:w.length,activitiesCount:N.length,hasApiData:b.some(i=>i.id.includes("demo")||i.id.includes("live"))||w.some(i=>i.id.includes("demo")||i.id.includes("live"))||N.some(i=>i.id.includes("demo")||i.id.includes("live"))})}catch(a){C.error("❌ Featured deals fetch failed",a),S(t=>({...t,loading:!1,error:"Failed to load latest deals"}))}},[y]);$.useEffect(()=>{const l=setTimeout(u,2e3),n=setInterval(u,10*60*1e3);return()=>{clearTimeout(l),clearInterval(n)}},[u]);const T=$.useCallback(()=>{u()},[u]);return{...L,refresh:T}},re=()=>{const{t:L}=Y(),[S,y]=$.useState([]),{hotels:u,flights:T,activities:l,loading:n,error:m,lastFetched:h,refresh:f}=G(),s=a=>{y(t=>t.includes(a)?t.filter(c=>c!==a):[...t,a])},r=a=>a?[W,z,Q]:[W,z,Q],d=a=>a.includes("live"),o=a=>a.includes("demo");return e.jsx("section",{className:"py-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold font-['Playfair_Display']",children:["Featured ",e.jsx("span",{className:"hero-text",children:"Travel Deals"})]}),n&&e.jsx(O,{className:"h-6 w-6 animate-spin text-travel-coral"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed mb-4",children:"Live travel deals updated in real-time from our partner networks."}),h&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx(A,{className:"h-4 w-4 text-travel-coral"}),e.jsxs("span",{children:["Last updated: ",h.toLocaleTimeString()]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:f,disabled:n,children:e.jsx(O,{className:`h-4 w-4 ${n?"animate-spin":""}`})})]}),m&&e.jsxs("div",{className:"text-sm text-orange-600 bg-orange-50 px-4 py-2 rounded-full inline-block",children:["Showing cached deals - ",m]})]}),e.jsxs("div",{className:"mb-20",children:[e.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:"Featured Hotels"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n?[...Array(4)].map((a,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted"}),e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded"})]})]},`hotel-skeleton-${t}`)):u.map((a,t)=>e.jsxs(D,{className:"travel-card overflow-hidden group cursor-pointer animate-fadeIn",style:{animationDelay:`${t*.1}s`},children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(K,{src:a.image,alt:a.name,width:300,height:192,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",quality:80}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),e.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-1",children:[e.jsx(x,{variant:"secondary",className:"bg-travel-coral text-white",children:a.badge}),d(a.id)&&e.jsxs(x,{variant:"secondary",className:"bg-green-500 text-white text-xs",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Live"]}),o(a.id)&&e.jsx(x,{variant:"secondary",className:"bg-blue-500 text-white text-xs",children:"API Demo"})]}),e.jsx(P,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 bg-white/20 backdrop-blur-sm hover:bg-white/30",onClick:()=>s(a.id),children:e.jsx(Z,{className:`h-4 w-4 ${S.includes(a.id)?"text-red-500 fill-red-500":"text-white"}`})}),a.verified&&e.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center space-x-1 bg-green-500 text-white px-2 py-1 rounded-full text-xs",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:"Verified"})]})]}),e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"font-bold text-lg leading-tight",children:a.name})}),e.jsxs("div",{className:"flex items-center text-muted-foreground text-sm mb-3",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:a.location})]}),e.jsx("div",{className:"flex items-center mb-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"ml-1 font-semibold",children:a.rating}),e.jsxs("span",{className:"ml-1 text-sm text-muted-foreground",children:["(",a.reviews," reviews)"]})]})}),e.jsx("div",{className:"flex items-center space-x-3 mb-4",children:r(a.amenities).map((c,g)=>e.jsx(c,{className:"h-4 w-4 text-muted-foreground"},g))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",a.price]}),e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",a.originalPrice]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"per night"})]}),e.jsxs(x,{variant:"outline",className:"text-travel-forest border-travel-forest",children:[a.originalPrice?Math.round((a.originalPrice-a.price)/a.originalPrice*100):25,"% off"]})]}),e.jsx(P,{className:"w-full mt-4 btn-primary",onClick:()=>window.location.href=`/booking/hotel?hotel=${encodeURIComponent(JSON.stringify({id:a.id,name:a.name,pricePerNight:a.price}))}`,children:L("booking.bookNow")})]})]},a.id))})]}),e.jsxs("div",{className:"mb-20",children:[e.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:"Featured Flights"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n?[...Array(2)].map((a,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-32 bg-muted"}),e.jsxs(k,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-full"})]})]},`flight-skeleton-${t}`)):T.map((a,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-fadeIn",style:{animationDelay:`${t*.1}s`},children:[e.jsxs("div",{className:"relative h-32 overflow-hidden",children:[e.jsx("img",{src:a.image,alt:`${a.from} to ${a.to}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-6",children:[e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.from," → ",a.to]}),e.jsx("div",{className:"text-white/90",children:a.airline})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[d(a.id)&&e.jsxs(x,{variant:"secondary",className:"bg-green-500 text-white text-xs",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Live"]}),o(a.id)&&e.jsx(x,{variant:"secondary",className:"bg-blue-500 text-white text-xs",children:"API Demo"})]})]})]}),e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsx("div",{className:"font-semibold",children:a.duration})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Stops"}),e.jsx("div",{className:"font-semibold",children:a.stops})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"ml-1 font-semibold",children:a.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-3xl font-bold",children:["$",a.price]}),e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",a.originalPrice]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"per person"})]}),e.jsx(P,{className:"btn-primary",onClick:()=>window.location.href=`/booking/flight?flightId=${a.id}&price=${a.price}&from=${encodeURIComponent(a.from)}&to=${encodeURIComponent(a.to)}`,children:"Book Flight"})]})]})]},a.id))})]}),e.jsxs("div",{className:"mb-20",children:[e.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:"Featured Activities"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?[...Array(3)].map((a,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted"}),e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-full"})]})]},`activity-skeleton-${t}`)):l.map((a,t)=>e.jsxs(D,{className:"travel-card overflow-hidden group cursor-pointer animate-fadeIn",style:{animationDelay:`${t*.1}s`},children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:"font-bold text-lg flex-1",children:a.name}),e.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[d(a.id)&&e.jsxs(x,{variant:"secondary",className:"bg-green-500 text-white text-xs",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Live"]}),o(a.id)&&e.jsx(x,{variant:"secondary",className:"bg-blue-500 text-white text-xs",children:"API Demo"})]})]}),e.jsxs("div",{className:"flex items-center text-white/90 text-sm",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:a.location})]})]})})]}),e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"ml-1 font-semibold",children:a.rating}),e.jsxs("span",{className:"ml-1 text-sm text-muted-foreground",children:["(",a.reviews,")"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:a.duration})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",a.price]}),e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",a.originalPrice]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"per person"})]}),e.jsx(P,{className:"btn-primary",onClick:()=>window.location.href=`/booking/activity?activityId=${a.id}&price=${a.price}&name=${encodeURIComponent(a.name)}`,children:"Book Now"})]})]})]},a.id))})]})]})})};export{re as default};
