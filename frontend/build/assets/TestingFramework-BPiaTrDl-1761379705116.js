import{r as g,l as u,j as t,d as k,e as T,p as E,B as N,P,f as R,g as B,a as C}from"./index-7Ai-VyBw-1761379705116.js";import{w,c as A}from"./correlationId-QGJmE9ge-1761379705116.js";import{P as D}from"./pause-CRSNbPzy-1761379705116.js";import{P as U}from"./play-D5O6yN54-1761379705116.js";import{C as M}from"./circle-alert-BfJ3KSCx-1761379705116.js";import{C as O}from"./circle-x-BFHC41wc-1761379705116.js";import{C as L}from"./circle-check-big-FIqPto0M-1761379705116.js";import"./v4-BToUZ8VQ-1761379705116.js";const F=(f={})=>{const{enableSentry:d=!0,enableCustomLogging:m=!0,logLevel:x="error"}=f,b=g.useCallback((o,i={},r="medium")=>{const e=w({error:o.message,stack:o.stack,name:o.name,severity:r,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,...i});if(m)switch(x){case"error":u.error("Error reported:",e);break;case"warn":u.warn("Warning reported:",e);break;case"info":u.info("Info reported:",e);break}if(d&&typeof window<"u"&&window.Sentry){const s=window.Sentry;s.withScope(n=>{n.setTag("correlationId",e.correlationId),n.setTag("severity",r),i.section&&n.setTag("section",i.section),i.userId&&n.setUser({id:i.userId}),n.setContext("errorDetails",{correlationId:e.correlationId,timestamp:e.timestamp,url:e.url,userAgent:e.userAgent}),i.bookingId&&n.setContext("booking",{bookingId:i.bookingId}),i.searchParams&&n.setContext("search",i.searchParams);const a=r==="critical"?"fatal":r==="high"?"error":r==="medium"?"warning":"info";n.setLevel(a),s.captureException(o)})}return e.correlationId},[d,m,x]),j=g.useCallback((o,i={},r="info")=>{const e=w({event:o,timestamp:new Date().toISOString(),level:r,data:i});return m&&u.info("Event reported:",e),d&&typeof window<"u"&&window.Sentry&&window.Sentry.addBreadcrumb({message:o,level:r,data:{correlationId:e.correlationId,...i}}),e.correlationId},[d,m]),p=g.useCallback((o,i,r)=>{d&&typeof window<"u"&&window.Sentry&&window.Sentry.setUser({id:o,email:i,...r}),u.info("User context set:",w({userId:o,email:i}))},[d]),h=g.useCallback(()=>{d&&typeof window<"u"&&window.Sentry&&window.Sentry.setUser(null),u.info("User context cleared")},[d]),v=g.useCallback((o,i,r)=>{const e=w({message:o,category:i||"user-action",timestamp:new Date().toISOString(),data:r});m&&u.info("Breadcrumb added:",e),d&&typeof window<"u"&&window.Sentry&&window.Sentry.addBreadcrumb({message:o,category:i||"user-action",level:"info",data:{correlationId:e.correlationId,...r}})},[d,m]);return{reportError:b,reportEvent:j,setUserContext:p,clearUserContext:h,addBreadcrumb:v,getCurrentCorrelationId:()=>A.getCurrentId()}},$=[{id:"booking-flow",name:"Booking Flow Tests",description:"End-to-end booking functionality tests",status:"idle",tests:[{id:"search-hotels",name:"Hotel Search",description:"Test hotel search functionality",category:"functionality",status:"pending"},{id:"select-room",name:"Room Selection",description:"Test room selection process",category:"functionality",status:"pending"},{id:"payment-flow",name:"Payment Processing",description:"Test payment form and processing",category:"functionality",status:"pending"}]},{id:"accessibility",name:"Accessibility Tests",description:"WCAG compliance and accessibility tests",status:"idle",tests:[{id:"keyboard-nav",name:"Keyboard Navigation",description:"Test keyboard navigation throughout the app",category:"accessibility",status:"pending"},{id:"screen-reader",name:"Screen Reader Support",description:"Test screen reader compatibility",category:"accessibility",status:"pending"},{id:"color-contrast",name:"Color Contrast",description:"Test color contrast ratios",category:"accessibility",status:"pending"}]}],Q=()=>{const[f,d]=g.useState($),[m,x]=g.useState(new Set),{reportError:b}=F(),j=async(e,s)=>new Promise((n,a)=>{setTimeout(()=>{const c=Math.random()>.2,l=Math.floor(Math.random()*3e3)+500;d(I=>I.map(y=>y.id===e?{...y,tests:y.tests.map(S=>S.id===s?{...S,status:c?"passed":"failed",duration:l,error:c?void 0:"Test assertion failed: Expected element to be visible"}:S)}:y)),c?n():a(new Error("Test failed"))},Math.floor(Math.random()*3e3)+500)}),p=async(e,s)=>{const n=`${e}-${s}`;x(a=>new Set(a).add(n)),d(a=>a.map(c=>c.id===e?{...c,tests:c.tests.map(l=>l.id===s?{...l,status:"running"}:l)}:c));try{await j(e,s)}catch(a){b(a,{section:"testing",testSuite:e,testCase:s})}finally{x(a=>{const c=new Set(a);return c.delete(n),c})}},h=async e=>{const s=f.find(n=>n.id===e);if(s){d(n=>n.map(a=>a.id===e?{...a,status:"running"}:a));for(const n of s.tests)await p(e,n.id);d(n=>n.map(a=>a.id===e?{...a,status:"completed"}:a))}},v=e=>{switch(e){case"passed":return t.jsx(L,{className:"h-4 w-4 text-green-500"});case"failed":return t.jsx(O,{className:"h-4 w-4 text-red-500"});case"running":return t.jsx("div",{className:"h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});case"skipped":return t.jsx(M,{className:"h-4 w-4 text-yellow-500"});default:return t.jsx("div",{className:"h-4 w-4 border-2 border-gray-300 rounded-full"})}},o=e=>{switch(e){case"functionality":return"bg-blue-500";case"accessibility":return"bg-purple-500";case"performance":return"bg-orange-500";case"visual":return"bg-green-500";default:return"bg-gray-500"}},r=(()=>{const e=f.flatMap(l=>l.tests),s=e.filter(l=>l.status==="passed").length,n=e.filter(l=>l.status==="failed").length,a=e.filter(l=>l.status==="running").length,c=e.length;return{passed:s,failed:n,running:a,total:c}})();return t.jsxs("div",{className:"space-y-6",children:[t.jsx(k,{children:t.jsxs(T,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(E,{className:"h-6 w-6 text-primary"}),t.jsx("h2",{className:"text-2xl font-bold",children:"Test Results"})]}),t.jsxs(N,{onClick:()=>f.forEach(e=>h(e.id)),disabled:r.running>0,className:"flex items-center gap-2",children:[r.running>0?t.jsx(D,{className:"h-4 w-4"}):t.jsx(U,{className:"h-4 w-4"}),r.running>0?"Running...":"Run All Tests"]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.passed}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Passed"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.failed}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Failed"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.running}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Running"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:r.total}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]})]}),r.total>0&&t.jsx(P,{value:(r.passed+r.failed)/r.total*100,className:"h-2"})]})}),t.jsx("div",{className:"space-y-4",children:f.map(e=>t.jsxs(k,{children:[t.jsx(R,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(B,{className:"flex items-center gap-2",children:[e.name,t.jsx(C,{variant:e.status==="completed"?"default":"secondary",children:e.status})]}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),t.jsx(N,{variant:"outline",size:"sm",onClick:()=>h(e.id),disabled:e.status==="running",children:e.status==="running"?"Running...":"Run Suite"})]})}),t.jsx(T,{children:t.jsx("div",{className:"space-y-3",children:e.tests.map(s=>t.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[v(s.status),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:s.name}),t.jsx("div",{className:"text-sm text-muted-foreground",children:s.description}),s.error&&t.jsx("div",{className:"text-sm text-red-600 mt-1",children:s.error})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(C,{variant:"outline",className:`${o(s.category)} text-white border-transparent`,children:s.category}),s.duration&&t.jsxs(C,{variant:"outline",children:[s.duration,"ms"]}),t.jsx(N,{variant:"ghost",size:"sm",onClick:()=>p(e.id,s.id),disabled:s.status==="running",children:"Run"})]})]},s.id))})})]},e.id))})]})};export{Q as TestingFramework,Q as default};
