import{r as l,j as e}from"./index-QutO-VLO-1761322393739.js";const b=()=>{var m;const[n,o]=l.useState(null),[h,x]=l.useState(!0),[i,d]=l.useState(!1);l.useEffect(()=>{c()},[]);const c=async()=>{try{const s=await fetch("https://maku-travel-ai.preview.emergentagent.com/api/environment/config");if(s.ok){const r=await s.json();o(r)}else{const r=await fetch("/preview-config.json");if(r.ok){const a=await r.json();o(a)}}}catch(t){console.error("Failed to fetch preview config:",t)}finally{x(!1)}},g=async t=>{if(!(!n||i)){d(!0);try{const a=await(await fetch("https://maku-travel-ai.preview.emergentagent.com/api/environment/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({environment:t})})).json();if(a.success)await c(),alert(`Successfully switched to ${t} environment. You may need to refresh the page to see changes.`);else throw new Error(a.error||"Failed to switch environment")}catch(s){console.error("Failed to switch environment:",s),alert(`Failed to switch environment: ${s.message}`)}finally{d(!1)}}};return h?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"text-gray-600",children:"Loading environment status..."})}):n?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"üèóÔ∏è Preview Environment Manager"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(n.last_updated).toLocaleString()]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Current Environment"}),e.jsxs("div",{className:"text-blue-700",children:[e.jsx("span",{className:"font-medium",children:n.current_environment.toUpperCase()})," - ",(m=n.environments[n.current_environment])==null?void 0:m.description]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.entries(n.environments).map(([t,s])=>e.jsxs("div",{className:`border rounded-lg p-4 transition-all ${s.active?"border-green-500 bg-green-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.active?"üü¢":"‚ö™"," ",s.name]}),s.active&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"ACTIVE"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[e.jsxs("div",{children:["URL: ",s.backend_url]}),e.jsxs("div",{children:["Source: ",s.source]})]}),!s.active&&e.jsx("button",{onClick:()=>g(t),disabled:i,className:`w-full py-2 px-4 rounded transition-colors ${i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:i?"Switching...":`Switch to ${s.name}`})]},t))}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"‚ö†Ô∏è Important Notes"}),e.jsxs("ul",{className:"text-yellow-700 text-sm space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Switching environments will update configuration files"}),e.jsx("li",{children:"‚Ä¢ You may need to restart services after switching"}),e.jsx("li",{children:"‚Ä¢ Make sure to commit changes before switching if needed"}),e.jsx("li",{children:"‚Ä¢ Environment URLs are configured for preview deployment"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"üîÑ Refresh Status"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors",children:"üîÑ Restart Application"})]})]}):e.jsx("div",{className:"p-4 text-red-600",children:"Failed to load environment configuration"})},p=()=>e.jsx("div",{className:"min-h-screen bg-white py-8 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Maku.Travel Environment Manager"}),e.jsx("p",{className:"text-gray-600",children:"Switch between Lovable and Emergent preview environments"})]}),e.jsx(b,{}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"üõ†Ô∏è Environment Management Commands"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"CLI Commands"}),e.jsxs("div",{className:"bg-white rounded p-4 font-mono text-sm",children:[e.jsx("div",{className:"mb-2",children:"# Switch to lovable environment"}),e.jsx("div",{className:"text-blue-600 mb-4",children:"node scripts/switch-environment.js lovable"}),e.jsx("div",{className:"mb-2",children:"# Switch to emergent environment"}),e.jsx("div",{className:"text-blue-600 mb-4",children:"node scripts/switch-environment.js emergent"}),e.jsx("div",{className:"mb-2",children:"# Check current status"}),e.jsx("div",{className:"text-blue-600",children:"./scripts/preview-status.sh"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Deployment Commands"}),e.jsxs("div",{className:"bg-white rounded p-4 font-mono text-sm",children:[e.jsx("div",{className:"mb-2",children:"# Deploy lovable environment"}),e.jsx("div",{className:"text-green-600 mb-4",children:"./scripts/deploy-environment.sh lovable"}),e.jsx("div",{className:"mb-2",children:"# Deploy emergent environment"}),e.jsx("div",{className:"text-green-600 mb-4",children:"./scripts/deploy-environment.sh emergent"}),e.jsx("div",{className:"mb-2",children:"# Restart all services"}),e.jsx("div",{className:"text-green-600",children:"sudo supervisorctl restart all"})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"üìã Environment Descriptions"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"üü¶ Lovable State"}),e.jsxs("ul",{className:"text-gray-700 text-sm space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Original application state"}),e.jsx("li",{children:"‚Ä¢ Current features and implementations"}),e.jsx("li",{children:"‚Ä¢ Stable baseline for comparison"}),e.jsx("li",{children:"‚Ä¢ Production-ready state"})]})]}),e.jsxs("div",{className:"border border-purple-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-purple-800 mb-2",children:"üü£ Emergent State"}),e.jsxs("ul",{className:"text-gray-700 text-sm space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Enhanced with CTO recommendations"}),e.jsx("li",{children:"‚Ä¢ Performance optimizations"}),e.jsx("li",{children:"‚Ä¢ New revenue stream features"}),e.jsx("li",{children:"‚Ä¢ Improved architecture"})]})]})]})]})]})});export{p as EnvironmentManager,p as default};
