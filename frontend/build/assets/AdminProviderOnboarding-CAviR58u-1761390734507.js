import{h as g,r as c,s as x,j as e,B as l,d as h,a as i}from"./index-Ds3Fyqjq-1761390734507.js";import{I as n}from"./input-c5Lp-zZl-1761390734507.js";import{P as f}from"./plus-CO4FCRJe-1761390734507.js";import{S as _}from"./settings-4RcyrRlS-1761390734507.js";const C=()=>{const{toast:o}=g(),[p,v]=c.useState([]),[j,d]=c.useState(!1),[a,r]=c.useState({provider_name:"",display_name:"",provider_type:"hotel",api_base_url:"",supports_hotels:!1,supports_flights:!1,supports_activities:!1,priority:50,eco_rating:50,fee_transparency_score:50,supported_regions:[],is_test_mode:!0});c.useEffect(()=>{m()},[]);const m=async()=>{const{data:s}=await x.from("provider_registry").select("*").order("priority");s&&v(s)},u=async()=>{const{data:s,error:t}=await x.from("provider_registry").insert([a]).select();t?o({title:"Error",description:t.message,variant:"destructive"}):(o({title:"Success!",description:`${a.display_name} added to registry`}),d(!1),m())},b=async(s,t)=>{await x.from("provider_registry").update({is_active:!t}).eq("id",s),m(),o({title:"Updated",description:"Provider status changed"})};return e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Provider Registry"}),e.jsx("p",{className:"text-slate-600",children:"Manage travel provider integrations"})]}),e.jsxs(l,{onClick:()=>d(!0),children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Add Provider"]})]}),j&&e.jsxs(h,{className:"p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add New Provider"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Provider Name (Internal)"}),e.jsx(n,{placeholder:"sabre",value:a.provider_name,onChange:s=>r({...a,provider_name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Display Name"}),e.jsx(n,{placeholder:"Sabre GDS",value:a.display_name,onChange:s=>r({...a,display_name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"API Base URL"}),e.jsx(n,{placeholder:"https://api.sabre.com",value:a.api_base_url,onChange:s=>r({...a,api_base_url:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Priority (lower = higher)"}),e.jsx(n,{type:"number",value:a.priority,onChange:s=>r({...a,priority:parseInt(s.target.value)})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Capabilities"}),e.jsx("div",{className:"flex gap-4",children:["Hotels","Flights","Activities"].map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a[`supports_${s.toLowerCase()}`],onChange:t=>r({...a,[`supports_${s.toLowerCase()}`]:t.target.checked})}),s]},s))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{onClick:u,children:"Save Provider"}),e.jsx(l,{variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.display_name}),e.jsx(i,{className:s.is_active?"bg-green-600":"bg-red-600",children:s.is_active?"Active":"Inactive"}),e.jsxs(i,{variant:"outline",children:["Priority: ",s.priority]}),e.jsxs(i,{variant:"outline",children:["Eco: ",s.eco_rating,"/100"]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.supports_hotels&&e.jsx(i,{children:"Hotels"}),s.supports_flights&&e.jsx(i,{children:"Flights"}),s.supports_activities&&e.jsx(i,{children:"Activities"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>b(s.id,s.is_active),children:s.is_active?"Deactivate":"Activate"}),e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(_,{className:"w-4 h-4"})})]})]})},s.id))})]})};export{C as default};
