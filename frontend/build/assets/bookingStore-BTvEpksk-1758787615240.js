import{ao as I}from"./index-sjMrv3Ur-1758787615240.js";const F=e=>{let t;const n=new Set,r=(i,h)=>{const m=typeof i=="function"?i(t):i;if(!Object.is(m,t)){const y=t;t=(h!=null?h:typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(g=>g(t,y))}},s=()=>t,u={setState:r,getState:s,getInitialState:()=>f,subscribe:i=>(n.add(i),()=>n.delete(i))},f=t=e(r,s,u);return u},k=e=>e?F(e):F,C=e=>e;function w(e,t=C){const n=I.useSyncExternalStore(e.subscribe,I.useCallback(()=>t(e.getState()),[e,t]),I.useCallback(()=>t(e.getInitialState()),[e,t]));return I.useDebugValue(n),n}const H=e=>{const t=k(e),n=r=>w(t,r);return Object.assign(n,t),n},B=e=>e?H(e):H;function _(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const c=f=>f===null?null:JSON.parse(f,void 0),u=(o=n.getItem(s))!=null?o:null;return u instanceof Promise?u.then(c):c(u)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const b=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return b(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return b(r)(n)}}}},D=(e,t)=>(n,r,s)=>{let o={storage:_(()=>localStorage),partialize:l=>l,version:0,merge:(l,p)=>({...p,...l}),...t},c=!1;const u=new Set,f=new Set;let i=o.storage;if(!i)return e((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...l)},r,s);const h=()=>{const l=o.partialize({...r()});return i.setItem(o.name,{state:l,version:o.version})},m=s.setState;s.setState=(l,p)=>(m(l,p),h());const y=e((...l)=>(n(...l),h()),r,s);s.getInitialState=()=>y;let g;const S=()=>{var l,p;if(!i)return;c=!1,u.forEach(a=>{var d;return a((d=r())!=null?d:y)});const v=((p=o.onRehydrateStorage)==null?void 0:p.call(o,(l=r())!=null?l:y))||void 0;return b(i.getItem.bind(i))(o.name).then(a=>{if(a)if(typeof a.version=="number"&&a.version!==o.version){if(o.migrate){const d=o.migrate(a.state,a.version);return d instanceof Promise?d.then(O=>[!0,O]):[!0,d]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,a.state];return[!1,void 0]}).then(a=>{var d;const[O,T]=a;if(g=o.merge(T,(d=r())!=null?d:y),n(g,!0),O)return h()}).then(()=>{v==null||v(g,void 0),g=r(),c=!0,f.forEach(a=>a(g))}).catch(a=>{v==null||v(void 0,a)})};return s.persist={setOptions:l=>{o={...o,...l},l.storage&&(i=l.storage)},clearStorage:()=>{i==null||i.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>S(),hasHydrated:()=>c,onHydrate:l=>(u.add(l),()=>{u.delete(l)}),onFinishHydration:l=>(f.add(l),()=>{f.delete(l)})},o.skipHydration||S(),g||y},j=D,E=B()(j(e=>({selectedHotelOffer:null,selectedHotelData:null,selectedAddOns:[],addOnsTotal:0,selectedOutboundFlight:null,selectedInboundFlight:null,multiCityFlights:[],tripType:"oneway",selectedActivityOffer:null,guestInfo:null,passengerInfo:null,setHotelBooking:(t,n,r,s)=>e({selectedHotelOffer:t,selectedHotelData:n,selectedAddOns:r,addOnsTotal:s}),setFlightBooking:(t,n,r,s)=>e({selectedOutboundFlight:t,selectedInboundFlight:n||null,multiCityFlights:r||[],tripType:s||"oneway"}),setActivityBooking:t=>e({selectedActivityOffer:t}),setGuestInfo:t=>e({guestInfo:t}),setPassengerInfo:t=>e({passengerInfo:t}),clearBooking:()=>e({selectedHotelOffer:null,selectedHotelData:null,selectedAddOns:[],addOnsTotal:0,selectedOutboundFlight:null,selectedInboundFlight:null,multiCityFlights:[],tripType:"oneway",selectedActivityOffer:null,guestInfo:null,passengerInfo:null})}),{name:"booking-store",partialize:e=>A(e),merge:(e,t)=>({...t,...A(e)})}));function A(e){var t,n,r,s,o,c,u;return{selectedHotelOffer:(t=e.selectedHotelOffer)!=null?t:null,selectedHotelData:(n=e.selectedHotelData)!=null?n:null,selectedAddOns:Array.isArray(e.selectedAddOns)?e.selectedAddOns:[],addOnsTotal:typeof e.addOnsTotal=="number"?e.addOnsTotal:0,selectedOutboundFlight:(r=e.selectedOutboundFlight)!=null?r:null,selectedInboundFlight:(s=e.selectedInboundFlight)!=null?s:null,multiCityFlights:Array.isArray(e.multiCityFlights)?e.multiCityFlights:[],tripType:e.tripType==="roundtrip"||e.tripType==="multicity"?e.tripType:"oneway",selectedActivityOffer:(o=e.selectedActivityOffer)!=null?o:null,guestInfo:(c=e.guestInfo)!=null?c:null,passengerInfo:(u=e.passengerInfo)!=null?u:null}}export{E as u};
