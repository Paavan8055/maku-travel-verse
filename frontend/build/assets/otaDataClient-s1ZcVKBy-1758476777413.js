import{s,l as c}from"./index-CoUQs0uW-1758476777413.js";const n={async fetchTravelAnalytics(e,t){const{data:a,error:r}=await s.from("travel_analytics").select("*").eq("user_id",e).eq("year",t||new Date().getFullYear()).single();if(r&&r.code!=="PGRST116")throw r;return a},async updateTravelStats(e,t){const a=new Date().getFullYear(),{data:r,error:i}=await s.from("travel_analytics").upsert({user_id:e,year:a,...t}).select().single();if(i)throw i;return r}},o={async logActivity(e){const{data:{session:t}}=await s.auth.getSession(),{error:a}=await s.from("user_activity_logs").insert({user_id:(t==null?void 0:t.user.id)||null,session_id:(t==null?void 0:t.access_token)||null,...e});a&&c.warn("Activity logging failed:",a)},async fetchRecentActivity(e,t=50){let a=s.from("user_activity_logs").select("*").order("created_at",{ascending:!1}).limit(t);e&&(a=a.eq("item_type",e));const{data:r,error:i}=await a;if(i)throw i;return r}};export{o as a,n as b};
