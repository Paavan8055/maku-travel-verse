import{r as t,a7 as B,J as h,j as e,i as j,k as u,l as f,R as g,o as p,w as c,B as d,I as L}from"./index-BZMa5YK6-1758536202306.js";import{T as A,a as E,b as N,c as a,d as M,e as r}from"./table-rrAyJORr-1758536202306.js";import{S as D,a as P,b as z,c as H,d as o}from"./select-e0YgR1GE-1758536202306.js";import{U as I}from"./user-plus-DSXv3894-1758536202306.js";import{S as R}from"./search-DnhOb3Yu-1758536202306.js";import{C as k}from"./circle-check-big-B2XwWZ78-1758536202306.js";import{B as F}from"./ban-CIDqgmrL-1758536202306.js";import"./index-BdQq_4o_-1758536202306.js";import"./index-CKSKFedZ-1758536202306.js";const J=()=>{const[v,_]=t.useState([]),[S,m]=t.useState(!0),[l,b]=t.useState(""),[w,C]=t.useState("all");t.useEffect(()=>{U()},[]);const U=async()=>{try{m(!0);const{data:s,error:n}=await B.from("profiles").select(`
          id,
          user_id,
          email,
          first_name,
          last_name,
          created_at,
          updated_at
        `).order("created_at",{ascending:!1});if(n)throw n;const T=(s||[]).map(i=>({...i,id:i.user_id,last_sign_in_at:null,email_confirmed_at:i.created_at}));_(T),h.info("Users loaded successfully")}catch(s){h.error("Error fetching users:",s)}finally{m(!1)}},x=v.filter(s=>!l||s.email.toLowerCase().includes(l.toLowerCase())||`${s.first_name} ${s.last_name}`.toLowerCase().includes(l.toLowerCase())),y=s=>s.email_confirmed_at?e.jsx(c,{variant:"default",className:"bg-success/10 text-success border-success/20",children:"Active"}):e.jsx(c,{variant:"secondary",children:"Pending"});return S?e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"User Management"]})}),e.jsx(p,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs(f,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"User Management",e.jsxs(c,{variant:"outline",children:[x.length," users"]})]}),e.jsxs(d,{size:"sm",className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Add User"]})]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Search users by email or name...",value:l,onChange:s=>b(s.target.value),className:"pl-10"})]}),e.jsxs(D,{value:w,onValueChange:C,children:[e.jsx(P,{className:"w-40",children:e.jsx(z,{placeholder:"Status"})}),e.jsxs(H,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"active",children:"Active"}),e.jsx(o,{value:"pending",children:"Pending"})]})]})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(A,{children:[e.jsx(E,{children:e.jsxs(N,{children:[e.jsx(a,{children:"User"}),e.jsx(a,{children:"Email"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Joined"}),e.jsx(a,{children:"Last Active"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(M,{children:x.map(s=>e.jsxs(N,{children:[e.jsx(r,{children:e.jsxs("div",{className:"font-medium",children:[s.first_name," ",s.last_name]})}),e.jsx(r,{className:"text-muted-foreground",children:s.email}),e.jsx(r,{children:y(s)}),e.jsx(r,{className:"text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()}),e.jsx(r,{className:"text-muted-foreground",children:s.last_sign_in_at?new Date(s.last_sign_in_at).toLocaleDateString():"Never"}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{size:"sm",variant:"outline",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"outline",children:e.jsx(F,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]})},Y=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts, roles, and permissions"})]}),e.jsx(J,{})]});export{Y as default};
