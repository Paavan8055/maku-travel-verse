import{k as X,b as Z,u as ee,r as a,j as e,a as p,d,B as u}from"./index-DqGZ8t5e-1761326676538.js";import{N as se}from"./Navbar-Cz4na1se-1761326676538.js";import{I as g}from"./input-D8JvpvT5-1761326676538.js";import{S,a as w,b as A,c as C,d as i}from"./select-CF8MFyKO-1761326676538.js";import{a as ae}from"./advancedSearchApi-DgUBT3aa-1761326676538.js";import{g as te}from"./aiPersonalizationApi-C0wnQ0cW-1761326676538.js";import{c as re}from"./realtimeApi-1xTJonWO-1761326676538.js";import{T}from"./test-tube-diagonal-D0Ie8wQC-1761326676538.js";import{P as _}from"./plane-BCnagIHK-1761326676538.js";import{M as le}from"./map-pin-qlXifRZs-1761326676538.js";import{S as ie}from"./search-BMXgCoIw-1761326676538.js";import{S as ne}from"./sparkles-vuoP1AWK-1761326676538.js";import{F as ce}from"./filter-DLn3ta7Y-1761326676538.js";import{C as oe}from"./circle-alert-BZqMI_gd-1761326676538.js";import{S as de}from"./star-BgZU3NAt-1761326676538.js";import{A as me}from"./arrow-right-C7uDAAsl-1761326676538.js";import"./useApiHealth-Db_IXXK1-1761326676538.js";import"./avatar-UC1OGz2U-1761326676538.js";import"./index-DDmUqv8O-1761326676538.js";import"./globe-BxyFWwoN-1761326676538.js";import"./useHealthMonitor-FMCjsxDd-1761326676538.js";import"./useAIIntelligence-C7VN-tIR-1761326676538.js";import"./chevron-down-BFL4Uggs-1761326676538.js";import"./brain-CtjJaEAD-1761326676538.js";import"./calendar-CL2YOCTx-1761326676538.js";import"./zap-DEjmRDpY-1761326676538.js";import"./users-Cryeq6Pw-1761326676538.js";import"./settings-WM63zvrn-1761326676538.js";import"./shield-CC5acBqH-1761326676538.js";import"./user-BTI-sRzz-1761326676538.js";import"./index-BdQq_4o_-1761326676538.js";import"./index-CokBKAwC-1761326676538.js";import"./index-8DBfw8dd-1761326676538.js";const Ue=()=>{const[l]=X(),E=Z(),{user:j}=ee(),[m,B]=a.useState("round-trip"),[b,$]=a.useState(l.get("origin")||""),[f,L]=a.useState(l.get("destination")||""),[x,M]=a.useState(l.get("departureDate")||""),[P,V]=a.useState(l.get("returnDate")||""),[N,O]=a.useState({adults:parseInt(l.get("adults")||"1"),children:parseInt(l.get("children")||"0"),infants:parseInt(l.get("infants")||"0")}),[k,Y]=a.useState(l.get("cabinClass")||"economy"),[h,F]=a.useState([]),[v,D]=a.useState(!1),[y,c]=a.useState(null),[t,R]=a.useState({maxStops:null,priceRange:{min:0,max:1e4},preferredAirlines:[],departureTimeRange:null}),[I,z]=a.useState("price"),[J,U]=a.useState(null),q=[{name:"Sabre",badge:"ðŸ§ª Test API",color:"blue"},{name:"Duffle",badge:"ðŸ§ª Sandbox",color:"purple"},{name:"Amadeus",badge:"ðŸ§ª Development",color:"green"},{name:"Expedia",badge:"ðŸ§ª Sandbox",color:"orange"}];a.useEffect(()=>{H()},[]);const H=async()=>{try{const s=await te({user_id:"guest",search_context:{type:"flight"}});U(s)}catch(s){console.error("AI suggestions failed:",s)}},K=async()=>{var s,r,o;if(!b||!f||!x){c("Please fill in all required fields");return}D(!0),c(null);try{const n=await ae({search_type:m,origin:b,destination:f,departure_date:x,return_date:m==="round-trip"?P:void 0,passengers:N,cabin_class:k,price_range:t.priceRange.min>0||t.priceRange.max<1e4?t.priceRange:void 0,max_stops:(s=t.maxStops)!=null?s:void 0,preferred_airlines:t.preferredAirlines.length>0?t.preferredAirlines:void 0,sort_by:I,sort_order:"asc",page:1,per_page:20});n.success?(F(n.results),n.results.length===0&&c("No flights found. Try adjusting your search criteria or filters.")):c("No flights found. Please try different search criteria.")}catch(n){console.error("Flight search error:",n),c(((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.detail)||"Search failed. Please try again."),F([])}finally{D(!1)}},Q=async s=>{try{(await re({user_id:(j==null?void 0:j.id)||"guest",search_criteria:{type:"flight",destination:s.destination,dates:{departure:x}},target_price:s.price*.9,currency:s.currency}))("âœ… Price alert created! We'll notify you when prices drop below $"+Math.round(s.price*.9))}catch(r){console.error("Price alert failed:",r),alert("âš ï¸ Unable to create price alert. Please try again.")}},W=s=>{sessionStorage.setItem("selectedFlight",JSON.stringify(s)),E(`/flights/review?flightId=${s.flight_id}`)},G=s=>({Emirates:"ðŸ‡¦ðŸ‡ª","Singapore Airlines":"ðŸ‡¸ðŸ‡¬",Lufthansa:"ðŸ‡©ðŸ‡ª","Qatar Airways":"ðŸ‡¶ðŸ‡¦",United:"ðŸ‡ºðŸ‡¸",Delta:"ðŸ‡ºðŸ‡¸",American:"ðŸ‡ºðŸ‡¸"})[s]||"âœˆï¸";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(se,{}),e.jsx("section",{className:"bg-gradient-to-br from-blue-600 via-cyan-600 to-blue-700 pt-24 pb-12 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:e.jsxs(p,{className:"bg-white/20 text-white border-white/30",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"Real Provider Test Data"]})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Find Your Perfect Flight"}),e.jsx("p",{className:"text-xl text-white/90",children:"Compare flights from Sabre, Duffle, Amadeus & Expedia"})]}),e.jsxs(d,{className:"p-6 shadow-2xl",children:[e.jsx("div",{className:"flex gap-2 mb-6",children:["one-way","round-trip","multi-city"].map(s=>e.jsx(u,{variant:m===s?"default":"outline",onClick:()=>B(s),className:"capitalize",children:s},s))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"From"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(g,{placeholder:"NYC, JFK, New York",value:b,onChange:s=>$(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"To"}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(g,{placeholder:"LON, LHR, London",value:f,onChange:s=>L(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Departure"}),e.jsx(g,{type:"date",value:x,onChange:s=>M(s.target.value)})]}),m==="round-trip"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Return"}),e.jsx(g,{type:"date",value:P,onChange:s=>V(s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Passengers"}),e.jsxs(S,{value:N.adults.toString(),onValueChange:s=>O({...N,adults:parseInt(s)}),children:[e.jsx(w,{children:e.jsx(A,{})}),e.jsx(C,{children:[1,2,3,4,5,6].map(s=>e.jsxs(i,{value:s.toString(),children:[s," Adult",s>1?"s":""]},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Class"}),e.jsxs(S,{value:k,onValueChange:Y,children:[e.jsx(w,{children:e.jsx(A,{})}),e.jsxs(C,{children:[e.jsx(i,{value:"economy",children:"Economy"}),e.jsx(i,{value:"premium_economy",children:"Premium Economy"}),e.jsx(i,{value:"business",children:"Business"}),e.jsx(i,{value:"first",children:"First Class"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(u,{onClick:K,disabled:v,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:v?e.jsx(e.Fragment,{children:"Searching..."}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Search Flights"]})})})]}),J&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-semibold text-purple-900",children:"AI Suggestion"})]}),e.jsx("p",{className:"text-sm text-purple-700",children:"Based on your preferences, try searching flexible dates (Â±3 days) for up to 30% savings!"})]})]})]})}),e.jsx("section",{className:"py-12 px-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:e.jsxs(d,{className:"p-6 sticky top-6",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Filters"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block",children:"Stops"}),e.jsx("div",{className:"space-y-2",children:[{value:0,label:"Nonstop"},{value:1,label:"1 Stop"},{value:2,label:"2+ Stops"}].map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"stops",checked:t.maxStops===s.value,onChange:()=>R({...t,maxStops:s.value})}),e.jsx("span",{className:"text-sm",children:s.label})]},s.value))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block",children:"Price Range"}),e.jsx("input",{type:"range",min:"0",max:"10000",step:"100",value:t.priceRange.max,onChange:s=>R({...t,priceRange:{...t.priceRange,max:parseInt(s.target.value)}}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[e.jsx("span",{children:"$0"}),e.jsxs("span",{children:["$",t.priceRange.max]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block",children:"Sort By"}),e.jsxs(S,{value:I,onValueChange:s=>z(s),children:[e.jsx(w,{children:e.jsx(A,{})}),e.jsxs(C,{children:[e.jsx(i,{value:"price",children:"Best Price"}),e.jsx(i,{value:"duration",children:"Shortest"}),e.jsx(i,{value:"departure_time",children:"Departure Time"})]})]})]})]})}),e.jsxs("div",{className:"flex-1",children:[y&&e.jsx(d,{className:"p-6 mb-6 border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{children:y})]})}),h.length>0&&e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-600",children:[h.length," flights found"]}),e.jsx("div",{className:"flex gap-2",children:q.map(s=>e.jsx(p,{variant:"outline",className:"text-xs",children:s.badge},s.name))})]}),e.jsx("div",{className:"space-y-4",children:h.map(s=>{var r,o;return e.jsxs(d,{className:"p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-2xl",children:G(s.airline)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:s.airline}),e.jsx("p",{className:"text-sm text-gray-600",children:s.flight_number})]})]}),e.jsxs(p,{className:"bg-blue-600 text-white",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),s.provider]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:((r=s.departure_time.split("T")[1])==null?void 0:r.slice(0,5))||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.origin})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"h-px bg-gray-300 flex-1"}),e.jsx(_,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{className:"h-px bg-gray-300 flex-1"})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[Math.floor(s.duration_minutes/60),"h ",s.duration_minutes%60,"m"]}),e.jsx(p,{variant:"outline",className:"text-xs mt-1",children:s.stops===0?"Nonstop":`${s.stops} stop${s.stops>1?"s":""}`})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold",children:((o=s.arrival_time.split("T")[1])==null?void 0:o.slice(0,5))||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.destination})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["$",s.price]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.seats_available," seats left"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>Q(s),children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),"Alert"]}),e.jsxs(u,{onClick:()=>W(s),className:"bg-gradient-to-r from-blue-600 to-cyan-600",children:["Select",e.jsx(me,{className:"w-4 h-4 ml-2"})]})]})]})]},s.flight_id)})}),h.length===0&&!v&&!y&&e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(_,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ready to find your flight?"}),e.jsx("p",{className:"text-gray-600",children:"Enter your travel details above and search across multiple providers"})]})]})]})})}),e.jsx("section",{className:"py-12 px-6 bg-blue-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"About Flight Data"}),e.jsx("p",{className:"text-sm text-gray-700",children:"All flights shown are from real provider test/sandbox APIs (Sabre, Duffle, Amadeus, Expedia). Airlines, routes, and pricing reflect actual market data. As a pre-revenue startup, we're building authentic integrations that will go live at launch."})]})})]})};export{Ue as default};
