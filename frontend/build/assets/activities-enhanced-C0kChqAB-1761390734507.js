import{k as _,b as F,u as B,h as E,r,j as e,a as j,d as c,B as N}from"./index-Ds3Fyqjq-1761390734507.js";import{N as U}from"./Navbar-Cta1wb01-1761390734507.js";import{I as y}from"./input-c5Lp-zZl-1761390734507.js";import{S as $,a as G,b as V,c as M,d as W}from"./select-DYqOjKC0-1761390734507.js";import{b as z}from"./advancedSearchApi-qjvA1mOp-1761390734507.js";import{T as w}from"./test-tube-diagonal-13bngPS2-1761390734507.js";import{M as Y}from"./map-pin-BEOL209D-1761390734507.js";import{S as q}from"./search-D_yeJ3Nh-1761390734507.js";import{F as J}from"./filter-D9vkt3Ie-1761390734507.js";import{S as L}from"./star-BUzoH2os-1761390734507.js";import{C as O}from"./clock-BKW3t9mm-1761390734507.js";import{U as H}from"./users-DDw7hYke-1761390734507.js";import{S as K}from"./shield-B3chqNe1-1761390734507.js";import{C as Q}from"./camera-CdZoFK0p-1761390734507.js";import"./useApiHealth-DwS5lxeB-1761390734507.js";import"./avatar-DmpTeAp2-1761390734507.js";import"./index-BkOho516-1761390734507.js";import"./globe-C_-iK_TJ-1761390734507.js";import"./useHealthMonitor-xHIaz80c-1761390734507.js";import"./useAIIntelligence-bO6OnE2b-1761390734507.js";import"./plane-BQiVZ_ye-1761390734507.js";import"./sparkles-BoTGnZZP-1761390734507.js";import"./chevron-down-BR2MuXvI-1761390734507.js";import"./brain-BBf8ZmIX-1761390734507.js";import"./calendar-D9Gvdc7R-1761390734507.js";import"./zap-CUOzWxu8-1761390734507.js";import"./settings-4RcyrRlS-1761390734507.js";import"./user-DUukUY7S-1761390734507.js";import"./index-BdQq_4o_-1761390734507.js";import"./index-DO-UnuSd-1761390734507.js";import"./index-8DBfw8dd-1761390734507.js";const Ie=()=>{const[n]=_(),S=F(),{user:X}=B(),{toast:m}=E(),[d,k]=r.useState(n.get("destination")||""),[x,T]=r.useState(n.get("startDate")||""),[h,C]=r.useState({adults:parseInt(n.get("adults")||"2"),children:parseInt(n.get("children")||"0")}),[p,f]=r.useState([]),[g,v]=r.useState(!1),[u,o]=r.useState(null),[t,l]=r.useState({categories:[],activityTypes:[],priceRange:{min:0,max:500},minRating:0,duration:null}),[A,Z]=r.useState("popularity"),b=[{id:"tours",name:"Tours",icon:"🚌"},{id:"activities",name:"Activities",icon:"🎯"},{id:"attractions",name:"Attractions",icon:"🏛️"},{id:"food",name:"Food & Dining",icon:"🍽️"},{id:"water",name:"Water Sports",icon:"🏊"}],D=["Cultural","Adventure","Food & Drink","Nature","Water Activities","Urban Exploration"],P=async()=>{var s,i;if(!d||!x){m({title:"Missing Information",description:"Please fill in destination and date",variant:"destructive"});return}v(!0),o(null);try{const a=await z({destination:d,start_date:x,participants:h,categories:t.categories.length>0?t.categories:void 0,activity_types:t.activityTypes.length>0?t.activityTypes:void 0,price_range:t.priceRange.max<500?t.priceRange:void 0,min_rating:t.minRating>0?t.minRating:void 0,sort_by:A,sort_order:"desc",page:1,per_page:20});a.success?(f(a.results),a.results.length===0&&o("No activities found. Try adjusting your filters."),m({title:"Search Complete",description:`Found ${a.results.length} experiences`})):o("No activities found. Try different search criteria.")}catch(a){console.error("Activity search error:",a),o(((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.detail)||"Search failed. Please try again."),f([]),m({title:"Search Failed",description:"Unable to search activities. Please try again.",variant:"destructive"})}finally{v(!1)}},I=s=>{sessionStorage.setItem("selectedActivity",JSON.stringify(s)),S(`/activities/checkout?activityId=${s.activity_id}`)},R=s=>{const i=b.find(a=>a.id===s);return(i==null?void 0:i.icon)||"🎯"};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(U,{}),e.jsx("section",{className:"bg-gradient-to-br from-green-600 via-teal-600 to-cyan-700 pt-24 pb-12 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:e.jsxs(j,{className:"bg-white/20 text-white border-white/30",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),"Real Provider Test Data"]})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Unique Travel Experiences"}),e.jsx("p",{className:"text-xl text-white/90",children:"Discover activities from Viator & GetYourGuide"})]}),e.jsxs(c,{className:"p-6 shadow-2xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Destination"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(y,{placeholder:"City or landmark",value:d,onChange:s=>k(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsx(y,{type:"date",value:x,onChange:s=>T(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Participants"}),e.jsxs($,{value:h.adults.toString(),onValueChange:s=>C({...h,adults:parseInt(s)}),children:[e.jsx(G,{children:e.jsx(V,{})}),e.jsx(M,{children:[1,2,3,4,5,6].map(s=>e.jsxs(W,{value:s.toString(),children:[s," Adult",s>1?"s":""]},s))})]})]})]}),e.jsx(N,{onClick:P,disabled:g,className:"w-full bg-gradient-to-r from-green-600 to-cyan-600 hover:from-green-700 hover:to-cyan-700",children:g?"Searching...":e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Search Activities"]})})]})]})}),e.jsx("section",{className:"py-12 px-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:e.jsxs(c,{className:"p-6 sticky top-6",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Filters"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block",children:"Category"}),e.jsx("div",{className:"space-y-2",children:b.map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.categories.includes(s.id),onChange:i=>{i.target.checked?l({...t,categories:[...t.categories,s.id]}):l({...t,categories:t.categories.filter(a=>a!==s.id)})}}),e.jsxs("span",{className:"text-sm",children:[s.icon," ",s.name]})]},s.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block",children:"Type"}),e.jsx("div",{className:"space-y-2",children:D.slice(0,4).map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.activityTypes.includes(s),onChange:i=>{i.target.checked?l({...t,activityTypes:[...t.activityTypes,s]}):l({...t,activityTypes:t.activityTypes.filter(a=>a!==s)})}}),e.jsx("span",{className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block",children:"Price"}),e.jsx("input",{type:"range",min:"0",max:"500",step:"25",value:t.priceRange.max,onChange:s=>l({...t,priceRange:{...t.priceRange,max:parseInt(s.target.value)}}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[e.jsx("span",{children:"$0"}),e.jsxs("span",{children:["$",t.priceRange.max]})]})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-gray-600",children:[p.length," experiences found"]})}),u&&e.jsx(c,{className:"p-6 mb-6 border-red-200 bg-red-50",children:e.jsx("p",{className:"text-red-700",children:u})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(s=>e.jsxs(c,{className:"overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:s.images[0]||"https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=600",alt:s.title,className:"w-full h-full object-cover"}),e.jsxs(j,{className:"absolute top-3 left-3 bg-blue-600 text-white text-xs",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),s.provider]}),e.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1 bg-white/95 px-3 py-1.5 rounded-full",children:[e.jsx(L,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-bold text-sm",children:s.rating}),e.jsxs("span",{className:"text-xs text-gray-600",children:["(",s.review_count,")"]})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs(j,{variant:"outline",className:"mb-2 text-xs capitalize",children:[R(s.category)," ",s.category]}),e.jsx("h3",{className:"font-bold text-lg mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(O,{className:"w-4 h-4 text-gray-400"}),s.duration_hours,"h"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400"}),"Small groups"]})]}),s.accessibility&&e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-xs text-green-700",children:[e.jsx(K,{className:"w-3 h-3"}),"Wheelchair accessible"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",s.price]}),e.jsx("p",{className:"text-xs text-gray-500",children:"per person"})]}),e.jsx(N,{onClick:()=>I(s),className:"bg-gradient-to-r from-green-600 to-teal-600",children:"Book Now"})]})]})]},s.activity_id))}),p.length===0&&!g&&!u&&e.jsxs(c,{className:"p-12 text-center",children:[e.jsx(Q,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Discover amazing experiences"}),e.jsx("p",{className:"text-gray-600",children:"Search for tours, activities, and attractions"})]})]})]})})}),e.jsx("section",{className:"py-12 px-6 bg-green-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"About Activity Data"}),e.jsx("p",{className:"text-sm text-gray-700",children:"All activities from real provider test APIs (Viator & GetYourGuide). Authentic experiences, pricing, and reviews. Pre-revenue startup building genuine integrations for launch."})]})})]})};export{Ie as default};
