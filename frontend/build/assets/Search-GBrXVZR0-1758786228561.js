import{r as l,x as B,j as e,N as F,i as r,t as n,B as i,M as $,I as d,d as j,n as A,a7 as I}from"./index-BuFvfeSJ-1758786228561.js";import{S as T,a as D,b as P,c as G,d as M}from"./select-D-JCiAP4-1758786228561.js";import{S as z}from"./search-D1MIMbFs-1758786228561.js";import"./index-BdQq_4o_-1758786228561.js";import"./index-CJWzJC_R-1758786228561.js";const q=()=>{const[t,g]=l.useState("hotels"),[o,p]=l.useState(""),[m,f]=l.useState(""),[h,v]=l.useState(""),[x,N]=l.useState(2),[b,y]=l.useState(0),[S,u]=l.useState(!0),{user:c}=B();l.useEffect(()=>{(async()=>{if(!c){u(!1);return}try{const{data:a,error:C}=await I.from("funds").select("balance").eq("user_id",c.id).single();!C&&a&&y(a.balance||0)}catch(a){console.error("Failed to fetch fund balance:",a)}finally{u(!1)}})()},[c]);const k=[{location:"Bali, Indonesia",type:"Spiritual",savings:"15% off"},{location:"Gold Coast, Australia",type:"Family",savings:"Group fund applies"},{location:"Tokyo, Japan",type:"Solo",savings:"Single room deals"},{location:"Sydney, Australia",type:"Pet",savings:"Pet-friendly certified"}],w=()=>{window.location.href=`/booking/select?type=${t}&destination=${o}&checkin=${m}&checkout=${h}&guests=${x}`};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(F,{}),e.jsx("div",{className:"pt-24 pb-8 px-6 bg-gradient-to-b from-muted/30 to-background",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2 font-['Playfair_Display']",children:["Search & ",e.jsx("span",{className:"hero-text",children:"Book"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Find the perfect stay, flight, or car rental for your journey"})]}),c&&e.jsx(r,{className:"travel-card",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Travel Fund Balance"}),S?e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-8 bg-muted rounded w-20 mx-auto mb-2"})}):e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",b]}),e.jsx(i,{variant:"outline",size:"sm",className:"mt-2",children:"Manage Fund"})]})})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 pb-20",children:[e.jsx(r,{className:"travel-card mb-8",children:e.jsxs(n,{className:"p-6",children:[e.jsx("div",{className:"flex space-x-4 mb-6",children:["hotels","flights","cars"].map(s=>e.jsx(i,{variant:t===s?"default":"ghost",onClick:()=>g(s),className:"capitalize",children:s},s))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="flights"?"From / To":"Destination"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{placeholder:t==="flights"?"Sydney to Bali":"Where to?",value:o,onChange:s=>p(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="flights"?"Departure":"Check-in"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"date",value:m,onChange:s=>f(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="flights"?"Return":"Check-out"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"date",value:h,onChange:s=>v(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="cars"?"Driver Age":"Guests"}),e.jsxs(T,{value:x.toString(),onValueChange:s=>N(parseInt(s)),children:[e.jsx(D,{children:e.jsx(P,{})}),e.jsx(G,{children:Array.from({length:8},(s,a)=>a+1).map(s=>e.jsx(M,{value:s.toString(),children:t==="cars"?`${s+17} years`:`${s} guest${s>1?"s":""}`},s))})]})]})]}),e.jsxs(i,{onClick:w,className:"w-full mt-6 btn-primary h-12",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Search ",t]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Smart Suggestions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map((s,a)=>e.jsx(r,{className:"travel-card cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.location}),e.jsx(A,{variant:"secondary",children:s.type})]}),e.jsx("p",{className:"text-sm text-primary font-medium",children:s.savings})]})},a))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Searches"}),e.jsx("div",{className:"space-y-3",children:["Hotels in Bali • Mar 15-22 • 2 guests","Flights Sydney to Tokyo • Apr 1 • 1 passenger"].map((s,a)=>e.jsx(r,{className:"travel-card cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:s}),e.jsx(i,{variant:"ghost",size:"sm",children:"Search Again"})]})})},a))})]})]})]})};export{q as default};
