import{r as d,u as D,h as q,j as e,a as x,b as j,d as f,e as v,f as F,B as g}from"./index-DQQjtSjM-1760115523726.js";import{N as I}from"./Navbar-DmnRNmFi-1760115523726.js";import{I as m}from"./input-CXpAni8X-1760115523726.js";import{L as o}from"./label-opxJz_yY-1760115523726.js";import{T as O}from"./textarea--SfIJblc-1760115523726.js";import{S as N}from"./separator-CgbFWVEq-1760115523726.js";import{C as k}from"./circle-check-big-BC9Jh4yE-1760115523726.js";import{M as L}from"./map-pin-DMax6vhW-1760115523726.js";import{C as U}from"./calendar-DBg4Wl9r-1760115523726.js";import{C as z}from"./clock-DBYbubSL-1760115523726.js";import{U as B}from"./users-XTVR641H-1760115523726.js";import{S as W}from"./star-DXupOrUf-1760115523726.js";import{f as $}from"./format-BW2ck5sV-1760115523726.js";import"./useApiHealth-CJts1VM3-1760115523726.js";import"./avatar-sp5_TXm2-1760115523726.js";import"./index-sb_C2OYH-1760115523726.js";import"./globe-CWRjv72A-1760115523726.js";import"./useHealthMonitor-C3kSmdGR-1760115523726.js";import"./useAIIntelligence-Cmi78WFC-1760115523726.js";import"./plane-B7gIkj3I-1760115523726.js";import"./sparkles-Cg1wPKlX-1760115523726.js";import"./chevron-down-DptI0Tvw-1760115523726.js";import"./brain-hCtmJ5Ou-1760115523726.js";import"./zap-BxsNOfn6-1760115523726.js";import"./trophy-DcUNk98F-1760115523726.js";import"./settings-uh9Q_XHj-1760115523726.js";import"./shield-R0yVNnqf-1760115523726.js";import"./user-C4f7Sjmt-1760115523726.js";import"./en-US-CC7XSppg-1760115523726.js";const u=["Review","Participants","Payment","Confirmation"],H=()=>{const[i,y]=d.useState(1),[t,E]=d.useState(null),[b,w]=d.useState([]),[C,P]=d.useState(!1),h=D(),{toast:l}=q();d.useEffect(()=>{const r=sessionStorage.getItem("selectedActivity");if(r)try{const s=JSON.parse(r);E(s);const a=s.participants||1;w(Array.from({length:a},()=>({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",specialRequirements:""})))}catch(s){console.error("Error loading activity data:",s),l({title:"Error",description:"Could not load activity details. Please try again.",variant:"destructive"}),h("/search/activities")}else l({title:"No Activity Selected",description:"Please select an activity first.",variant:"destructive"}),h("/search/activities")},[h,l]);const n=(r,s,a)=>{w(p=>p.map((c,M)=>M===r?{...c,[s]:a}:c))},S=()=>b.every(r=>r.firstName&&r.lastName&&r.email&&r.phone),R=()=>{if(i===2&&!S()){l({title:"Incomplete Information",description:"Please fill in all required participant details.",variant:"destructive"});return}i<u.length&&y(i+1)},T=()=>{i>1&&y(i-1)},A=async()=>{if(t){P(!0);try{l({title:"Redirecting to Provider",description:`Redirecting to ${t.provider} to complete your booking.`}),window.open(t.providerUrl,"_blank"),setTimeout(()=>{h("/search/activities")},2e3)}catch(r){console.error("Error processing booking:",r),l({title:"Booking Error",description:"There was an error processing your booking. Please try again.",variant:"destructive"})}finally{P(!1)}}};return t?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:u.map((r,s)=>{const a=s+1,p=a===i,c=a<i;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`
                  flex items-center justify-center w-8 h-8 rounded-full border-2 text-sm font-medium
                  ${p||c?"border-primary bg-primary text-primary-foreground":"border-muted bg-background text-muted-foreground"}
                `,children:c?e.jsx(k,{className:"w-4 h-4"}):a}),e.jsx("span",{className:`ml-2 text-sm ${p?"text-foreground font-medium":"text-muted-foreground"}`,children:r}),s<u.length-1&&e.jsx("div",{className:`ml-4 w-12 h-0.5 ${c?"bg-primary":"bg-muted"}`})]},r)})})}),i===1&&e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Activity Details"]})}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:t.name}),e.jsx("p",{className:"text-muted-foreground mt-2",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:$(new Date(t.date),"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[t.time," (",t.duration,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[t.participants," participant",t.participants>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{children:[t.rating,"/5 (",t.reviews," reviews)"]})]})]}),e.jsx(N,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"What's Included"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.inclusions.map((r,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:r})]},s))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Meeting Point"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.meetingPoint})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Cancellation Policy"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.cancellationPolicy})]}),e.jsx(N,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs(F,{variant:"secondary",children:["Provided by ",t.provider]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[t.price.currency," ",t.price.amount]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total for ",t.participants," participant",t.participants>1?"s":""]})]})]})]})]}),i===2&&e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Participant Details"]})}),e.jsx(j,{className:"space-y-6",children:b.map((r,s)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsxs("h4",{className:"font-semibold",children:["Participant ",s+1]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:`firstName-${s}`,children:"First Name *"}),e.jsx(m,{id:`firstName-${s}`,value:r.firstName,onChange:a=>n(s,"firstName",a.target.value),placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`lastName-${s}`,children:"Last Name *"}),e.jsx(m,{id:`lastName-${s}`,value:r.lastName,onChange:a=>n(s,"lastName",a.target.value),placeholder:"Enter last name"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`email-${s}`,children:"Email *"}),e.jsx(m,{id:`email-${s}`,type:"email",value:r.email,onChange:a=>n(s,"email",a.target.value),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`phone-${s}`,children:"Phone *"}),e.jsx(m,{id:`phone-${s}`,value:r.phone,onChange:a=>n(s,"phone",a.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`dateOfBirth-${s}`,children:"Date of Birth"}),e.jsx(m,{id:`dateOfBirth-${s}`,type:"date",value:r.dateOfBirth,onChange:a=>n(s,"dateOfBirth",a.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`specialRequirements-${s}`,children:"Special Requirements"}),e.jsx(O,{id:`specialRequirements-${s}`,value:r.specialRequirements,onChange:a=>n(s,"specialRequirements",a.target.value),placeholder:"Any dietary requirements, mobility assistance, etc.",rows:3})]})]},s))})]}),i===3&&e.jsxs(x,{children:[e.jsx(f,{children:e.jsx(v,{children:"Complete Booking"})}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Provider Booking"}),e.jsxs("p",{className:"text-blue-800 text-sm",children:["This activity is provided by ",t.provider,". You'll be redirected to their secure booking platform to complete your reservation and payment."]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Booking Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Activity:"}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Date & Time:"}),e.jsxs("span",{children:[$(new Date(t.date),"MMM d, yyyy")," at ",t.time]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Participants:"}),e.jsx("span",{children:t.participants})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Provider:"}),e.jsx("span",{children:t.provider})]}),e.jsx(N,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:[t.price.currency," ",t.price.amount]})]})]})]}),e.jsx(g,{onClick:A,disabled:C,className:"w-full",size:"lg",children:C?"Redirecting...":`Continue to ${t.provider}`})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(g,{variant:"outline",onClick:T,disabled:i===1,children:"Back"}),i<u.length-1&&e.jsx(g,{onClick:R,children:"Next"})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(x,{children:e.jsx(j,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading activity details..."})})})})},Ne=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(I,{}),e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsx(H,{})})]});export{Ne as default};
