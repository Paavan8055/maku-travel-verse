import{r as o,g as q,z as D,j as e,i as p,o as j,k as v,l as g,M as F,d as I,U as k,q as O,w as L,I as m,B as f,N as z}from"./index-BZMa5YK6-1758536202306.js";import{L as d}from"./label-BJES5JmD-1758536202306.js";import{T as U}from"./textarea-Iu5B3Bn9-1758536202306.js";import{S as N}from"./separator-ZhoxXWmS-1758536202306.js";import{C as B}from"./circle-check-big-B2XwWZ78-1758536202306.js";import{C as W}from"./clock-DuCsZkP2-1758536202306.js";import{f as $}from"./format-D_wXqXX1-1758536202306.js";import"./en-US-CC7XSppg-1758536202306.js";const u=["Review","Participants","Payment","Confirmation"],H=()=>{const[i,y]=o.useState(1),[t,E]=o.useState(null),[b,w]=o.useState([]),[C,P]=o.useState(!1),h=q(),{toast:l}=D();o.useEffect(()=>{const a=sessionStorage.getItem("selectedActivity");if(a)try{const s=JSON.parse(a);E(s);const r=s.participants||1;w(Array.from({length:r},()=>({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",specialRequirements:""})))}catch(s){console.error("Error loading activity data:",s),l({title:"Error",description:"Could not load activity details. Please try again.",variant:"destructive"}),h("/search/activities")}else l({title:"No Activity Selected",description:"Please select an activity first.",variant:"destructive"}),h("/search/activities")},[h,l]);const n=(a,s,r)=>{w(x=>x.map((c,M)=>M===a?{...c,[s]:r}:c))},S=()=>b.every(a=>a.firstName&&a.lastName&&a.email&&a.phone),R=()=>{if(i===2&&!S()){l({title:"Incomplete Information",description:"Please fill in all required participant details.",variant:"destructive"});return}i<u.length&&y(i+1)},T=()=>{i>1&&y(i-1)},A=async()=>{if(t){P(!0);try{l({title:"Redirecting to Provider",description:`Redirecting to ${t.provider} to complete your booking.`}),window.open(t.providerUrl,"_blank"),setTimeout(()=>{h("/search/activities")},2e3)}catch(a){console.error("Error processing booking:",a),l({title:"Booking Error",description:"There was an error processing your booking. Please try again.",variant:"destructive"})}finally{P(!1)}}};return t?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:u.map((a,s)=>{const r=s+1,x=r===i,c=r<i;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`
                  flex items-center justify-center w-8 h-8 rounded-full border-2 text-sm font-medium
                  ${x||c?"border-primary bg-primary text-primary-foreground":"border-muted bg-background text-muted-foreground"}
                `,children:c?e.jsx(B,{className:"w-4 h-4"}):r}),e.jsx("span",{className:`ml-2 text-sm ${x?"text-foreground font-medium":"text-muted-foreground"}`,children:a}),s<u.length-1&&e.jsx("div",{className:`ml-4 w-12 h-0.5 ${c?"bg-primary":"bg-muted"}`})]},a)})})}),i===1&&e.jsxs(p,{children:[e.jsx(v,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Activity Details"]})}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:t.name}),e.jsx("p",{className:"text-muted-foreground mt-2",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:$(new Date(t.date),"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[t.time," (",t.duration,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[t.participants," participant",t.participants>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{children:[t.rating,"/5 (",t.reviews," reviews)"]})]})]}),e.jsx(N,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"What's Included"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.inclusions.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:a})]},s))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Meeting Point"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.meetingPoint})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Cancellation Policy"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.cancellationPolicy})]}),e.jsx(N,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs(L,{variant:"secondary",children:["Provided by ",t.provider]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[t.price.currency," ",t.price.amount]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total for ",t.participants," participant",t.participants>1?"s":""]})]})]})]})]}),i===2&&e.jsxs(p,{children:[e.jsx(v,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Participant Details"]})}),e.jsx(j,{className:"space-y-6",children:b.map((a,s)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsxs("h4",{className:"font-semibold",children:["Participant ",s+1]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:`firstName-${s}`,children:"First Name *"}),e.jsx(m,{id:`firstName-${s}`,value:a.firstName,onChange:r=>n(s,"firstName",r.target.value),placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`lastName-${s}`,children:"Last Name *"}),e.jsx(m,{id:`lastName-${s}`,value:a.lastName,onChange:r=>n(s,"lastName",r.target.value),placeholder:"Enter last name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`email-${s}`,children:"Email *"}),e.jsx(m,{id:`email-${s}`,type:"email",value:a.email,onChange:r=>n(s,"email",r.target.value),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`phone-${s}`,children:"Phone *"}),e.jsx(m,{id:`phone-${s}`,value:a.phone,onChange:r=>n(s,"phone",r.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`dateOfBirth-${s}`,children:"Date of Birth"}),e.jsx(m,{id:`dateOfBirth-${s}`,type:"date",value:a.dateOfBirth,onChange:r=>n(s,"dateOfBirth",r.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`specialRequirements-${s}`,children:"Special Requirements"}),e.jsx(U,{id:`specialRequirements-${s}`,value:a.specialRequirements,onChange:r=>n(s,"specialRequirements",r.target.value),placeholder:"Any dietary requirements, mobility assistance, etc.",rows:3})]})]},s))})]}),i===3&&e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(g,{children:"Complete Booking"})}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Provider Booking"}),e.jsxs("p",{className:"text-blue-800 text-sm",children:["This activity is provided by ",t.provider,". You'll be redirected to their secure booking platform to complete your reservation and payment."]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Booking Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Activity:"}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Date & Time:"}),e.jsxs("span",{children:[$(new Date(t.date),"MMM d, yyyy")," at ",t.time]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Participants:"}),e.jsx("span",{children:t.participants})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Provider:"}),e.jsx("span",{children:t.provider})]}),e.jsx(N,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:[t.price.currency," ",t.price.amount]})]})]})]}),e.jsx(f,{onClick:A,disabled:C,className:"w-full",size:"lg",children:C?"Redirecting...":`Continue to ${t.provider}`})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(f,{variant:"outline",onClick:T,disabled:i===1,children:"Back"}),i<u.length-1&&e.jsx(f,{onClick:R,children:"Next"})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(p,{children:e.jsx(j,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading activity details..."})})})})},Z=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(z,{}),e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsx(H,{})})]});export{Z as default};
