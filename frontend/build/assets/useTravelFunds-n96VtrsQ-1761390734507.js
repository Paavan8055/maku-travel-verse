import{r as o,u as p,h as w}from"./index-Ds3Fyqjq-1761390734507.js";import{t as u}from"./travelFundClient-C42faRXF-1761390734507.js";const m=()=>{const[v,d]=o.useState([]),[y,i]=o.useState(!0),[F,l]=o.useState(null),{user:a}=p(),{toast:e}=w(),s=async()=>{if(!a){d([]),i(!1);return}try{i(!0);const{data:t,error:r}=await u.getUserFunds();if(r)throw r;d(t||[]),l(null)}catch(t){console.error("Error fetching travel funds:",t),l(t instanceof Error?t.message:"Failed to fetch travel funds"),e({title:"Error",description:"Failed to load travel funds. Please try again.",variant:"destructive"})}finally{i(!1)}},h=async t=>{if(!a)return null;try{const{data:r,error:n}=await u.createFund(t);if(n)throw n;return e({title:"Success",description:"Travel fund created successfully!",variant:"default"}),s(),r}catch(r){return console.error("Error creating travel fund:",r),e({title:"Error",description:"Failed to create travel fund. Please try again.",variant:"destructive"}),null}},g=async(t,r,n)=>{if(!a)return null;try{const{data:c,error:f}=await u.addFunds(t,r,n);if(f)throw f;return e({title:"Success",description:`$${r} added to fund successfully!`,variant:"default"}),s(),c}catch(c){return console.error("Error adding funds:",c),e({title:"Error",description:"Failed to add funds. Please try again.",variant:"destructive"}),null}},E=async t=>{if(!a)return null;try{const{data:r,error:n}=await u.joinFundByCode(t);if(n)throw n;return e({title:"Success",description:"Successfully joined the travel fund!",variant:"default"}),s(),r}catch(r){return console.error("Error joining fund:",r),e({title:"Error",description:r instanceof Error?r.message:"Failed to join fund. Please try again.",variant:"destructive"}),null}};return o.useEffect(()=>{s()},[a]),{funds:v,loading:y,error:F,createFund:h,addFunds:g,joinFundByCode:E,refetch:s}};export{m as u};
