import{c as le,j as e,a as n,e as d,f as L,g as M,b as j,P as z,B as N,r as u,t as w,h as fe,i as Oe,l as ue,R as Ve}from"./index-BienadRX-1758298210899.js";import{I as Ye}from"./input-D_CWKZY2-1758298210899.js";import{T as pe,a as ge,b as C,c as A}from"./tabs-BBw4EJLg-1758298210899.js";import{S as De,a as Le,b as Me,c as Te,d as Ie}from"./select-D-m7PsEk-1758298210899.js";import{B as ae}from"./brain-CAxENeM5-1758298210899.js";import{S as ve}from"./sparkles-F-voDM4u-1758298210899.js";import{M as J}from"./map-pin-Dv6zIfjG-1758298210899.js";import{T as K}from"./trending-up-Td6C6R26-1758298210899.js";import{T as I}from"./trophy-CUZcH6-m-1758298210899.js";import{C as be}from"./calendar-BpLG9Nq--1758298210899.js";import{U as T}from"./users-Cg96Tcn--1758298210899.js";import{T as $}from"./target-BsoISPy1-1758298210899.js";import{u as $e}from"./useEnhancedDreams-CXDI8pkW-1758298210899.js";import{H as Ue}from"./heart-NFEPT6jJ-1758298210899.js";import{S as Z}from"./star-C-f_KBLp-1758298210899.js";import{D as He}from"./dollar-sign-XPMHbG_Z-1758298210899.js";import{E as qe}from"./eye-CPjn6USZ-1758298210899.js";import{S as Ne}from"./share-2-DIlO0-J2-1758298210899.js";import{gamificationService as D}from"./gamification-service-7KIsqfx4-1758298210899.js";import{G as ze}from"./globe-Ch71C_D8-1758298210899.js";import{A as X}from"./award-DBjAKDmq-1758298210899.js";import{L as Je}from"./lock-BDXdVJ4e-1758298210899.js";import{C as ie}from"./crown-Cm1MODfa-1758298210899.js";import{A as we,a as ye,b as _e}from"./avatar-sB361-Hf-1758298210899.js";import{T as Ze}from"./trending-down-BMdcLZde-1758298210899.js";import{M as Ke}from"./minus-C_nRv9vb-1758298210899.js";import{M as Qe}from"./message-circle-DO_4l5sZ-1758298210899.js";import{U as We}from"./user-plus-D3mHZ-vr-1758298210899.js";import{Z as Xe}from"./zap-Dwd2GpDG-1758298210899.js";import{C as je}from"./clock-DO1JDMOO-1758298210899.js";import{C as Re}from"./circle-check-big-BWRs1JvC-1758298210899.js";import{T as es,I as ss,P as ts,J as as}from"./JourneyOptimizerCard-Ci54ZdtX-1758298210899.js";import{u as rs}from"./useAIIntelligence-CVFdMjEY-1758298210899.js";import{L as ls}from"./lightbulb-D2mkrdL8-1758298210899.js";import{S as is}from"./search-BoRXgKtz-1758298210899.js";import{G as cs}from"./grid-3x3-1C4Qr5yk-1758298210899.js";import{L as ns}from"./list-DTKr2eIE-1758298210899.js";import"./index-BdQq_4o_-1758298210899.js";import"./index-CW9EEh3p-1758298210899.js";import"./chevron-down-DAyp9beB-1758298210899.js";import"./index-CUnpDtYn-1758298210899.js";import"./user-CUOIv2zN-1758298210899.js";import"./activity-DPtdwIj4-1758298210899.js";import"./external-link-BFjvsIvB-1758298210899.js";import"./arrow-right-DHJjZRIQ-1758298210899.js";import"./plus-qrtS_Qmy-1758298210899.js";import"./plane-BdpiVM5F-1758298210899.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=le("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=le("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=le("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=le("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),ms=({profile:s,insights:r,loading:t=!1})=>{if(t)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((m,x)=>e.jsx(n,{className:"animate-pulse",children:e.jsxs(d,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-8 bg-muted rounded w-full"})]})},x))});if(!s)return e.jsx(n,{className:"col-span-full",children:e.jsxs(d,{className:"p-6 text-center",children:[e.jsx(ae,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Start exploring destinations to unlock your travel insights!"})]})});const c=r==null?void 0:r.travel_dna,o=s.gamification_metrics;return e.jsxs("div",{className:"space-y-6",children:[c&&e.jsxs(n,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent/5",children:[e.jsx(L,{className:"pb-3",children:e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ve,{className:"h-5 w-5 text-primary"}),"Your Travel DNA"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg capitalize",children:c.primary_type.replace("_"," ")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Confidence: ",Math.round(c.confidence_score*100),"%"]})]}),e.jsx(j,{variant:"secondary",className:"bg-primary/10 text-primary",children:"DNA Match"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Personality Factors:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.personality_factors.slice(0,4).map((m,x)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"capitalize",children:m.factor}),e.jsxs("span",{children:[Math.round(m.weight*100),"%"]})]}),e.jsx(z,{value:m.weight*100,className:"h-2"})]},x))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dream Destinations"}),e.jsx("p",{className:"text-2xl font-bold",children:o.destinations_collected})]}),e.jsx(J,{className:"h-8 w-8 text-primary"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx(z,{value:Math.min(o.destinations_collected/100*100,100),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[100-o.destinations_collected," until collection limit"]})]})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Level"}),e.jsxs("p",{className:"text-2xl font-bold",children:["Level ",o.level]})]}),e.jsx(K,{className:"h-8 w-8 text-accent"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.total_points.toLocaleString()," total points"]}),e.jsx(z,{value:o.level%1*100,className:"h-2 mt-1"})]})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Achievements"}),e.jsx("p",{className:"text-2xl font-bold",children:o.achievements_unlocked})]}),e.jsx(I,{className:"h-8 w-8 text-yellow-500"})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Continents unlocked: ",o.continents_unlocked,"/7"]})})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dream Streak"}),e.jsx("p",{className:"text-2xl font-bold",children:o.streak_days})]}),e.jsx(be,{className:"h-8 w-8 text-orange-500"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:o.streak_days>0?"Keep it up!":"Start your streak today!"})})]})})]}),(r==null?void 0:r.next_recommended_destinations)&&r.next_recommended_destinations.length>0&&e.jsxs(n,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-primary"}),"AI Recommendations"]})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-3",children:r.next_recommended_destinations.slice(0,3).map((m,x)=>{var l;return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:m.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.country})]}),e.jsxs(j,{variant:"outline",children:[Math.round((((l=m.personality_match_factors[0])==null?void 0:l.weight)||0)*100),"% match"]})]},m.id)})}),e.jsx(N,{variant:"outline",className:"w-full mt-4",children:"View All Recommendations"})]})]}),(r==null?void 0:r.social_insights)&&r.social_insights.friends_overlap.length>0&&e.jsxs(n,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-accent"}),"Social Insights"]})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-3",children:r.social_insights.friends_overlap.slice(0,2).map((m,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Friend #",x+1]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.shared_destinations," shared dreams"]})]}),e.jsxs(j,{variant:"outline",children:[Math.round(m.travel_compatibility_score*100),"% compatible"]})]},m.friend_id))}),e.jsx(N,{variant:"outline",className:"w-full mt-4",children:"Explore Social Features"})]})]}),e.jsx(n,{className:"border-muted",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Learning Progress"})]}),e.jsxs(j,{variant:"outline",className:"text-xs",children:[Math.round(s.data_quality_score*100),"% Complete"]})]}),e.jsx(z,{value:s.data_quality_score*100,className:"h-2 mt-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep exploring to improve your personalized recommendations!"})]})})]})},xs=({destinations:s,loading:r=!1,onDestinationClick:t,showAIInsights:c=!0,viewMode:o="grid"})=>{const{updateDreamCollection:m,viewDestination:x,userProfile:l}=$e(),[i,y]=u.useState({}),[p,S]=u.useState(new Set),b=a=>{const _=Date.now();y(k=>({...k,[a.id]:_})),t&&t(a)},U=a=>{const _=i[a.id];if(_){const k=(Date.now()-_)/1e3;x(a,k),y(B=>{const P={...B};return delete P[a.id],P})}},R=async(a,_)=>{_.stopPropagation();const k=p.has(a.id),B=k?"remove":"add";(await m(a.id,B)).success&&S(F=>{const G=new Set(F);return k?G.delete(a.id):G.add(a.id),G})},O=a=>a>=90?"text-purple-600 bg-purple-50 border-purple-200":a>=70?"text-blue-600 bg-blue-50 border-blue-200":a>=50?"text-green-600 bg-green-50 border-green-200":"text-gray-600 bg-gray-50 border-gray-200",V=a=>a>=90?"Legendary":a>=70?"Epic":a>=50?"Rare":"Common";return r?e.jsx("div",{className:w(o==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"),children:Array.from({length:6}).map((a,_)=>e.jsx(n,{className:"animate-pulse",children:e.jsxs(d,{className:"p-0",children:[e.jsx("div",{className:"h-48 bg-muted rounded-t-lg"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-16"}),e.jsx("div",{className:"h-6 bg-muted rounded w-20"})]})]})]})},_))}):s.length===0?e.jsx(n,{className:"col-span-full",children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No destinations found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your filters or search criteria to discover amazing destinations!"})]})}):e.jsx("div",{className:w(o==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"),children:s.map(a=>{var _;return e.jsx(n,{className:"group cursor-pointer hover:shadow-lg transition-all duration-300 border-border/50 hover:border-border",onClick:()=>b(a),onMouseLeave:()=>U(a),children:e.jsxs(d,{className:"p-0",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-primary/20 to-accent/20 rounded-t-lg overflow-hidden",children:[e.jsx("img",{src:`/api/placeholder/400/200?text=${encodeURIComponent(a.name)}`,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:k=>{k.currentTarget.style.display="none"}}),c&&e.jsxs(j,{className:w("absolute top-3 left-3 border",O(a.rarity_score)),children:[e.jsx(ve,{className:"h-3 w-3 mr-1"}),V(a.rarity_score)]}),e.jsx(N,{variant:"secondary",size:"sm",className:"absolute top-3 right-3 h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:k=>R(a,k),children:e.jsx(Ue,{className:w("h-4 w-4",p.has(a.id)?"fill-red-500 text-red-500":"text-muted-foreground")})}),c&&(l==null?void 0:l.travel_personality)&&e.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:e.jsx("div",{className:"bg-black/70 backdrop-blur-sm rounded-lg p-2 text-white text-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),"AI Match: ",Math.round((((_=a.personality_match_factors[0])==null?void 0:_.weight)||0)*100),"%"]}),a.optimal_seasons.length>0&&e.jsxs("span",{className:"text-xs opacity-80",children:["Best: ",a.optimal_seasons[0].season]})]})})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:a.name}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-primary",children:[e.jsx(Z,{className:"h-3 w-3 fill-current"}),a.community_rating.overall_score.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:a.country}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"capitalize",children:a.category})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.description}),a.highlights&&a.highlights.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.highlights.slice(0,3).map((k,B)=>e.jsx(j,{variant:"secondary",className:"text-xs px-2 py-0",children:k},B)),a.highlights.length>3&&e.jsxs(j,{variant:"outline",className:"text-xs px-2 py-0",children:["+",a.highlights.length-3," more"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.avg_daily_cost&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"h-3 w-3"}),e.jsxs("span",{children:["$",a.avg_daily_cost,"/day"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),e.jsx("span",{children:a.social_popularity||0})]}),c&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:"h-3 w-3"}),e.jsx("span",{children:Math.round(a.engagement_score*100)})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(Ne,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(ds,{className:"h-3 w-3"})})]})]}),c&&a.price_volatility.length>0&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"ðŸ’¡ Best booking window:"}),e.jsxs("span",{className:"font-medium",children:[a.price_volatility[0].booking_window_optimal," days ahead"]})]})})]})]})},a.id)})})},hs=()=>{const{user:s}=fe(),{toast:r}=Oe(),[t,c]=u.useState(null),[o,m]=u.useState([]),[x,l]=u.useState([]),[i,y]=u.useState([]),[p,S]=u.useState([]),[b,U]=u.useState([]),[R,O]=u.useState(null),[V,a]=u.useState(null),[_,k]=u.useState(!0),[B,P]=u.useState(null),F=u.useCallback(async()=>{if(s!=null&&s.id)try{k(!0),P(null);const[h,f,v,E,H,he,te,q]=await Promise.all([D.getUserGameStats(s.id),D.getUserAchievements(s.id),D.getLeaderboards(["global","weekly","friends"]),D.getSocialConnections(s.id),D.getSocialActivityFeed(s.id,20),D.getChallenges(s.id),D.getDreamCollectionStats(s.id),D.getSocialInsights(s.id)]);c(h),m(f),l(v),y(E),S(H),U(he),O(te),a(q)}catch(h){const f=h instanceof Error?h.message:"Failed to fetch gamification data";P(f),ue.error("Error fetching gamification data:",h)}finally{k(!1)}},[s==null?void 0:s.id]),G=u.useCallback(async(h,f)=>{if(!(s!=null&&s.id))return null;try{const v=await D.checkAchievements(s.id,h,f);if(v.newly_unlocked.length>0){v.newly_unlocked.forEach(H=>{r({title:"ðŸ† Achievement Unlocked!",description:`${H.name}: ${H.description}`,duration:5e3})});const E=await D.getUserAchievements(s.id);m(E)}if(v.points_earned>0&&r({title:"âœ¨ Points Earned!",description:`You earned ${v.points_earned} points!`,duration:3e3}),v.level_up){r({title:"ðŸŽ‰ Level Up!",description:`Welcome to Level ${v.level_up.new_level}!`,duration:6e3});const E=await D.getUserGameStats(s.id);c(E)}return v}catch(v){return ue.error("Error checking achievements:",v),null}},[s==null?void 0:s.id,r]),Y=u.useCallback(async h=>{if(!(s!=null&&s.id))return r({title:"Authentication Required",description:"Please log in to join challenges.",variant:"destructive"}),!1;try{const f=await D.joinChallenge(s.id,h);if(f.success){r({title:"Challenge Joined!",description:f.message});const v=await D.getChallenges(s.id);return U(v),await D.trackGameEvent(s.id,{event_type:"challenge_joined",event_data:{challenge_id:h},timestamp:new Date,user_context:{current_level:(t==null?void 0:t.level)||1,current_points:(t==null?void 0:t.total_points)||0,active_challenges:b.filter(E=>E.is_participating).map(E=>E.id)}}),!0}else return r({title:"Failed to Join Challenge",description:f.message,variant:"destructive"}),!1}catch{return r({title:"Error",description:"Failed to join challenge. Please try again.",variant:"destructive"}),!1}},[s==null?void 0:s.id,t,b,r]),ee=u.useCallback(async(h,f)=>{if(s!=null&&s.id)try{await D.trackGameEvent(s.id,{event_type:h,event_data:f,timestamp:new Date,user_context:{current_level:(t==null?void 0:t.level)||1,current_points:(t==null?void 0:t.total_points)||0,active_challenges:b.filter(v=>v.is_participating).map(v=>v.id)}})}catch(v){ue.error("Error tracking game event:",v)}},[s==null?void 0:s.id,t,b]),ce=u.useCallback(()=>{if(!t)return{current:0,next:0,progress:0};const h=(t.level-1)*1e3,f=t.level*1e3,v=(t.total_points-h)/(f-h)*100;return{current:h,next:f,progress:Math.min(Math.max(v,0),100)}},[t]),se=u.useCallback(h=>h?o.filter(f=>f.category===h):o,[o]),ne=u.useCallback(()=>o.filter(h=>h.unlocked),[o]),de=u.useCallback(()=>o.filter(h=>!h.unlocked),[o]),oe=u.useCallback(()=>{const h=new Date(Date.now()-6048e5);return o.filter(f=>f.unlocked&&f.unlocked_at&&new Date(f.unlocked_at)>h)},[o]),me=u.useCallback(()=>b.filter(h=>h.status==="active"&&h.is_participating),[b]),xe=u.useCallback(()=>b.filter(h=>h.status==="active"&&!h.is_participating),[b]);return u.useEffect(()=>{s!=null&&s.id&&F()},[s==null?void 0:s.id,F]),u.useEffect(()=>{if(!(s!=null&&s.id))return;const h=setInterval(()=>{F()},5*60*1e3);return()=>clearInterval(h)},[s==null?void 0:s.id,F]),{userStats:t,achievements:o,leaderboards:x,socialConnections:i,socialActivity:p,challenges:b,collectionStats:R,socialInsights:V,loading:_,error:B,checkAchievements:G,joinChallenge:Y,trackGameEvent:ee,refetch:F,levelProgress:ce(),unlockedAchievements:ne(),availableAchievements:de(),recentAchievements:oe(),activeChallenges:me(),availableChallenges:xe(),getAchievementsByCategory:se}},us=({stats:s,levelProgress:r,compact:t=!1})=>{const c=x=>x>=30?"text-purple-600 bg-purple-50 border-purple-200":x>=14?"text-blue-600 bg-blue-50 border-blue-200":x>=7?"text-green-600 bg-green-50 border-green-200":x>=3?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-gray-600 bg-gray-50 border-gray-200",m=(x=>x<=10?{icon:"ðŸ‘‘",text:"Elite",color:"bg-gradient-to-r from-yellow-400 to-orange-500"}:x<=100?{icon:"ðŸ†",text:"Expert",color:"bg-gradient-to-r from-blue-400 to-purple-500"}:x<=1e3?{icon:"â­",text:"Rising",color:"bg-gradient-to-r from-green-400 to-blue-500"}:{icon:"ðŸŽ¯",text:"Explorer",color:"bg-gradient-to-r from-gray-400 to-gray-500"})(s.exploration_rank);return t?e.jsx(n,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent/5",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:w("flex items-center justify-center w-8 h-8 rounded-full text-white text-sm font-bold",m.color),children:s.level}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:["Level ",s.level]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.total_points.toLocaleString()," points"]})]})]}),e.jsxs(j,{className:w("border",c(s.current_streak)),children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),s.current_streak]})]}),e.jsx(z,{value:r.progress,className:"h-2 mb-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[Math.round(r.progress),"% to Level ",s.level+1]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-accent/5",children:[e.jsx(L,{className:"pb-3",children:e.jsxs(M,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:w("flex items-center justify-center w-12 h-12 rounded-full text-white text-lg font-bold",m.color),children:s.level}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold",children:["Level ",s.level]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.text," Explorer"]})]})]}),e.jsxs(j,{variant:"outline",className:"bg-background/50",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"#",s.exploration_rank.toLocaleString()]})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:s.total_points.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Points"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Level Progress"}),e.jsxs("span",{children:[Math.round(r.progress),"%"]})]}),e.jsx(z,{value:r.progress,className:"h-3"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-center",children:[(r.next-s.total_points).toLocaleString()," points to Level ",s.level+1]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(J,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:s.destinations_collected}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Dreams"}),e.jsx(z,{value:Math.min(s.destinations_collected/100*100,100),className:"h-1 mt-2"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(ze,{className:"h-6 w-6 mx-auto mb-2 text-accent"}),e.jsx("div",{className:"text-2xl font-bold",children:s.continents_unlocked}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Continents"}),e.jsx(z,{value:s.continents_unlocked/7*100,className:"h-1 mt-2"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(X,{className:"h-6 w-6 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-2xl font-bold",children:s.achievements_unlocked}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Achievements"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(re,{className:"h-6 w-6 mx-auto mb-2 text-orange-500"}),e.jsx("div",{className:"text-2xl font-bold",children:s.current_streak}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"}),s.current_streak>0&&e.jsx(j,{className:w("mt-1 text-xs",c(s.current_streak)),children:"ðŸ”¥ On Fire!"})]})})]}),e.jsxs(n,{children:[e.jsx(L,{children:e.jsxs(M,{className:"text-lg flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Category Progress"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(s.category_stats).map(([x,l])=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"capitalize font-medium",children:[x," (",l.count,")"]}),e.jsxs("span",{className:"text-muted-foreground",children:[l.completion_percentage,"% complete"]})]}),e.jsx(z,{value:l.completion_percentage,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Avg rarity: ",l.average_rarity,"/100"]})]},x))})})]}),e.jsxs(n,{children:[e.jsx(L,{children:e.jsxs(M,{className:"text-lg flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5"}),"Continental Explorer"]})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(s.continent_progress).map(([x,l])=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium",children:x}),e.jsxs(j,{variant:"outline",className:"text-xs",children:[l.destinations_count," places"]})]}),e.jsx(z,{value:l.completion_percentage,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.completion_percentage,"% explored",l.rare_destinations_count>0&&e.jsxs("span",{className:"ml-2",children:["âœ¨ ",l.rare_destinations_count," rare"]})]})]},x))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Rarity Score"})]}),e.jsx("div",{className:"text-xl font-bold text-purple-600",children:s.rarity_score})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Based on rare destinations collected"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Social Score"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s.social_score})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Friends and social interactions"})]})})]}),e.jsx(n,{className:"border-muted bg-muted/30",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(be,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Longest Streak"}),e.jsxs("div",{className:"text-lg font-bold text-orange-500",children:[s.longest_streak," days"]})]}),e.jsxs("div",{children:[e.jsx(K,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Last Activity"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.last_activity).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(I,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Global Rank"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:["#",s.exploration_rank.toLocaleString()]})]})]})})})]})},js=({achievement:s,onClick:r,size:t="md",showProgress:c=!0})=>{const o=i=>{switch(i){case"legendary":return"from-purple-500 to-pink-500 text-white border-purple-300";case"epic":return"from-blue-500 to-cyan-500 text-white border-blue-300";case"rare":return"from-green-500 to-emerald-500 text-white border-green-300";case"common":return"from-gray-400 to-gray-500 text-white border-gray-300";default:return"from-gray-400 to-gray-500 text-white border-gray-300"}},m=i=>{switch(i){case"legendary":return e.jsx(ie,{className:"h-4 w-4"});case"epic":return e.jsx(os,{className:"h-4 w-4"});case"rare":return e.jsx(Z,{className:"h-4 w-4"});case"common":return e.jsx(I,{className:"h-4 w-4"});default:return e.jsx(I,{className:"h-4 w-4"})}},x=()=>{switch(t){case"sm":return"p-3";case"lg":return"p-6";default:return"p-4"}},l=()=>{switch(t){case"sm":return"text-sm";case"lg":return"text-lg";default:return"text-base"}};return e.jsx(n,{className:w("group cursor-pointer transition-all duration-300 hover:shadow-lg",s.unlocked?"border-primary/30 bg-gradient-to-br from-primary/5 to-accent/5":"border-muted bg-muted/30 opacity-75",r&&"hover:scale-105"),onClick:r,children:e.jsx(d,{className:x(),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:w("flex items-center justify-center rounded-lg w-12 h-12 bg-gradient-to-br shrink-0",o(s.rarity)),children:e.jsx("span",{className:"text-2xl",role:"img","aria-label":s.name,children:s.icon})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:w("font-semibold truncate",l()),children:s.name}),!s.unlocked&&e.jsx(Je,{className:"h-3 w-3 text-muted-foreground shrink-0"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description}),c&&s.max_progress>1&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"/",s.max_progress]})]}),e.jsx(z,{value:s.progress/s.max_progress*100,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",className:w("text-xs bg-gradient-to-r border",o(s.rarity)),children:[m(s.rarity),e.jsx("span",{className:"ml-1 capitalize",children:s.rarity})]}),e.jsx(j,{variant:"secondary",className:"text-xs capitalize",children:s.category})]}),e.jsxs("div",{className:"text-xs font-medium text-primary",children:[s.points_value," pts"]})]}),s.unlocked&&s.unlocked_at&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Unlocked ",new Date(s.unlocked_at).toLocaleDateString()]})]})]})})})},W=({achievements:s,onAchievementClick:r,maxDisplayed:t})=>{const c=t?s.slice(0,t):s;return s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(I,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No achievements to display"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map(o=>e.jsx(js,{achievement:o,onClick:()=>r==null?void 0:r(o)},o.id)),t&&s.length>t&&e.jsx(n,{className:"border-dashed border-2 border-muted-foreground/20",children:e.jsx(d,{className:"p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsxs("div",{className:"text-2xl mb-2",children:["+",s.length-t]}),e.jsx("div",{className:"text-sm",children:"More achievements"})]})})})]})},ps=({leaderboard:s,onViewAll:r,maxEntries:t=5})=>{const c=l=>{switch(l){case 1:return e.jsx(ie,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(Be,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(X,{className:"h-5 w-5 text-amber-600"});default:return e.jsxs("span",{className:"text-sm font-bold text-muted-foreground",children:["#",l]})}},o=l=>l>0?e.jsx(K,{className:"h-3 w-3 text-green-500"}):l<0?e.jsx(Ze,{className:"h-3 w-3 text-red-500"}):e.jsx(Ke,{className:"h-3 w-3 text-muted-foreground"}),m=l=>l>0?"text-green-600":l<0?"text-red-600":"text-muted-foreground",x=s.entries.slice(0,t);return e.jsxs(n,{children:[e.jsxs(L,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(I,{className:"h-5 w-5 text-primary"}),s.name]}),e.jsxs(j,{variant:"outline",className:"text-xs",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),s.total_participants.toLocaleString()]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs(d,{className:"space-y-3",children:[x.map((l,i)=>e.jsxs("div",{className:w("flex items-center justify-between p-3 rounded-lg border transition-colors",l.rank<=3?"bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20":"bg-muted/30 border-muted"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:c(l.rank)}),e.jsxs(we,{className:"h-8 w-8",children:[e.jsx(ye,{src:l.avatar_url,alt:l.username}),e.jsx(_e,{className:"text-xs",children:l.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:l.username}),l.specialization&&e.jsx(j,{variant:"secondary",className:"text-xs px-1 py-0",children:l.specialization})]}),l.badges&&l.badges.length>0&&e.jsxs("div",{className:"flex gap-1 mt-1",children:[l.badges.slice(0,3).map((y,p)=>e.jsx("span",{className:"text-xs",role:"img",children:y},p)),l.badges.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",l.badges.length-3]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-primary",children:l.score.toLocaleString()}),l.change_from_last_week!==0&&e.jsxs("div",{className:w("flex items-center gap-1 text-xs",m(l.change_from_last_week)),children:[o(l.change_from_last_week),e.jsx("span",{children:Math.abs(l.change_from_last_week)})]})]})]},l.user_id)),s.user_rank&&s.user_rank>t&&e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Your rank:"}),e.jsxs(j,{variant:"outline",children:["#",s.user_rank.toLocaleString()]})]})}),s.entries.length>t&&r&&e.jsx(N,{variant:"outline",className:"w-full mt-3",onClick:r,children:"View Full Leaderboard"}),e.jsx("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Updated ",new Date(s.updated_at).toLocaleDateString()]}),s.ends_at&&e.jsxs("span",{children:["Ends ",new Date(s.ends_at).toLocaleDateString()]})]})})]})]})},Ee=({entries:s,title:r="Top Players"})=>e.jsxs(n,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(M,{className:"text-base",children:r})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:s.slice(0,3).map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:gs(t.rank)}),e.jsx("span",{className:"text-sm font-medium truncate",children:t.username})]}),e.jsx("div",{className:"text-sm font-bold text-primary",children:t.score.toLocaleString()})]},t.user_id))})})]}),gs=s=>{switch(s){case 1:return e.jsx(ie,{className:"h-4 w-4 text-yellow-500"});case 2:return e.jsx(Be,{className:"h-4 w-4 text-gray-400"});case 3:return e.jsx(X,{className:"h-4 w-4 text-amber-600"});default:return e.jsxs("span",{className:"text-xs font-bold text-muted-foreground",children:["#",s]})}},Ns=({activities:s,onLike:r,onComment:t,onShare:c,loading:o=!1})=>{const m=i=>{switch(i){case"destination_added":return e.jsx(J,{className:"h-4 w-4 text-blue-500"});case"achievement_unlocked":return e.jsx(I,{className:"h-4 w-4 text-yellow-500"});case"level_up":return e.jsx(K,{className:"h-4 w-4 text-green-500"});case"friend_added":return e.jsx(We,{className:"h-4 w-4 text-purple-500"});case"challenge_completed":return e.jsx($,{className:"h-4 w-4 text-orange-500"});case"trip_planned":return e.jsx(Ne,{className:"h-4 w-4 text-pink-500"});default:return e.jsx(T,{className:"h-4 w-4 text-gray-500"})}},x=i=>{const{activity_type:y,activity_data:p}=i;switch(y){case"destination_added":return`added ${p.destination_name} to their dream destinations`;case"achievement_unlocked":return`unlocked the "${p.achievement_name}" achievement`;case"level_up":return`reached Level ${p.level}`;case"friend_added":return`became travel buddies with ${p.friend_name}`;case"challenge_completed":return`completed the "${p.challenge_name}" challenge`;case"trip_planned":return`planned a trip to ${p.destination_name}`;default:return"had some travel activity"}},l=i=>{const p=Math.floor((new Date().getTime()-new Date(i).getTime())/1e3);return p<60?"just now":p<3600?`${Math.floor(p/60)}m ago`:p<86400?`${Math.floor(p/3600)}h ago`:p<604800?`${Math.floor(p/86400)}d ago`:new Date(i).toLocaleDateString()};return o?e.jsxs(n,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((i,y)=>e.jsxs("div",{className:"flex gap-3 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},y))})})]}):s.length===0?e.jsxs(n,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsx(d,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Activity Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with friends to see their travel activities here!"})]})})]}):e.jsxs(n,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-4",children:s.map(i=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(we,{className:"h-10 w-10",children:[e.jsx(ye,{src:i.avatar_url,alt:i.username}),e.jsx(_e,{children:i.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:"mt-1",children:m(i.activity_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:i.username})," ",e.jsx("span",{className:"text-muted-foreground",children:x(i)})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l(i.created_at)})]}),i.visibility!=="public"&&e.jsx(j,{variant:"outline",className:"text-xs",children:i.visibility})]}),i.activity_type==="destination_added"&&i.activity_data.destination_name&&e.jsx("div",{className:"ml-6 p-2 bg-muted/30 rounded-lg mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:i.activity_data.destination_name})]})}),i.activity_type==="achievement_unlocked"&&e.jsx("div",{className:"ml-6 p-2 bg-yellow-50 border border-yellow-200 rounded-lg mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-3 w-3 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:i.activity_data.achievement_name})]})}),e.jsxs("div",{className:"flex items-center gap-4 ml-6 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(N,{variant:"ghost",size:"sm",className:w("h-6 px-2 text-xs",i.is_liked_by_user?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-red-500"),onClick:()=>r==null?void 0:r(i.id),children:[e.jsx(Ue,{className:w("h-3 w-3 mr1",i.is_liked_by_user&&"fill-current")}),i.likes_count>0&&i.likes_count]}),e.jsxs(N,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-blue-500",onClick:()=>t==null?void 0:t(i.id),children:[e.jsx(Qe,{className:"h-3 w-3 mr-1"}),i.comments_count>0&&i.comments_count]}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-green-500",onClick:()=>c==null?void 0:c(i.id),children:e.jsx(Ne,{className:"h-3 w-3"})})]})]})]}),s.indexOf(i)<s.length-1&&e.jsx("div",{className:"border-t border-muted mt-4"})]},i.id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(N,{variant:"outline",size:"sm",children:"Load More Activities"})})]})]})},fs=({activities:s,maxItems:r=3})=>{const t=s.slice(0,r);return t.length===0?e.jsx(n,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(T,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]})}):e.jsxs(n,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs(M,{className:"text-base flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Recent Activity"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:t.map(c=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(we,{className:"h-6 w-6",children:[e.jsx(ye,{src:c.avatar_url,alt:c.username}),e.jsx(_e,{className:"text-xs",children:c.username.slice(0,1).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[e.jsx("span",{className:"font-medium text-foreground",children:c.username})," ",vs(c)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:bs(c.created_at)})]})]},c.id))})})]})},vs=s=>{const{activity_type:r,activity_data:t}=s;switch(r){case"destination_added":return`added ${t.destination_name}`;case"achievement_unlocked":return`unlocked "${t.achievement_name}"`;case"level_up":return`reached Level ${t.level}`;case"friend_added":return`added ${t.friend_name}`;case"challenge_completed":return`completed "${t.challenge_name}"`;case"trip_planned":return`planned trip to ${t.destination_name}`;default:return"had some activity"}},bs=s=>{const t=Math.floor((new Date().getTime()-new Date(s).getTime())/1e3);return t<60?"now":t<3600?`${Math.floor(t/60)}m`:t<86400?`${Math.floor(t/3600)}h`:`${Math.floor(t/86400)}d`},Pe=({challenge:s,onJoin:r,onViewDetails:t,loading:c=!1})=>{const o=i=>{switch(i){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-orange-100 text-orange-800 border-orange-200";case"expert":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=i=>{switch(i){case"active":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";case"expired":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=()=>{const i=new Date,p=new Date(s.ends_at).getTime()-i.getTime();if(p<=0)return"Expired";const S=Math.floor(p/(1e3*60*60*24)),b=Math.floor(p%(1e3*60*60*24)/(1e3*60*60));return S>0?`${S}d ${b}h left`:b>0?`${b}h left`:"Ending soon"},l=s.target_value>0?Math.min(s.current_progress/s.target_value*100,100):0;return e.jsxs(n,{className:w("group cursor-pointer transition-all duration-300 hover:shadow-lg",s.is_participating&&"border-primary/30 bg-gradient-to-br from-primary/5 to-accent/5"),children:[e.jsxs(L,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(M,{className:"text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-gradient-to-br from-primary to-accent text-white shrink-0",children:e.jsx($,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(j,{className:w("border",m(s.status)),children:[s.status==="active"&&e.jsx(Xe,{className:"h-3 w-3 mr-1"}),s.status==="upcoming"&&e.jsx(je,{className:"h-3 w-3 mr-1"}),s.status==="completed"&&e.jsx(Re,{className:"h-3 w-3 mr-1"}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]}),e.jsxs(j,{variant:"outline",className:o(s.difficulty),children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1)]}),e.jsxs(j,{variant:"outline",children:[s.type==="individual"&&"ðŸ‘¤",s.type==="group"&&"ðŸ‘¥",s.type==="community"&&"ðŸŒ",e.jsx("span",{className:"ml-1 capitalize",children:s.type})]})]})]}),e.jsxs(d,{className:"space-y-4",children:[s.is_participating&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Your Progress"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.current_progress,"/",s.target_value]})]}),e.jsx(z,{value:l,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[l.toFixed(0),"% Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Reward:"}),e.jsxs("span",{className:"font-medium",children:[s.points_reward," pts"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Participants:"}),e.jsx("span",{className:"font-medium",children:s.participants_count.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[s.duration_days," days"]})]}),s.status==="active"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"font-medium text-orange-600",children:x()})]})]}),s.badge_reward&&e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(X,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Special Badge:"}),e.jsx("span",{className:"font-medium",children:s.badge_reward})]})}),s.special_unlock&&e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Z,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Unlocks:"}),e.jsx("span",{className:"font-medium text-purple-700",children:s.special_unlock})]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[!s.is_participating&&s.status==="active"&&e.jsx(N,{onClick:()=>r==null?void 0:r(s.id),disabled:c,className:"flex-1",children:c?"Joining...":"Join Challenge"}),s.is_participating&&s.status==="active"&&e.jsxs(j,{variant:"default",className:"flex-1 justify-center py-2",children:[e.jsx(Re,{className:"h-3 w-3 mr-1"}),"Participating"]}),s.status==="upcoming"&&e.jsxs(N,{variant:"outline",className:"flex-1",disabled:!0,children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Starts ",new Date(s.starts_at).toLocaleDateString()]}),s.status==="completed"&&e.jsxs(j,{variant:"secondary",className:"flex-1 justify-center py-2",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"Completed"]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>t==null?void 0:t(s),children:"Details"})]}),s.leaderboard&&s.leaderboard.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-yellow-500"}),"Top Participants"]}),e.jsx("div",{className:"space-y-1",children:s.leaderboard.slice(0,3).map((i,y)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:["#",i.rank]}),e.jsx("span",{children:i.username})]}),e.jsx("span",{className:"font-medium text-primary",children:i.score.toLocaleString()})]},i.user_id))})]})]})]})},ws=({challenge:s,onJoin:r})=>{const t=s.target_value>0?Math.min(s.current_progress/s.target_value*100,100):0;return e.jsx(n,{className:"border-primary/20",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]}),e.jsx(j,{className:w("text-xs",ys(s.status)),children:s.status})]}),s.is_participating&&e.jsxs("div",{className:"mb-3",children:[e.jsx(z,{value:t,className:"h-1 mb-1"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.current_progress,"/",s.target_value]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.points_reward," pts"]}),!s.is_participating&&s.status==="active"&&e.jsx(N,{size:"sm",variant:"outline",onClick:()=>r==null?void 0:r(s.id),children:"Join"})]})]})})},ys=s=>{switch(s){case"active":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";case"expired":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_s=()=>{const{user:s}=fe(),[r,t]=u.useState("overview"),{userStats:c,achievements:o,leaderboards:m,socialActivity:x,challenges:l,loading:i,error:y,levelProgress:p,unlockedAchievements:S,availableAchievements:b,recentAchievements:U,activeChallenges:R,availableChallenges:O,joinChallenge:V}=hs();return s?i?e.jsx("div",{className:"space-y-6",children:Array.from({length:3}).map((a,_)=>e.jsx(n,{className:"animate-pulse",children:e.jsxs(d,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-20 bg-muted rounded"})]})},_))}):y?e.jsx(n,{children:e.jsxs(d,{className:"p-6 text-center",children:[e.jsxs("p",{className:"text-destructive mb-4",children:["Error loading gamification data: ",y]}),e.jsx(N,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):e.jsxs("div",{className:"space-y-6",children:[c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(I,{className:"h-6 w-6 mx-auto mb-2"}),e.jsxs("div",{className:"text-2xl font-bold",children:["Level ",c.level]}),e.jsxs("div",{className:"text-xs opacity-80",children:[c.total_points.toLocaleString()," points"]})]})}),e.jsx(n,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx($,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:c.destinations_collected}),e.jsx("div",{className:"text-xs opacity-80",children:"Dream Destinations"})]})}),e.jsx(n,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(X,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:c.achievements_unlocked}),e.jsx("div",{className:"text-xs opacity-80",children:"Achievements"})]})}),e.jsx(n,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(re,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:c.current_streak}),e.jsx("div",{className:"text-xs opacity-80",children:"Day Streak"})]})})]}),e.jsxs(pe,{value:r,onValueChange:t,className:"w-full",children:[e.jsxs(ge,{className:"grid w-full grid-cols-5",children:[e.jsx(C,{value:"overview",children:"Overview"}),e.jsx(C,{value:"achievements",children:"Achievements"}),e.jsx(C,{value:"leaderboards",children:"Leaderboards"}),e.jsx(C,{value:"challenges",children:"Challenges"}),e.jsx(C,{value:"social",children:"Activity"})]}),e.jsx(A,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:c&&e.jsx(us,{stats:c,levelProgress:p})}),e.jsxs("div",{className:"space-y-4",children:[U.length>0&&e.jsxs(n,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(M,{className:"text-base flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-yellow-500"}),"Recent Achievements"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:U.slice(0,3).map(a=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-lg",children:a.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:a.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.points_value," points"]})]})]},a.id))})})]}),m.length>0&&e.jsx(Ee,{entries:m[0].entries.slice(0,3),title:"Global Ranking"}),R.length>0&&e.jsxs(n,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(M,{className:"text-base flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-green-500"}),"Active Challenges"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:R.slice(0,2).map(a=>e.jsx(ws,{challenge:a},a.id))})})]})]})]})}),e.jsxs(A,{value:"achievements",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Your Achievements"}),e.jsxs("p",{className:"text-muted-foreground",children:[S.length," unlocked â€¢ ",b.length," available"]})]}),e.jsxs(j,{variant:"outline",className:"bg-primary/10",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),(c==null?void 0:c.achievements_unlocked)||0," Achievements"]})]}),e.jsxs(pe,{defaultValue:"all",className:"w-full",children:[e.jsxs(ge,{children:[e.jsx(C,{value:"all",children:"All"}),e.jsx(C,{value:"unlocked",children:"Unlocked"}),e.jsx(C,{value:"available",children:"Available"}),e.jsx(C,{value:"explorer",children:"Explorer"}),e.jsx(C,{value:"social",children:"Social"})]}),e.jsx(A,{value:"all",children:e.jsx(W,{achievements:o})}),e.jsx(A,{value:"unlocked",children:e.jsx(W,{achievements:S})}),e.jsx(A,{value:"available",children:e.jsx(W,{achievements:b})}),e.jsx(A,{value:"explorer",children:e.jsx(W,{achievements:o.filter(a=>a.category==="explorer")})}),e.jsx(A,{value:"social",children:e.jsx(W,{achievements:o.filter(a=>a.category==="social")})})]})]}),e.jsxs(A,{value:"leaderboards",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Leaderboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Compete with travelers worldwide"})]}),c&&e.jsxs(j,{variant:"outline",className:"bg-primary/10",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),"Rank #",c.exploration_rank.toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:m.map(a=>e.jsx(ps,{leaderboard:a,maxEntries:10},a.id))})]}),e.jsxs(A,{value:"challenges",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Travel Challenges"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete challenges to earn points and unlock rewards"})]}),e.jsxs(j,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),R.length," Active"]})]}),R.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-orange-500"}),"Your Active Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(a=>e.jsx(Pe,{challenge:a},a.id))})]}),O.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-blue-500"}),"Available Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(a=>e.jsx(Pe,{challenge:a,onJoin:V},a.id))})]}),l.length===0&&e.jsx(n,{children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Challenges Available"}),e.jsx("p",{className:"text-muted-foreground",children:"Check back later for exciting travel challenges!"})]})})]}),e.jsxs(A,{value:"social",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Social Activity"}),e.jsx("p",{className:"text-muted-foreground",children:"See what your travel buddies are up to"})]}),e.jsxs(N,{variant:"outline",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Find Friends"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ns,{activities:x})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(fs,{activities:x,maxItems:5}),m.length>0&&e.jsx(Ee,{entries:m[0].entries,title:"Top This Week"})]})]})]})]})]}):e.jsx(n,{children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(T,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Join the Community!"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Sign in to unlock achievements, compete on leaderboards, and connect with fellow travelers."}),e.jsx(N,{onClick:()=>window.location.href="/auth",children:"Sign In to Play"})]})})},Nt=()=>{var Ae,Se;const{user:s}=fe(),[r,t]=u.useState(""),[c,o]=u.useState("all"),[m,x]=u.useState("all"),[l,i]=u.useState("grid"),[y,p]=u.useState("discover"),[S,b]=u.useState(!0),{destinations:U,userProfile:R,userInsights:O,loading:V,error:a,searchDestinations:_,filterDestinations:k,refetch:B,behaviorTracking:P,setBehaviorTracking:F}=$e({category:c!=="all"?c:void 0,continent:m!=="all"?m:void 0,includeAIContext:!0}),{travelDNA:G,intelligentRecommendations:Y,predictiveInsights:ee,currentJourney:ce,loading:se,analyzingDNA:ne,optimizingJourney:de,confidenceScore:oe,highConfidenceRecommendations:me,urgentRecommendations:xe,socialRecommendations:h,actionableInsights:f,analyzeTravelDNA:v,getIntelligentRecommendations:E,optimizeJourney:H,getPredictiveInsights:he}=rs(),te=async g=>{t(g),g.trim()&&await _(g)},q=async(g,Q)=>{const Ge={[g]:Q};await k(Ge),g==="category"?o(Q):g==="continent"&&x(Q)},Fe=g=>{console.log("Destination clicked:",g.name)},ke=[{value:"all",label:"All Categories"},{value:"beaches",label:"ðŸ–ï¸ Beaches"},{value:"mountains",label:"â›°ï¸ Mountains"},{value:"cultural",label:"ðŸ›ï¸ Cultural"},{value:"spiritual",label:"ðŸ•‰ï¸ Spiritual"},{value:"adventure",label:"ðŸŽ¯ Adventure"},{value:"cities",label:"ðŸ™ï¸ Cities"}],Ce=[{value:"all",label:"All Continents"},{value:"Asia",label:"ðŸŒ Asia"},{value:"Europe",label:"ðŸ‡ªðŸ‡º Europe"},{value:"North America",label:"ðŸŒŽ North America"},{value:"South America",label:"ðŸŒŽ South America"},{value:"Africa",label:"ðŸŒ Africa"},{value:"Oceania",label:"ðŸŒŠ Oceania"},{value:"Antarctica",label:"ðŸ§ Antarctica"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-40",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ve,{className:"h-6 w-6 text-primary"}),"Smart Dream Hub"]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"AI-powered destination discovery and planning"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:S?"default":"outline",size:"sm",onClick:()=>b(!S),className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"AI Insights",S&&e.jsx(j,{variant:"secondary",className:"ml-1",children:"ON"})]}),e.jsxs(N,{variant:P?"default":"outline",size:"sm",onClick:()=>F(!P),className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Learning",P&&e.jsx(j,{variant:"secondary",className:"ml-1",children:"ON"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:B,children:e.jsx(Ve,{className:"h-4 w-4"})})]})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[S&&(G||Y.length>0)&&e.jsx(n,{className:"mb-6 bg-gradient-to-r from-blue-50 via-purple-50 to-indigo-50 border-blue-200",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-purple-800",children:"AI Intelligence Active"}),G&&e.jsxs(j,{variant:"outline",className:"bg-white border-purple-200",children:[Math.round(oe*100),"% Match Confidence"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[Y.length>0&&e.jsxs("div",{className:"text-blue-600",children:[e.jsx($,{className:"h-4 w-4 inline mr-1"}),Y.length," AI Recommendations"]}),f.length>0&&e.jsxs("div",{className:"text-orange-600",children:[e.jsx(ls,{className:"h-4 w-4 inline mr-1"}),f.length," Actionable Insights"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-2 bg-white/50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:me.length}),e.jsx("div",{className:"text-xs text-blue-500",children:"High Confidence"})]}),e.jsxs("div",{className:"text-center p-2 bg-white/50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600",children:xe.length}),e.jsx("div",{className:"text-xs text-orange-500",children:"Urgent"})]}),e.jsxs("div",{className:"text-center p-2 bg-white/50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:h.length}),e.jsx("div",{className:"text-xs text-green-500",children:"Social Proof"})]}),e.jsxs("div",{className:"text-center p-2 bg-white/50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:ee.reduce((g,Q)=>g+(Q.predicted_value||0),0)}),e.jsx("div",{className:"text-xs text-purple-500",children:"Potential Savings ($)"})]})]})]})}),e.jsxs(pe,{value:y,onValueChange:p,className:"w-full",children:[e.jsxs(ge,{className:"grid w-full grid-cols-6 lg:w-[600px]",children:[e.jsx(C,{value:"discover",children:"Discover"}),e.jsx(C,{value:"ai-dna",children:"Travel DNA"}),e.jsx(C,{value:"ai-recs",children:"AI Picks"}),e.jsx(C,{value:"insights",children:"Insights"}),e.jsx(C,{value:"social",children:"Social"}),e.jsx(C,{value:"planner",children:"Planner"})]}),e.jsxs(A,{value:"discover",className:"space-y-6",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Ye,{placeholder:"Search dream destinations...",value:r,onChange:g=>te(g.target.value),className:"pl-10"})]}),e.jsxs(De,{value:c,onValueChange:g=>q("category",g),children:[e.jsx(Le,{className:"w-full lg:w-[200px]",children:e.jsx(Me,{placeholder:"Category"})}),e.jsx(Te,{children:ke.map(g=>e.jsx(Ie,{value:g.value,children:g.label},g.value))})]}),e.jsxs(De,{value:m,onValueChange:g=>q("continent",g),children:[e.jsx(Le,{className:"w-full lg:w-[200px]",children:e.jsx(Me,{placeholder:"Continent"})}),e.jsx(Te,{children:Ce.map(g=>e.jsx(Ie,{value:g.value,children:g.label},g.value))})]}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[e.jsx(N,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>i("grid"),className:"h-8 w-8 p-0",children:e.jsx(cs,{className:"h-4 w-4"})}),e.jsx(N,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>i("list"),className:"h-8 w-8 p-0",children:e.jsx(ns,{className:"h-4 w-4"})})]})]}),(c!=="all"||m!=="all"||r)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t",children:[r&&e.jsxs(j,{variant:"secondary",children:['Search: "',r,'"',e.jsx(N,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>te(""),children:"Ã—"})]}),c!=="all"&&e.jsxs(j,{variant:"secondary",children:[(Ae=ke.find(g=>g.value===c))==null?void 0:Ae.label,e.jsx(N,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>q("category","all"),children:"Ã—"})]}),m!=="all"&&e.jsxs(j,{variant:"secondary",children:[(Se=Ce.find(g=>g.value===m))==null?void 0:Se.label,e.jsx(N,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>q("continent","all"),children:"Ã—"})]})]})]})}),e.jsx(xs,{destinations:U,onDestinationClick:Fe,viewMode:l,loading:V,error:a})]}),e.jsx(A,{value:"ai-dna",className:"space-y-6",children:e.jsx(es,{travelDNA:G,loading:ne,onRefresh:()=>v(!0)})}),e.jsx(A,{value:"ai-recs",className:"space-y-6",children:e.jsx(ss,{recommendations:Y,loading:se,onRefresh:()=>E({max_results:20})})}),e.jsx(A,{value:"insights",className:"space-y-6",children:S?e.jsx(ts,{insights:ee,loading:se,onRefresh:he}):e.jsx(ms,{userProfile:R,userInsights:O,loading:V})}),e.jsx(A,{value:"social",className:"space-y-6",children:e.jsx(_s,{})}),e.jsx(A,{value:"planner",className:"space-y-6",children:e.jsx(as,{currentJourney:ce,optimizing:de,onOptimize:H})})]})]})]})};export{Nt as SmartDreamDashboard};
