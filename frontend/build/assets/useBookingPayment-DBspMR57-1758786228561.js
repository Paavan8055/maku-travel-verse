import{r as i,y as c,a7 as g,E as u}from"./index-BuFvfeSJ-1758786228561.js";const y=()=>{const[s,r]=i.useState(!1),{toast:t}=c();return{createBookingPayment:async n=>{r(!0);try{console.log("Creating booking payment:",n);const o=`booking_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{data:e,error:a}=await g.functions.invoke("create-booking-payment",{body:{...n,idempotencyKey:o}});if(a)throw new Error(a.message||"Failed to create booking payment");if(!e.success)throw new Error(e.error||"Booking payment failed");return t({title:"Booking Created",description:`Booking reference: ${e.booking.reference}`}),e.payment.checkoutUrl&&(console.log("Redirecting to Stripe checkout:",e.payment.checkoutUrl),window.location.href=e.payment.checkoutUrl),e}catch(o){u.error("Booking payment error:",o);const e=o instanceof Error?o.message:"An unexpected error occurred";return t({title:"Booking Failed",description:e,variant:"destructive"}),{success:!1,error:e}}finally{r(!1)}},isLoading:s}};export{y as u};
