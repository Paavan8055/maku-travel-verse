import{F as I}from"./index-CJuZQhWd-1758868730171.js";const F=e=>{let t;const n=new Set,r=(i,h)=>{const m=typeof i=="function"?i(t):i;if(!Object.is(m,t)){const y=t;t=(h!=null?h:typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(g=>g(t,y))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>f,subscribe:i=>(n.add(i),()=>n.delete(i))},f=t=e(r,s,a);return a},k=e=>e?F(e):F,C=e=>e;function w(e,t=C){const n=I.useSyncExternalStore(e.subscribe,I.useCallback(()=>t(e.getState()),[e,t]),I.useCallback(()=>t(e.getInitialState()),[e,t]));return I.useDebugValue(n),n}const H=e=>{const t=k(e),n=r=>w(t,r);return Object.assign(n,t),n},B=e=>e?H(e):H;function _(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var l;const c=f=>f===null?null:JSON.parse(f,void 0),a=(l=n.getItem(s))!=null?l:null;return a instanceof Promise?a.then(c):c(a)},setItem:(s,l)=>n.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>n.removeItem(s)}}const b=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return b(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return b(r)(n)}}}},D=(e,t)=>(n,r,s)=>{let l={storage:_(()=>localStorage),partialize:o=>o,version:0,merge:(o,p)=>({...p,...o}),...t},c=!1;const a=new Set,f=new Set;let i=l.storage;if(!i)return e((...o)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...o)},r,s);const h=()=>{const o=l.partialize({...r()});return i.setItem(l.name,{state:o,version:l.version})},m=s.setState;s.setState=(o,p)=>(m(o,p),h());const y=e((...o)=>(n(...o),h()),r,s);s.getInitialState=()=>y;let g;const S=()=>{var o,p;if(!i)return;c=!1,a.forEach(u=>{var d;return u((d=r())!=null?d:y)});const v=((p=l.onRehydrateStorage)==null?void 0:p.call(l,(o=r())!=null?o:y))||void 0;return b(i.getItem.bind(i))(l.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==l.version){if(l.migrate){const d=l.migrate(u.state,u.version);return d instanceof Promise?d.then(O=>[!0,O]):[!0,d]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,u.state];return[!1,void 0]}).then(u=>{var d;const[O,T]=u;if(g=l.merge(T,(d=r())!=null?d:y),n(g,!0),O)return h()}).then(()=>{v==null||v(g,void 0),g=r(),c=!0,f.forEach(u=>u(g))}).catch(u=>{v==null||v(void 0,u)})};return s.persist={setOptions:o=>{l={...l,...o},o.storage&&(i=o.storage)},clearStorage:()=>{i==null||i.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>S(),hasHydrated:()=>c,onHydrate:o=>(a.add(o),()=>{a.delete(o)}),onFinishHydration:o=>(f.add(o),()=>{f.delete(o)})},l.skipHydration||S(),g||y},j=D,E=B()(j(e=>({selectedHotelOffer:null,selectedHotelData:null,selectedAddOns:[],addOnsTotal:0,selectedOutboundFlight:null,selectedInboundFlight:null,multiCityFlights:[],tripType:"oneway",selectedActivityOffer:null,guestInfo:null,passengerInfo:null,setHotelBooking:(t,n,r,s)=>e({selectedHotelOffer:t,selectedHotelData:n,selectedAddOns:r,addOnsTotal:s}),setFlightBooking:(t,n,r,s)=>e({selectedOutboundFlight:t,selectedInboundFlight:n||null,multiCityFlights:r||[],tripType:s||"oneway"}),setActivityBooking:t=>e({selectedActivityOffer:t}),setGuestInfo:t=>e({guestInfo:t}),setPassengerInfo:t=>e({passengerInfo:t}),clearBooking:()=>e({selectedHotelOffer:null,selectedHotelData:null,selectedAddOns:[],addOnsTotal:0,selectedOutboundFlight:null,selectedInboundFlight:null,multiCityFlights:[],tripType:"oneway",selectedActivityOffer:null,guestInfo:null,passengerInfo:null})}),{name:"booking-store",partialize:e=>A(e),merge:(e,t)=>({...t,...A(e)})}));function A(e){var t,n,r,s,l,c,a;return{selectedHotelOffer:(t=e.selectedHotelOffer)!=null?t:null,selectedHotelData:(n=e.selectedHotelData)!=null?n:null,selectedAddOns:Array.isArray(e.selectedAddOns)?e.selectedAddOns:[],addOnsTotal:typeof e.addOnsTotal=="number"?e.addOnsTotal:0,selectedOutboundFlight:(r=e.selectedOutboundFlight)!=null?r:null,selectedInboundFlight:(s=e.selectedInboundFlight)!=null?s:null,multiCityFlights:Array.isArray(e.multiCityFlights)?e.multiCityFlights:[],tripType:e.tripType==="roundtrip"||e.tripType==="multicity"?e.tripType:"oneway",selectedActivityOffer:(l=e.selectedActivityOffer)!=null?l:null,guestInfo:(c=e.guestInfo)!=null?c:null,passengerInfo:(a=e.passengerInfo)!=null?a:null}}export{E as u};
