import{c as Se,h as Ce,r as d,j as e,d as m,f as E,g as $,e as x,a as w,B as S,u as Ge,l as ne,t as U,P as V,b as Qe,L as Ve}from"./index-TCSr436p-1761323928276.js";import{I as ge}from"./input-C_dYPecq-1761323928276.js";import{T as we,a as _e,b as R,c as L}from"./tabs-DDiNKp13-1761323928276.js";import{L as he}from"./label-CtexMKIs-1761323928276.js";import{S as Ze}from"./separator-hELMJV_s-1761323928276.js";import{D as Xe,a as Ke,b as qe,c as es}from"./dialog-D-PYMdR5-1761323928276.js";import{u as ss}from"./useTravelFunds-Cxv5QO_g-1761323928276.js";import{u as Oe}from"./useAIIntelligence-DSO-XK2e-1761323928276.js";import{B as pe}from"./brain-CegkqhTZ-1761323928276.js";import{S as te}from"./sparkles-aiE3WW6F-1761323928276.js";import{D as ts}from"./dollar-sign-Dbg9tQVk-1761323928276.js";import{C as le}from"./calendar-D2DanGZV-1761323928276.js";import{T as ce}from"./trending-up-DI6seaQA-1761323928276.js";import{T as J}from"./target-M-JIwa-I-1761323928276.js";import{U as D}from"./users-C2GpaRRs-1761323928276.js";import{C as ve}from"./clock-Q2OVtoWZ-1761323928276.js";import{gamificationService as z}from"./gamification-service-DKKY1kbb-1761323928276.js";import{F as ye}from"./flame-JZbNa4Xf-1761323928276.js";import{T as F,C as $e,N as as}from"./Navbar-BzaXqqGA-1761323928276.js";import{M as ae}from"./map-pin-Bi5zQGes-1761323928276.js";import{G as Fe}from"./globe-BwQQZNaQ-1761323928276.js";import{A as je}from"./award-DddhN3S--1761323928276.js";import{S as ee}from"./star-D15CtNJ1-1761323928276.js";import{L as rs}from"./lock-Dy9xNui6-1761323928276.js";import{C as fe}from"./crown-iyEjRZhU-1761323928276.js";import{A as Ae,a as Me,b as Te}from"./avatar-D0lWjywn-1761323928276.js";import{T as is}from"./trending-down-CIbQe76f-1761323928276.js";import{M as ns}from"./minus-kLoDrLXn-1761323928276.js";import{H as K}from"./heart-D0r5x9dB-1761323928276.js";import{M as ls}from"./message-circle-DIOxsvXp-1761323928276.js";import{S as ke,C as cs}from"./share-2-C6mW9UDd-1761323928276.js";import{U as os}from"./user-plus-DGbOavfu-1761323928276.js";import{Z as He}from"./zap-3m0Hoc2c-1761323928276.js";import{C as Be}from"./circle-check-big-CGJGz4b--1761323928276.js";import{T as ds,I as ms,P as xs,J as hs}from"./JourneyOptimizerCard-C073oiY6-1761323928276.js";import{u as us}from"./useEnhancedDreams-BvyNrA38-1761323928276.js";import{a as Je}from"./index-8DBfw8dd-1761323928276.js";import{v as gs}from"./v4-BToUZ8VQ-1761323928276.js";import{U as ps}from"./user-B4CF2yET-1761323928276.js";import{F as js}from"./Footer-CMwU9QqR-1761323928276.js";import"./index-CtwbGSyk-1761323928276.js";import"./travelFundClient-ChcZqFv6-1761323928276.js";import"./useApiHealth-gnwgllNM-1761323928276.js";import"./useHealthMonitor-DusbXBhz-1761323928276.js";import"./plane-BuH-rAgJ-1761323928276.js";import"./chevron-down-Dx4XCLbs-1761323928276.js";import"./settings-o1LuKoc5-1761323928276.js";import"./shield-BbVPY7qH-1761323928276.js";import"./index-vh49tvyl-1761323928276.js";import"./activity-DYYMva4j-1761323928276.js";import"./select-D7KyU35G-1761323928276.js";import"./index-BdQq_4o_-1761323928276.js";import"./index-STdlexPM-1761323928276.js";import"./search-BXJGXiWw-1761323928276.js";import"./lightbulb-BjAAR4fD-1761323928276.js";import"./external-link-B5TOsK2y-1761323928276.js";import"./arrow-right-Caz4mA1j-1761323928276.js";import"./plus-CCL-HTS--1761323928276.js";import"./bot-BhvGcXCF-1761323928276.js";import"./cpu-dzzd6HIa-1761323928276.js";import"./map-Cifn5esZ-1761323928276.js";import"./play-BDX_3fSi-1761323928276.js";import"./book-open-BnoE6Hiu-1761323928276.js";import"./file-text-E60D_VZ6-1761323928276.js";import"./mail-yrx3nTI4-1761323928276.js";import"./twitter-BUkLDx9Y-1761323928276.js";import"./send-DFJN2qXc-1761323928276.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Se("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Se("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Se("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),bs=({dreamData:s,open:l,onOpenChange:a,onFundCreated:c})=>{const{toast:r}=Ce(),{createFund:y}=ss(),{travelDNA:g}=Oe(),[i,n]=d.useState(null),[C,p]=d.useState(""),[T,N]=d.useState(0),[B,f]=d.useState(""),[h,o]=d.useState("personal"),[j,v]=d.useState([]),[I,u]=d.useState(!1);d.useEffect(()=>{const _=async()=>{var O;try{const H={hotel:s.duration*150,flights:800+s.companions*200,activities:s.duration*100,food:s.duration*75,local:s.duration*50},W=Object.values(H).reduce((b,k)=>b+k,0),de=W*.2,Z=W+de,me=(g==null?void 0:g.planning_style)==="spontaneous"?.5:1.5,se=Math.max(3,Math.round(12*me)),q=Z/se;n({suggestedAmount:Math.round(Z),timelineMonths:se,monthlyContribution:Math.round(q),riskAssessment:q>500?"high":q>200?"medium":"low",successProbability:Math.min(95,100-q/50)});const G=s.dreamName||`${s.destination} Adventure`;p(`${G} 2025`),N(Math.round(Z));const xe=((O=s.travelDates)==null?void 0:O.start)||new Date(Date.now()+se*30*24*60*60*1e3);f(xe.toISOString().split("T")[0])}catch(H){console.error("Error generating recommendation:",H)}};s.destination&&_()},[s,g]);const oe=async()=>{u(!0);try{const _={name:C,description:`AI-generated savings plan for ${s.destination} adventure`,target_amount:T,deadline:B,destination:s.destination,fund_type:h,smart_dreams_integration:{source:"smart_dreams",dream_data:s,ai_recommendation:i,generated_at:new Date().toISOString()}},O=await y(_);O&&(r({title:"Dream fund created!",description:`Your ${s.destination} savings fund is ready. Start inviting friends!`}),c(O.id),a(!1))}catch{r({title:"Error",description:"Failed to create fund. Please try again.",variant:"destructive"})}finally{u(!1)}};return e.jsx(Xe,{open:l,onOpenChange:a,children:e.jsxs(Ke,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(qe,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-6 w-6 text-purple-600"}),"Turn Your Dream Into Reality"]})}),e.jsxs("div",{className:"space-y-6",children:[i&&e.jsxs(m,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:[e.jsx(E,{children:e.jsxs($,{className:"flex items-center gap-2 text-lg",children:[e.jsx(te,{className:"h-5 w-5 text-purple-600"}),"AI Budget Analysis for ",s.destination]})}),e.jsxs(x,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(ts,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Estimated Cost"}),e.jsxs("p",{className:"text-xl font-bold",children:["$",i.suggestedAmount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(le,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Timeline"}),e.jsxs("p",{className:"text-xl font-bold",children:[i.timelineMonths," months"]})]}),e.jsxs("div",{children:[e.jsx(ce,{className:"h-6 w-6 mx-auto mb-1 text-orange-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Goal"}),e.jsxs("p",{className:"text-xl font-bold",children:["$",i.monthlyContribution]})]}),e.jsxs("div",{children:[e.jsx(J,{className:"h-6 w-6 mx-auto mb-1 text-purple-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-xl font-bold",children:[i.successProbability,"%"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Budget Breakdown"}),e.jsx(w,{variant:"outline",children:"AI Estimated"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Accommodation (",s.duration," nights)"]}),e.jsxs("span",{children:["$",(s.duration*150).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Flights (",s.companions+1," people)"]}),e.jsxs("span",{children:["$",(800+s.companions*200).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Activities & Experiences"}),e.jsxs("span",{children:["$",(s.duration*100).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Food & Dining"}),e.jsxs("span",{children:["$",(s.duration*75).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Local Transport"}),e.jsxs("span",{children:["$",(s.duration*50).toLocaleString()]})]}),e.jsx(Ze,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Safety Buffer (20%)"}),e.jsxs("span",{children:["$",Math.round(i.suggestedAmount*.2).toLocaleString()]})]})]})]})]})]}),e.jsxs(m,{children:[e.jsx(E,{children:e.jsx($,{children:"Create Your Dream Fund"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(he,{htmlFor:"fundName",children:"Fund Name"}),e.jsx(ge,{id:"fundName",value:C,onChange:_=>p(_.target.value),placeholder:"e.g., Bali Adventure 2025"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(he,{htmlFor:"targetAmount",children:"Target Amount ($)"}),e.jsx(ge,{id:"targetAmount",type:"number",value:T,onChange:_=>N(Number(_.target.value)),min:"100",step:"50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(he,{htmlFor:"deadline",children:"Target Date"}),e.jsx(ge,{id:"deadline",type:"date",value:B,onChange:_=>f(_.target.value),min:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(he,{children:"Fund Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["personal","group","family"].map(_=>e.jsxs(S,{variant:h===_?"default":"outline",onClick:()=>o(_),className:"capitalize",children:[_==="personal"&&e.jsx(J,{className:"h-4 w-4 mr-1"}),_==="group"&&e.jsx(D,{className:"h-4 w-4 mr-1"}),_==="family"&&e.jsx(D,{className:"h-4 w-4 mr-1"}),_]},_))})]}),(h==="group"||h==="family")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(he,{children:"Invite Companions"}),e.jsxs("div",{className:"space-y-2",children:[s.companions>0&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Your dream includes ",s.companions," companion",s.companions>1?"s":"",". Invite them to contribute!"]}),e.jsx(ge,{placeholder:"Enter email addresses (comma separated)",onChange:_=>v(_.target.value.split(",").map(O=>O.trim()))})]})]}),i&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-green-600"}),"Your Savings Strategy"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Contribution:"}),e.jsxs("span",{className:"font-semibold ml-2",children:["$",i.monthlyContribution]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Success Probability:"}),e.jsxs("span",{className:"font-semibold ml-2 text-green-600",children:[i.successProbability,"%"]})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-white rounded",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress Timeline"}),e.jsxs("span",{children:[i.timelineMonths," months to go"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500",style:{width:"5%"}})})]})]})]})]}),e.jsx(m,{className:"border-orange-200 bg-gradient-to-r from-orange-50 to-yellow-50",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("h4",{className:"font-semibold text-orange-700 mb-3 flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Smart Dreams Benefits"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-3 w-3 text-orange-500"}),e.jsx("span",{children:"AI-optimized budget planning"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{children:"Milestone NFT rewards"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-3 w-3 text-blue-500"}),e.jsx("span",{children:"Automatic companion invites"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-3 w-3 text-purple-500"}),e.jsx("span",{children:"Progress tracking in Smart Dreams"})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(S,{onClick:oe,disabled:!C||!T||I,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:I?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating Dream Fund..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create Dream Fund"]})}),e.jsx(S,{variant:"outline",onClick:()=>a(!1),children:"Maybe Later"})]})]})]})})},vs=()=>{const{user:s}=Ge(),{toast:l}=Ce(),[a,c]=d.useState(null),[r,y]=d.useState([]),[g,i]=d.useState([]),[n,C]=d.useState([]),[p,T]=d.useState([]),[N,B]=d.useState([]),[f,h]=d.useState(null),[o,j]=d.useState(null),[v,I]=d.useState(!0),[u,oe]=d.useState(null),_=d.useCallback(async()=>{if(s!=null&&s.id)try{I(!0),oe(null);const[b,k,A,Y,re,X,Ne,ie]=await Promise.all([z.getUserGameStats(s.id),z.getUserAchievements(s.id),z.getLeaderboards(["global","weekly","friends"]),z.getSocialConnections(s.id),z.getSocialActivityFeed(s.id,20),z.getChallenges(s.id),z.getDreamCollectionStats(s.id),z.getSocialInsights(s.id)]);c(b),y(k),i(A),C(Y),T(re),B(X),h(Ne),j(ie)}catch(b){const k=b instanceof Error?b.message:"Failed to fetch gamification data";oe(k),ne.error("Error fetching gamification data:",b)}finally{I(!1)}},[s==null?void 0:s.id]),O=d.useCallback(async(b,k)=>{if(!(s!=null&&s.id))return null;try{const A=await z.checkAchievements(s.id,b,k);if(A.newly_unlocked.length>0){A.newly_unlocked.forEach(re=>{l({title:"🏆 Achievement Unlocked!",description:`${re.name}: ${re.description}`,duration:5e3})});const Y=await z.getUserAchievements(s.id);y(Y)}if(A.points_earned>0&&l({title:"✨ Points Earned!",description:`You earned ${A.points_earned} points!`,duration:3e3}),A.level_up){l({title:"🎉 Level Up!",description:`Welcome to Level ${A.level_up.new_level}!`,duration:6e3});const Y=await z.getUserGameStats(s.id);c(Y)}return A}catch(A){return ne.error("Error checking achievements:",A),null}},[s==null?void 0:s.id,l]),H=d.useCallback(async b=>{if(!(s!=null&&s.id))return l({title:"Authentication Required",description:"Please log in to join challenges.",variant:"destructive"}),!1;try{const k=await z.joinChallenge(s.id,b);if(k.success){l({title:"Challenge Joined!",description:k.message});const A=await z.getChallenges(s.id);return B(A),await z.trackGameEvent(s.id,{event_type:"challenge_joined",event_data:{challenge_id:b},timestamp:new Date,user_context:{current_level:(a==null?void 0:a.level)||1,current_points:(a==null?void 0:a.total_points)||0,active_challenges:N.filter(Y=>Y.is_participating).map(Y=>Y.id)}}),!0}else return l({title:"Failed to Join Challenge",description:k.message,variant:"destructive"}),!1}catch{return l({title:"Error",description:"Failed to join challenge. Please try again.",variant:"destructive"}),!1}},[s==null?void 0:s.id,a,N,l]),W=d.useCallback(async(b,k)=>{if(s!=null&&s.id)try{await z.trackGameEvent(s.id,{event_type:b,event_data:k,timestamp:new Date,user_context:{current_level:(a==null?void 0:a.level)||1,current_points:(a==null?void 0:a.total_points)||0,active_challenges:N.filter(A=>A.is_participating).map(A=>A.id)}})}catch(A){ne.error("Error tracking game event:",A)}},[s==null?void 0:s.id,a,N]),de=d.useCallback(()=>{if(!a)return{current:0,next:0,progress:0};const b=(a.level-1)*1e3,k=a.level*1e3,A=(a.total_points-b)/(k-b)*100;return{current:b,next:k,progress:Math.min(Math.max(A,0),100)}},[a]),Z=d.useCallback(b=>b?r.filter(k=>k.category===b):r,[r]),me=d.useCallback(()=>r.filter(b=>b.unlocked),[r]),se=d.useCallback(()=>r.filter(b=>!b.unlocked),[r]),q=d.useCallback(()=>{const b=new Date(Date.now()-6048e5);return r.filter(k=>k.unlocked&&k.unlocked_at&&new Date(k.unlocked_at)>b)},[r]),G=d.useCallback(()=>N.filter(b=>b.status==="active"&&b.is_participating),[N]),xe=d.useCallback(()=>N.filter(b=>b.status==="active"&&!b.is_participating),[N]);return d.useEffect(()=>{s!=null&&s.id&&_()},[s==null?void 0:s.id,_]),d.useEffect(()=>{if(!(s!=null&&s.id))return;const b=setInterval(()=>{_()},5*60*1e3);return()=>clearInterval(b)},[s==null?void 0:s.id,_]),{userStats:a,achievements:r,leaderboards:g,socialConnections:n,socialActivity:p,challenges:N,collectionStats:f,socialInsights:o,loading:v,error:u,checkAchievements:O,joinChallenge:H,trackGameEvent:W,refetch:_,levelProgress:de(),unlockedAchievements:me(),availableAchievements:se(),recentAchievements:q(),activeChallenges:G(),availableChallenges:xe(),getAchievementsByCategory:Z}},ys=({stats:s,levelProgress:l,compact:a=!1})=>{const c=g=>g>=30?"text-purple-600 bg-purple-50 border-purple-200":g>=14?"text-blue-600 bg-blue-50 border-blue-200":g>=7?"text-green-600 bg-green-50 border-green-200":g>=3?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-gray-600 bg-gray-50 border-gray-200",y=(g=>g<=10?{icon:"👑",text:"Elite",color:"bg-gradient-to-r from-yellow-400 to-orange-500"}:g<=100?{icon:"🏆",text:"Expert",color:"bg-gradient-to-r from-blue-400 to-purple-500"}:g<=1e3?{icon:"⭐",text:"Rising",color:"bg-gradient-to-r from-green-400 to-blue-500"}:{icon:"🎯",text:"Explorer",color:"bg-gradient-to-r from-gray-400 to-gray-500"})(s.exploration_rank);return a?e.jsx(m,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent/5",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:U("flex items-center justify-center w-8 h-8 rounded-full text-white text-sm font-bold",y.color),children:s.level}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:["Level ",s.level]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.total_points.toLocaleString()," points"]})]})]}),e.jsxs(w,{className:U("border",c(s.current_streak)),children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),s.current_streak]})]}),e.jsx(V,{value:l.progress,className:"h-2 mb-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[Math.round(l.progress),"% to Level ",s.level+1]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-accent/5",children:[e.jsx(E,{className:"pb-3",children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:U("flex items-center justify-center w-12 h-12 rounded-full text-white text-lg font-bold",y.color),children:s.level}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold",children:["Level ",s.level]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[y.text," Explorer"]})]})]}),e.jsxs(w,{variant:"outline",className:"bg-background/50",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"#",s.exploration_rank.toLocaleString()]})]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:s.total_points.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Points"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Level Progress"}),e.jsxs("span",{children:[Math.round(l.progress),"%"]})]}),e.jsx(V,{value:l.progress,className:"h-3"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-center",children:[(l.next-s.total_points).toLocaleString()," points to Level ",s.level+1]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(m,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(ae,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:s.destinations_collected}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Dreams"}),e.jsx(V,{value:Math.min(s.destinations_collected/100*100,100),className:"h-1 mt-2"})]})}),e.jsx(m,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(Fe,{className:"h-6 w-6 mx-auto mb-2 text-accent"}),e.jsx("div",{className:"text-2xl font-bold",children:s.continents_unlocked}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Continents"}),e.jsx(V,{value:s.continents_unlocked/7*100,className:"h-1 mt-2"})]})}),e.jsx(m,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(je,{className:"h-6 w-6 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-2xl font-bold",children:s.achievements_unlocked}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Achievements"})]})}),e.jsx(m,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(ye,{className:"h-6 w-6 mx-auto mb-2 text-orange-500"}),e.jsx("div",{className:"text-2xl font-bold",children:s.current_streak}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"}),s.current_streak>0&&e.jsx(w,{className:U("mt-1 text-xs",c(s.current_streak)),children:"🔥 On Fire!"})]})})]}),e.jsxs(m,{children:[e.jsx(E,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Category Progress"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(s.category_stats).map(([g,i])=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"capitalize font-medium",children:[g," (",i.count,")"]}),e.jsxs("span",{className:"text-muted-foreground",children:[i.completion_percentage,"% complete"]})]}),e.jsx(V,{value:i.completion_percentage,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Avg rarity: ",i.average_rarity,"/100"]})]},g))})})]}),e.jsxs(m,{children:[e.jsx(E,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"Continental Explorer"]})}),e.jsx(x,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(s.continent_progress).map(([g,i])=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium",children:g}),e.jsxs(w,{variant:"outline",className:"text-xs",children:[i.destinations_count," places"]})]}),e.jsx(V,{value:i.completion_percentage,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.completion_percentage,"% explored",i.rare_destinations_count>0&&e.jsxs("span",{className:"ml-2",children:["✨ ",i.rare_destinations_count," rare"]})]})]},g))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(m,{children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Rarity Score"})]}),e.jsx("div",{className:"text-xl font-bold text-purple-600",children:s.rarity_score})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Based on rare destinations collected"})]})}),e.jsx(m,{children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Social Score"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s.social_score})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Friends and social interactions"})]})})]}),e.jsx(m,{className:"border-muted bg-muted/30",children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(le,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Longest Streak"}),e.jsxs("div",{className:"text-lg font-bold text-orange-500",children:[s.longest_streak," days"]})]}),e.jsxs("div",{children:[e.jsx(ce,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Last Activity"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.last_activity).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(F,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Global Rank"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:["#",s.exploration_rank.toLocaleString()]})]})]})})})]})},ws=({achievement:s,onClick:l,size:a="md",showProgress:c=!0})=>{const r=n=>{switch(n){case"legendary":return"from-purple-500 to-pink-500 text-white border-purple-300";case"epic":return"from-blue-500 to-cyan-500 text-white border-blue-300";case"rare":return"from-green-500 to-emerald-500 text-white border-green-300";case"common":return"from-gray-400 to-gray-500 text-white border-gray-300";default:return"from-gray-400 to-gray-500 text-white border-gray-300"}},y=n=>{switch(n){case"legendary":return e.jsx(fe,{className:"h-4 w-4"});case"epic":return e.jsx(Ns,{className:"h-4 w-4"});case"rare":return e.jsx(ee,{className:"h-4 w-4"});case"common":return e.jsx(F,{className:"h-4 w-4"});default:return e.jsx(F,{className:"h-4 w-4"})}},g=()=>{switch(a){case"sm":return"p-3";case"lg":return"p-6";default:return"p-4"}},i=()=>{switch(a){case"sm":return"text-sm";case"lg":return"text-lg";default:return"text-base"}};return e.jsx(m,{className:U("group cursor-pointer transition-all duration-300 hover:shadow-lg",s.unlocked?"border-primary/30 bg-gradient-to-br from-primary/5 to-accent/5":"border-muted bg-muted/30 opacity-75",l&&"hover:scale-105"),onClick:l,children:e.jsx(x,{className:g(),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:U("flex items-center justify-center rounded-lg w-12 h-12 bg-gradient-to-br shrink-0",r(s.rarity)),children:e.jsx("span",{className:"text-2xl",role:"img","aria-label":s.name,children:s.icon})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:U("font-semibold truncate",i()),children:s.name}),!s.unlocked&&e.jsx(rs,{className:"h-3 w-3 text-muted-foreground shrink-0"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description}),c&&s.max_progress>1&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"/",s.max_progress]})]}),e.jsx(V,{value:s.progress/s.max_progress*100,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:"outline",className:U("text-xs bg-gradient-to-r border",r(s.rarity)),children:[y(s.rarity),e.jsx("span",{className:"ml-1 capitalize",children:s.rarity})]}),e.jsx(w,{variant:"secondary",className:"text-xs capitalize",children:s.category})]}),e.jsxs("div",{className:"text-xs font-medium text-primary",children:[s.points_value," pts"]})]}),s.unlocked&&s.unlocked_at&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Unlocked ",new Date(s.unlocked_at).toLocaleDateString()]})]})]})})})},ue=({achievements:s,onAchievementClick:l,maxDisplayed:a})=>{const c=a?s.slice(0,a):s;return s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(F,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No achievements to display"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map(r=>e.jsx(ws,{achievement:r,onClick:()=>l==null?void 0:l(r)},r.id)),a&&s.length>a&&e.jsx(m,{className:"border-dashed border-2 border-muted-foreground/20",children:e.jsx(x,{className:"p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsxs("div",{className:"text-2xl mb-2",children:["+",s.length-a]}),e.jsx("div",{className:"text-sm",children:"More achievements"})]})})})]})},_s=({leaderboard:s,onViewAll:l,maxEntries:a=5})=>{const c=i=>{switch(i){case 1:return e.jsx(fe,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(De,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(je,{className:"h-5 w-5 text-amber-600"});default:return e.jsxs("span",{className:"text-sm font-bold text-muted-foreground",children:["#",i]})}},r=i=>i>0?e.jsx(ce,{className:"h-3 w-3 text-green-500"}):i<0?e.jsx(is,{className:"h-3 w-3 text-red-500"}):e.jsx(ns,{className:"h-3 w-3 text-muted-foreground"}),y=i=>i>0?"text-green-600":i<0?"text-red-600":"text-muted-foreground",g=s.entries.slice(0,a);return e.jsxs(m,{children:[e.jsxs(E,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2 text-lg",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),s.name]}),e.jsxs(w,{variant:"outline",className:"text-xs",children:[e.jsx(D,{className:"h-3 w-3 mr-1"}),s.total_participants.toLocaleString()]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs(x,{className:"space-y-3",children:[g.map((i,n)=>e.jsxs("div",{className:U("flex items-center justify-between p-3 rounded-lg border transition-colors",i.rank<=3?"bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20":"bg-muted/30 border-muted"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:c(i.rank)}),e.jsxs(Ae,{className:"h-8 w-8",children:[e.jsx(Me,{src:i.avatar_url,alt:i.username}),e.jsx(Te,{className:"text-xs",children:i.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:i.username}),i.specialization&&e.jsx(w,{variant:"secondary",className:"text-xs px-1 py-0",children:i.specialization})]}),i.badges&&i.badges.length>0&&e.jsxs("div",{className:"flex gap-1 mt-1",children:[i.badges.slice(0,3).map((C,p)=>e.jsx("span",{className:"text-xs",role:"img",children:C},p)),i.badges.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",i.badges.length-3]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-primary",children:i.score.toLocaleString()}),i.change_from_last_week!==0&&e.jsxs("div",{className:U("flex items-center gap-1 text-xs",y(i.change_from_last_week)),children:[r(i.change_from_last_week),e.jsx("span",{children:Math.abs(i.change_from_last_week)})]})]})]},i.user_id)),s.user_rank&&s.user_rank>a&&e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Your rank:"}),e.jsxs(w,{variant:"outline",children:["#",s.user_rank.toLocaleString()]})]})}),s.entries.length>a&&l&&e.jsx(S,{variant:"outline",className:"w-full mt-3",onClick:l,children:"View Full Leaderboard"}),e.jsx("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Updated ",new Date(s.updated_at).toLocaleDateString()]}),s.ends_at&&e.jsxs("span",{children:["Ends ",new Date(s.ends_at).toLocaleDateString()]})]})})]})]})},ze=({entries:s,title:l="Top Players"})=>e.jsxs(m,{children:[e.jsx(E,{className:"pb-2",children:e.jsx($,{className:"text-base",children:l})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-2",children:s.slice(0,3).map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:ks(a.rank)}),e.jsx("span",{className:"text-sm font-medium truncate",children:a.username})]}),e.jsx("div",{className:"text-sm font-bold text-primary",children:a.score.toLocaleString()})]},a.user_id))})})]}),ks=s=>{switch(s){case 1:return e.jsx(fe,{className:"h-4 w-4 text-yellow-500"});case 2:return e.jsx(De,{className:"h-4 w-4 text-gray-400"});case 3:return e.jsx(je,{className:"h-4 w-4 text-amber-600"});default:return e.jsxs("span",{className:"text-xs font-bold text-muted-foreground",children:["#",s]})}},Ss=({activities:s,onLike:l,onComment:a,onShare:c,loading:r=!1})=>{const y=n=>{switch(n){case"destination_added":return e.jsx(ae,{className:"h-4 w-4 text-blue-500"});case"achievement_unlocked":return e.jsx(F,{className:"h-4 w-4 text-yellow-500"});case"level_up":return e.jsx(ce,{className:"h-4 w-4 text-green-500"});case"friend_added":return e.jsx(os,{className:"h-4 w-4 text-purple-500"});case"challenge_completed":return e.jsx(J,{className:"h-4 w-4 text-orange-500"});case"trip_planned":return e.jsx(ke,{className:"h-4 w-4 text-pink-500"});default:return e.jsx(D,{className:"h-4 w-4 text-gray-500"})}},g=n=>{const{activity_type:C,activity_data:p}=n;switch(C){case"destination_added":return`added ${p.destination_name} to their dream destinations`;case"achievement_unlocked":return`unlocked the "${p.achievement_name}" achievement`;case"level_up":return`reached Level ${p.level}`;case"friend_added":return`became travel buddies with ${p.friend_name}`;case"challenge_completed":return`completed the "${p.challenge_name}" challenge`;case"trip_planned":return`planned a trip to ${p.destination_name}`;default:return"had some travel activity"}},i=n=>{const p=Math.floor((new Date().getTime()-new Date(n).getTime())/1e3);return p<60?"just now":p<3600?`${Math.floor(p/60)}m ago`:p<86400?`${Math.floor(p/3600)}h ago`:p<604800?`${Math.floor(p/86400)}d ago`:new Date(n).toLocaleDateString()};return r?e.jsxs(m,{children:[e.jsx(E,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((n,C)=>e.jsxs("div",{className:"flex gap-3 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},C))})})]}):s.length===0?e.jsxs(m,{children:[e.jsx(E,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsx(x,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Activity Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with friends to see their travel activities here!"})]})})]}):e.jsxs(m,{children:[e.jsx(E,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsxs(x,{children:[e.jsx("div",{className:"space-y-4",children:s.map(n=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ae,{className:"h-10 w-10",children:[e.jsx(Me,{src:n.avatar_url,alt:n.username}),e.jsx(Te,{children:n.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:"mt-1",children:y(n.activity_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:n.username})," ",e.jsx("span",{className:"text-muted-foreground",children:g(n)})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i(n.created_at)})]}),n.visibility!=="public"&&e.jsx(w,{variant:"outline",className:"text-xs",children:n.visibility})]}),n.activity_type==="destination_added"&&n.activity_data.destination_name&&e.jsx("div",{className:"ml-6 p-2 bg-muted/30 rounded-lg mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:n.activity_data.destination_name})]})}),n.activity_type==="achievement_unlocked"&&e.jsx("div",{className:"ml-6 p-2 bg-yellow-50 border border-yellow-200 rounded-lg mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-3 w-3 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:n.activity_data.achievement_name})]})}),e.jsxs("div",{className:"flex items-center gap-4 ml-6 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(S,{variant:"ghost",size:"sm",className:U("h-6 px-2 text-xs",n.is_liked_by_user?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-red-500"),onClick:()=>l==null?void 0:l(n.id),children:[e.jsx(K,{className:U("h-3 w-3 mr1",n.is_liked_by_user&&"fill-current")}),n.likes_count>0&&n.likes_count]}),e.jsxs(S,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-blue-500",onClick:()=>a==null?void 0:a(n.id),children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),n.comments_count>0&&n.comments_count]}),e.jsx(S,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-green-500",onClick:()=>c==null?void 0:c(n.id),children:e.jsx(ke,{className:"h-3 w-3"})})]})]})]}),s.indexOf(n)<s.length-1&&e.jsx("div",{className:"border-t border-muted mt-4"})]},n.id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(S,{variant:"outline",size:"sm",children:"Load More Activities"})})]})]})},Cs=({activities:s,maxItems:l=3})=>{const a=s.slice(0,l);return a.length===0?e.jsx(m,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(D,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]})}):e.jsxs(m,{children:[e.jsx(E,{className:"pb-2",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Recent Activity"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:a.map(c=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ae,{className:"h-6 w-6",children:[e.jsx(Me,{src:c.avatar_url,alt:c.username}),e.jsx(Te,{className:"text-xs",children:c.username.slice(0,1).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[e.jsx("span",{className:"font-medium text-foreground",children:c.username})," ",As(c)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ms(c.created_at)})]})]},c.id))})})]})},As=s=>{const{activity_type:l,activity_data:a}=s;switch(l){case"destination_added":return`added ${a.destination_name}`;case"achievement_unlocked":return`unlocked "${a.achievement_name}"`;case"level_up":return`reached Level ${a.level}`;case"friend_added":return`added ${a.friend_name}`;case"challenge_completed":return`completed "${a.challenge_name}"`;case"trip_planned":return`planned trip to ${a.destination_name}`;default:return"had some activity"}},Ms=s=>{const a=Math.floor((new Date().getTime()-new Date(s).getTime())/1e3);return a<60?"now":a<3600?`${Math.floor(a/60)}m`:a<86400?`${Math.floor(a/3600)}h`:`${Math.floor(a/86400)}d`},Ue=({challenge:s,onJoin:l,onViewDetails:a,loading:c=!1})=>{const r=n=>{switch(n){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-orange-100 text-orange-800 border-orange-200";case"expert":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=n=>{switch(n){case"active":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";case"expired":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=()=>{const n=new Date,p=new Date(s.ends_at).getTime()-n.getTime();if(p<=0)return"Expired";const T=Math.floor(p/(1e3*60*60*24)),N=Math.floor(p%(1e3*60*60*24)/(1e3*60*60));return T>0?`${T}d ${N}h left`:N>0?`${N}h left`:"Ending soon"},i=s.target_value>0?Math.min(s.current_progress/s.target_value*100,100):0;return e.jsxs(m,{className:U("group cursor-pointer transition-all duration-300 hover:shadow-lg",s.is_participating&&"border-primary/30 bg-gradient-to-br from-primary/5 to-accent/5"),children:[e.jsxs(E,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx($,{className:"text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-gradient-to-br from-primary to-accent text-white shrink-0",children:e.jsx(J,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(w,{className:U("border",y(s.status)),children:[s.status==="active"&&e.jsx(He,{className:"h-3 w-3 mr-1"}),s.status==="upcoming"&&e.jsx(ve,{className:"h-3 w-3 mr-1"}),s.status==="completed"&&e.jsx(Be,{className:"h-3 w-3 mr-1"}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]}),e.jsxs(w,{variant:"outline",className:r(s.difficulty),children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1)]}),e.jsxs(w,{variant:"outline",children:[s.type==="individual"&&"👤",s.type==="group"&&"👥",s.type==="community"&&"🌍",e.jsx("span",{className:"ml-1 capitalize",children:s.type})]})]})]}),e.jsxs(x,{className:"space-y-4",children:[s.is_participating&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Your Progress"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.current_progress,"/",s.target_value]})]}),e.jsx(V,{value:i,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[i.toFixed(0),"% Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Reward:"}),e.jsxs("span",{className:"font-medium",children:[s.points_reward," pts"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Participants:"}),e.jsx("span",{className:"font-medium",children:s.participants_count.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[s.duration_days," days"]})]}),s.status==="active"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"font-medium text-orange-600",children:g()})]})]}),s.badge_reward&&e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(je,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Special Badge:"}),e.jsx("span",{className:"font-medium",children:s.badge_reward})]})}),s.special_unlock&&e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ee,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Unlocks:"}),e.jsx("span",{className:"font-medium text-purple-700",children:s.special_unlock})]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[!s.is_participating&&s.status==="active"&&e.jsx(S,{onClick:()=>l==null?void 0:l(s.id),disabled:c,className:"flex-1",children:c?"Joining...":"Join Challenge"}),s.is_participating&&s.status==="active"&&e.jsxs(w,{variant:"default",className:"flex-1 justify-center py-2",children:[e.jsx(Be,{className:"h-3 w-3 mr-1"}),"Participating"]}),s.status==="upcoming"&&e.jsxs(S,{variant:"outline",className:"flex-1",disabled:!0,children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Starts ",new Date(s.starts_at).toLocaleDateString()]}),s.status==="completed"&&e.jsxs(w,{variant:"secondary",className:"flex-1 justify-center py-2",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Completed"]}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>a==null?void 0:a(s),children:"Details"})]}),s.leaderboard&&s.leaderboard.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-yellow-500"}),"Top Participants"]}),e.jsx("div",{className:"space-y-1",children:s.leaderboard.slice(0,3).map((n,C)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:["#",n.rank]}),e.jsx("span",{children:n.username})]}),e.jsx("span",{className:"font-medium text-primary",children:n.score.toLocaleString()})]},n.user_id))})]})]})]})},Ts=({challenge:s,onJoin:l})=>{const a=s.target_value>0?Math.min(s.current_progress/s.target_value*100,100):0;return e.jsx(m,{className:"border-primary/20",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]}),e.jsx(w,{className:U("text-xs",Ds(s.status)),children:s.status})]}),s.is_participating&&e.jsxs("div",{className:"mb-3",children:[e.jsx(V,{value:a,className:"h-1 mb-1"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.current_progress,"/",s.target_value]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.points_reward," pts"]}),!s.is_participating&&s.status==="active"&&e.jsx(S,{size:"sm",variant:"outline",onClick:()=>l==null?void 0:l(s.id),children:"Join"})]})]})})},Ds=s=>{switch(s){case"active":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";case"expired":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Is=()=>{const{user:s}=Ge(),[l,a]=d.useState("overview"),{userStats:c,achievements:r,leaderboards:y,socialActivity:g,challenges:i,loading:n,error:C,levelProgress:p,unlockedAchievements:T,availableAchievements:N,recentAchievements:B,activeChallenges:f,availableChallenges:h,joinChallenge:o}=vs();return s?n?e.jsx("div",{className:"space-y-6",children:Array.from({length:3}).map((j,v)=>e.jsx(m,{className:"animate-pulse",children:e.jsxs(x,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-20 bg-muted rounded"})]})},v))}):C?e.jsx(m,{children:e.jsxs(x,{className:"p-6 text-center",children:[e.jsxs("p",{className:"text-destructive mb-4",children:["Error loading gamification data: ",C]}),e.jsx(S,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):e.jsxs("div",{className:"space-y-6",children:[c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(m,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(F,{className:"h-6 w-6 mx-auto mb-2"}),e.jsxs("div",{className:"text-2xl font-bold",children:["Level ",c.level]}),e.jsxs("div",{className:"text-xs opacity-80",children:[c.total_points.toLocaleString()," points"]})]})}),e.jsx(m,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(J,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:c.destinations_collected}),e.jsx("div",{className:"text-xs opacity-80",children:"Dream Destinations"})]})}),e.jsx(m,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(je,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:c.achievements_unlocked}),e.jsx("div",{className:"text-xs opacity-80",children:"Achievements"})]})}),e.jsx(m,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(ye,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:c.current_streak}),e.jsx("div",{className:"text-xs opacity-80",children:"Day Streak"})]})})]}),e.jsxs(we,{value:l,onValueChange:a,className:"w-full",children:[e.jsxs(_e,{className:"grid w-full grid-cols-5",children:[e.jsx(R,{value:"overview",children:"Overview"}),e.jsx(R,{value:"achievements",children:"Achievements"}),e.jsx(R,{value:"leaderboards",children:"Leaderboards"}),e.jsx(R,{value:"challenges",children:"Challenges"}),e.jsx(R,{value:"social",children:"Activity"})]}),e.jsx(L,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:c&&e.jsx(ys,{stats:c,levelProgress:p})}),e.jsxs("div",{className:"space-y-4",children:[B.length>0&&e.jsxs(m,{children:[e.jsx(E,{className:"pb-3",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-yellow-500"}),"Recent Achievements"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-2",children:B.slice(0,3).map(j=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-lg",children:j.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:j.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.points_value," points"]})]})]},j.id))})})]}),y.length>0&&e.jsx(ze,{entries:y[0].entries.slice(0,3),title:"Global Ranking"}),f.length>0&&e.jsxs(m,{children:[e.jsx(E,{className:"pb-3",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-green-500"}),"Active Challenges"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:f.slice(0,2).map(j=>e.jsx(Ts,{challenge:j},j.id))})})]})]})]})}),e.jsxs(L,{value:"achievements",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Your Achievements"}),e.jsxs("p",{className:"text-muted-foreground",children:[T.length," unlocked • ",N.length," available"]})]}),e.jsxs(w,{variant:"outline",className:"bg-primary/10",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),(c==null?void 0:c.achievements_unlocked)||0," Achievements"]})]}),e.jsxs(we,{defaultValue:"all",className:"w-full",children:[e.jsxs(_e,{children:[e.jsx(R,{value:"all",children:"All"}),e.jsx(R,{value:"unlocked",children:"Unlocked"}),e.jsx(R,{value:"available",children:"Available"}),e.jsx(R,{value:"explorer",children:"Explorer"}),e.jsx(R,{value:"social",children:"Social"})]}),e.jsx(L,{value:"all",children:e.jsx(ue,{achievements:r})}),e.jsx(L,{value:"unlocked",children:e.jsx(ue,{achievements:T})}),e.jsx(L,{value:"available",children:e.jsx(ue,{achievements:N})}),e.jsx(L,{value:"explorer",children:e.jsx(ue,{achievements:r.filter(j=>j.category==="explorer")})}),e.jsx(L,{value:"social",children:e.jsx(ue,{achievements:r.filter(j=>j.category==="social")})})]})]}),e.jsxs(L,{value:"leaderboards",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Leaderboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Compete with travelers worldwide"})]}),c&&e.jsxs(w,{variant:"outline",className:"bg-primary/10",children:[e.jsx(fe,{className:"h-3 w-3 mr-1"}),"Rank #",c.exploration_rank.toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.map(j=>e.jsx(_s,{leaderboard:j,maxEntries:10},j.id))})]}),e.jsxs(L,{value:"challenges",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Travel Challenges"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete challenges to earn points and unlock rewards"})]}),e.jsxs(w,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),f.length," Active"]})]}),f.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5 text-orange-500"}),"Your Active Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(j=>e.jsx(Ue,{challenge:j},j.id))})]}),h.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-blue-500"}),"Available Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(j=>e.jsx(Ue,{challenge:j,onJoin:o},j.id))})]}),i.length===0&&e.jsx(m,{children:e.jsxs(x,{className:"p-12 text-center",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Challenges Available"}),e.jsx("p",{className:"text-muted-foreground",children:"Check back later for exciting travel challenges!"})]})})]}),e.jsxs(L,{value:"social",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Social Activity"}),e.jsx("p",{className:"text-muted-foreground",children:"See what your travel buddies are up to"})]}),e.jsxs(S,{variant:"outline",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Find Friends"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ss,{activities:g})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Cs,{activities:g,maxItems:5}),y.length>0&&e.jsx(ze,{entries:y[0].entries,title:"Top This Week"})]})]})]})]})]}):e.jsx(m,{children:e.jsxs(x,{className:"p-12 text-center",children:[e.jsx(D,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Join the Community!"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Sign in to unlock achievements, compete on leaderboards, and connect with fellow travelers."}),e.jsx(S,{onClick:()=>window.location.href="/auth",children:"Sign In to Play"})]})})},Ps=()=>{const[s,l]=d.useState(null),[a,c]=d.useState(!1),[r,y]=d.useState(null),[g,i]=d.useState([]),n=d.useCallback(async f=>{try{c(!0),y(null),ne.info("Starting Smart Dreams provider search",{companionType:f.companionType,destination:f.destination});const h="https://maku-travel-ai.preview.emergentagent.com",o={companion_type:f.companionType,travel_dna:f.travelDNA,destination:f.destination,date_range:f.dateRange?{start:f.dateRange.start.toISOString(),end:f.dateRange.end.toISOString()}:null,budget:f.budget,preferences:f.preferences},j=await fetch(`${h}/api/smart-dreams/provider-search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!j.ok)throw new Error(`Provider search failed: ${j.status} ${j.statusText}`);const v=await j.json();if(v.error)throw new Error(v.error);const I={hotels:v.hotels.map(u=>({id:u.id,name:u.name,provider:u.provider,price:u.price,rating:u.rating,aiConfidenceScore:u.ai_confidence_score,personalityMatch:u.personality_match,companionSuitability:u.companion_suitability,dreamDestinationMatch:u.dream_destination_match,recommendationReasons:u.recommendation_reasons,location:u.location,amenities:u.amenities})),flights:v.flights.map(u=>({id:u.id,provider:u.provider,price:u.price,duration:u.duration,aiOptimizationScore:u.ai_optimization_score,journeyFlow:u.journey_flow,airline:u.airline,companions:u.companions,route:u.route,departureTime:u.departure_time,arrivalTime:u.arrival_time})),activities:v.activities.map(u=>({id:u.id,name:u.name,provider:u.provider,price:u.price,personalityAlignment:u.personality_alignment,companionMatch:u.companion_match,experienceType:u.experience_type,aiRecommendationRank:u.ai_recommendation_rank,duration:u.duration,category:u.category,description:u.description,highlights:u.highlights})),aggregatedInsights:{totalOptions:v.aggregated_insights.total_options,avgPersonalityMatch:v.aggregated_insights.avg_personality_match,topRecommendationProvider:v.aggregated_insights.top_recommendation_provider,aiProcessingTime:v.aggregated_insights.ai_processing_time,cacheHitRate:v.aggregated_insights.cache_hit_rate,companionOptimization:v.aggregated_insights.companion_optimization},searchMetadata:{companionType:v.search_metadata.companion_type,destination:v.search_metadata.destination,searchTimestamp:v.search_metadata.search_timestamp,providersQueried:v.search_metadata.providers_queried,aiEnhancementEnabled:v.search_metadata.ai_enhancement_enabled}};return l(I),i(u=>[f,...u.slice(0,9)]),ne.info("Smart Dreams provider search completed successfully",{totalResults:I.aggregatedInsights.totalOptions,processingTime:I.aggregatedInsights.aiProcessingTime,topProvider:I.aggregatedInsights.topRecommendationProvider}),I}catch(h){const o=h instanceof Error?h.message:"Provider search failed";return y(o),ne.error("Smart Dreams provider search failed",h),null}finally{c(!1)}},[]),C=d.useCallback(()=>{l(null),y(null)},[]),p=d.useCallback(()=>{i([])},[]),T=d.useCallback((f,h=5)=>{if(!s)return[];switch(f){case"hotels":return s.hotels.sort((o,j)=>j.aiConfidenceScore-o.aiConfidenceScore).slice(0,h);case"flights":return s.flights.sort((o,j)=>j.aiOptimizationScore-o.aiOptimizationScore).slice(0,h);case"activities":return s.activities.sort((o,j)=>j.aiRecommendationRank-o.aiRecommendationRank).slice(0,h);default:return[]}},[s]),N=d.useCallback(f=>s?{hotels:s.hotels.filter(h=>h.companionSuitability>80),flights:s.flights.filter(h=>h.companions[f]>80),activities:s.activities.filter(h=>h.companionMatch>80)}:{hotels:[],flights:[],activities:[]},[s]),B=d.useCallback(()=>{if(!s)return{};const f={};return[...s.hotels,...s.flights,...s.activities].forEach(h=>{f[h.provider]||(f[h.provider]={hotels:0,flights:0,activities:0,avgScore:0})}),s.hotels.forEach(h=>{f[h.provider].hotels++}),s.flights.forEach(h=>{f[h.provider].flights++}),s.activities.forEach(h=>{f[h.provider].activities++}),Object.keys(f).forEach(h=>{const o=[...s.hotels.filter(v=>v.provider===h),...s.flights.filter(v=>v.provider===h),...s.activities.filter(v=>v.provider===h)],j=o.reduce((v,I)=>{const u=I.aiConfidenceScore||I.aiOptimizationScore||I.aiRecommendationRank||0;return v+u},0);f[h].avgScore=o.length>0?Math.round(j/o.length):0}),f},[s]);return{results:s,loading:a,error:r,searchHistory:g,searchProviders:n,clearResults:C,clearSearchHistory:p,getTopRecommendations:T,getRecommendationsByCompanion:N,getProviderStats:B,hasResults:!!s,totalResults:(s==null?void 0:s.aggregatedInsights.totalOptions)||0,aiProcessingTime:(s==null?void 0:s.aggregatedInsights.aiProcessingTime)||0,topProvider:s==null?void 0:s.aggregatedInsights.topRecommendationProvider}},Ye="https://maku-travel-ai.preview.emergentagent.com",Rs=(s,l,a)=>Je.post(`${Ye}/smart-dreams-v2/score-batch`,{destinations:s,user_preferences:l,user_context:a}).then(c=>c.data),Ls=(s,l,a)=>Je.post(`${Ye}/smart-dreams-v2/search-with-rotation`,{service_type:s,search_criteria:l,correlation_id:a}).then(c=>c.data);async function Es(s){var c,r,y,g,i,n,C,p,T;const l=`sd_${Date.now()}_${gs()}`,a={destination:s.destination||"Paris",check_in:(r=(c=s.dateRange)==null?void 0:c.start)==null?void 0:r.toISOString(),check_out:(g=(y=s.dateRange)==null?void 0:y.end)==null?void 0:g.toISOString(),guests:s.companionType==="family"?4:s.companionType==="friends"?3:2,budget:s.budget};try{const N=await Ls("hotels",a,l);if(!N.success||!N.results)return{hotels:[],searchMetadata:{correlationId:l,error:N.error||"No results from providers",rotationLog:N.rotation_log||[]},aggregatedInsights:{}};const B={budget:((i=s.budget)==null?void 0:i.max)||5e3,interests:s.preferences||[],companion:s.companionType,travelStyle:"balanced",duration:s.dateRange?Math.ceil((s.dateRange.end.getTime()-s.dateRange.start.getTime())/(1e3*60*60*24)):7},f={travelDNA:s.travelDNA||"Explorer",nftTier:"Gold"},h=await Rs(N.results||[],B,f);return{hotels:(h.destinations||[]).map(o=>({id:o.id||`hotel_${Math.random().toString(36).substr(2,9)}`,name:o.name||o.hotel_name||"Hotel",location:o.location||s.destination||"",price:o.price||0,rating:o.rating||0,aiConfidenceScore:o.personality_match||0,companionSuitability:o.companion_suitability||0,recommendationReasons:o.match_reasons||[],provider:N.provider_used||"unknown",isDreamDestination:o.is_dream_destination||!1,budgetFit:o.budget_fit||"good",interestAlignment:o.interest_alignment||0,scoringMethod:o.scoring_method||"deterministic"})),searchMetadata:{correlationId:l,rotationLog:N.rotation_log||[],providersQueried:((n=N.rotation_log)==null?void 0:n.map(o=>o.provider))||[],providerUsed:N.provider_used,providerType:N.provider_type,aiProcessingTime:0},aggregatedInsights:{totalResults:h.total_count||0,aiScoredCount:h.ai_scored_count||0,avgPersonalityMatch:((C=h.destinations)==null?void 0:C.reduce((o,j)=>o+(j.personality_match||0),0))/(((p=h.destinations)==null?void 0:p.length)||1)||0,dreamDestinationsCount:((T=h.destinations)==null?void 0:T.filter(o=>o.is_dream_destination).length)||0}}}catch(N){return console.error("Smart Dreams V2 search error:",N),{hotels:[],searchMetadata:{correlationId:l,error:N.message||"Search failed",rotationLog:[]},aggregatedInsights:{}}}}const $s=()=>{var Ie,Pe,Re,Le,Ee;const[s,l]=d.useState("my-journey"),[a,c]=d.useState(null),[r,y]=d.useState(null),[g,i]=d.useState(85),[n,C]=d.useState(""),[p,T]=d.useState(!0),[N,B]=d.useState(!1),[f,h]=d.useState(!1),[o,j]=d.useState(null),[v,I]=d.useState(null),[u,oe]=d.useState(!1),{toast:_}=Ce(),O=Qe();us({includeAIContext:!0});const{travelDNA:H,intelligentRecommendations:W,predictiveInsights:de,loading:Z,analyzeTravelDNA:me,getIntelligentRecommendations:se,getPredictiveInsights:q}=Oe(),{results:G,loading:xe,searchProviders:b,getTopRecommendations:k,hasResults:A,totalResults:Y}=Ps(),re=[{type:"solo",name:"Solo Adventure",description:"Just me, my dreams, and endless possibilities",icon:e.jsx(ps,{className:"h-8 w-8 text-purple-500"}),perks:["Complete freedom","Self-discovery"],journeyType:"Soul Quest"},{type:"partner",name:"Romantic Journey",description:"Creating magical memories with my special someone",icon:e.jsx(K,{className:"h-8 w-8 text-pink-500"}),perks:["Romantic moments","Shared experiences"],journeyType:"Love Story"},{type:"friends",name:"Squad Adventure",description:"Epic adventures with my favorite people",icon:e.jsx(D,{className:"h-8 w-8 text-blue-500"}),perks:["Shared costs","Group activities"],journeyType:"Friendship Quest"},{type:"family",name:"Family Bonding",description:"Building precious family moments together",icon:e.jsx(fs,{className:"h-8 w-8 text-green-500"}),perks:["Family bonding","Kid-friendly fun"],journeyType:"Family Saga"}],X=[{id:"bali-indonesia",name:"Bali",country:"Indonesia",image:"https://images.pexels.com/photos/261204/pexels-photo-261204.jpeg",price:95,days:7,excitement:92,perfectFor:["Solo soul searching","Romantic getaways"]},{id:"tokyo-japan",name:"Tokyo",country:"Japan",image:"https://images.unsplash.com/photo-1698923824953-a0bf7462e79d?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NTY2NzV8MHwxfHNlYXJjaHwyfHxsdXh1cnklMjB0cmF2ZWwlMjBkZXN0aW5hdGlvbnN8ZW58MHx8fHwxNzU4MzAxMjQ2fDA&ixlib=rb-4.1.0&q=85",price:180,days:5,excitement:95,perfectFor:["Cultural exploration","Food adventures"]},{id:"santorini-greece",name:"Santorini",country:"Greece",image:"https://images.unsplash.com/photo-1552873547-b88e7b2760e2?crop=entropy&cs=srgb&fm=jpg",price:220,days:6,excitement:98,perfectFor:["Romantic escapes","Photography lovers"]}],Ne=async t=>{var P,be;const M={id:`journey_${Date.now()}`,title:n||`My ${t.journeyType}`,companion:t,destinations:[],totalDays:0,totalBudget:0,progress:10,excitement:g,achievements:["Journey Starter"]};if(y(M),c(t),p)try{h(!0),I(null);const Q=await Es({companionType:t.type==="partner"?"romantic":t.type,travelDNA:H,preferences:t.perks,destination:n||"Singapore"});j(Q),await b({companionType:t.type==="partner"?"romantic":t.type,travelDNA:H,preferences:t.perks})}catch(Q){console.error("Smart Dreams V2 search failed:",Q),I((Q==null?void 0:Q.message)||"Search failed"),(be=(P=Q==null?void 0:Q.response)==null?void 0:P.data)!=null&&be.correlation_id&&console.log(`Correlation ID: ${Q.response.data.correlation_id}`)}finally{h(!1)}l("dream-destinations")},ie=t=>{if(!r)return;const M={...r,destinations:[...r.destinations,t],totalDays:r.totalDays+t.days,totalBudget:r.totalBudget+t.price*t.days,progress:Math.min(r.progress+25,100),achievements:[...r.achievements,"Dream Collector"]};y(M),i(Math.min(g+5,100)),alert(`🎉 ${t.name} added to your journey! Excitement level: ${g+5}%`)},We=()=>{if(!r)return;const t=`🌟 I'm planning my ${r.title}! ${r.destinations.length} amazing destinations, ${r.totalDays} days of adventure. Join me! 🗺️✈️`;navigator.share?navigator.share({title:r.title,text:t,url:window.location.href}):(navigator.clipboard.writeText(t),alert("Journey details copied to clipboard! 📋"))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-orange-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-green-500 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold",children:"M"})}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Maku"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-3 bg-orange-50 px-4 py-2 rounded-full border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full animate-pulse shadow-sm"}),e.jsxs("span",{className:"text-sm font-medium text-orange-700",children:["AI Match: ",H?Math.round(H.confidence_score*100):0,"%"]})]}),e.jsx("div",{className:"w-px h-4 bg-orange-200"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Excitement: ",g,"%"]})]}),e.jsx("div",{className:"w-px h-4 bg-orange-200"}),e.jsxs("button",{onClick:()=>T(!p),className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium transition-all duration-200 ${p?"bg-green-100 text-green-700 hover:bg-green-200":"bg-white text-gray-600 hover:bg-gray-200"}`,"aria-label":`AI is currently ${p?"enabled":"disabled"}`,children:[e.jsx(te,{className:`h-3 w-3 ${p?"text-green-500":"text-gray-400"}`}),e.jsxs("span",{children:["AI ",p?"On":"Off"]})]})]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(we,{value:s,onValueChange:l,className:"w-full",children:[e.jsxs(_e,{className:"grid w-full grid-cols-6 bg-white shadow-sm border border-orange-100 rounded-xl p-1",children:[e.jsxs(R,{value:"my-journey",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Journey"})]}),e.jsxs(R,{value:"dream-destinations",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Dreams"}),G&&e.jsx("div",{className:"ml-1 bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full font-medium",children:G.hotels.length+G.flights.length+G.activities.length})]}),e.jsxs(R,{value:"ai-intelligence",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"AI DNA"}),H&&e.jsxs("div",{className:"ml-1 bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full font-medium",children:[Math.round(H.confidence_score*100),"%"]})]}),e.jsxs(R,{value:"achievements",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Achievements"})]}),e.jsxs(R,{value:"social-hub",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Social"})]}),e.jsxs(R,{value:"planner",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Plan"})]})]}),e.jsx(L,{value:"my-journey",className:"space-y-8 mt-8",children:r?e.jsxs("div",{className:"space-y-8",children:[e.jsx(m,{className:"bg-white shadow-lg border border-green-200 rounded-2xl overflow-hidden",children:e.jsxs(x,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-green-500 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold",children:"M"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:r.title}),e.jsx("p",{className:"text-gray-600",children:a==null?void 0:a.description})]})]}),e.jsxs(S,{className:"bg-gradient-to-r from-orange-500 via-green-500 to-orange-500 hover:from-orange-600 hover:via-green-600 hover:to-orange-600 text-white font-semibold py-2 px-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",onClick:We,children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Share Journey"]})]}),e.jsxs("div",{className:"mb-6 bg-orange-50 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-800 font-semibold",children:"Journey Progress"}),e.jsxs("span",{className:"text-orange-600 font-medium",children:[r.progress,"% Complete"]})]}),e.jsx(V,{value:r.progress,className:"h-3 bg-orange-100"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.destinations.length}),e.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"Dreams Added"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl border border-green-100",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.totalDays}),e.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Total Days"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl border border-yellow-100",children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:["$",r.totalBudget]}),e.jsx("div",{className:"text-sm text-yellow-700 font-medium",children:"Estimated Cost"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl border border-green-100",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[g,"%"]}),e.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Excitement Level"})]})]}),e.jsx(m,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200 mt-6",children:e.jsxs(x,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-purple-600"}),"Turn Your Dream Into Savings Goal"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Create a travel fund to make this $",r.totalBudget," journey a reality"]})]}),e.jsxs(S,{onClick:()=>B(!0),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Create Fund"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Goal"}),e.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["$",Math.round(r.totalBudget/12)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Timeline"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:"12 months"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NFT Rewards"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:"4+ NFTs"})]})]})]})})]})}),e.jsx(bs,{dreamData:{destination:((Ie=r.destinations[0])==null?void 0:Ie.name)||"Dream Destination",travelStyle:(a==null?void 0:a.type)||"adventure",duration:r.totalDays,companions:(a==null?void 0:a.type)==="solo"?0:1,budget:r.totalBudget,dreamName:n||r.title,travelDates:{start:new Date(Date.now()+365*24*60*60*1e3),end:new Date(Date.now()+365*24*60*60*1e3+r.totalDays*24*60*60*1e3)}},open:N,onOpenChange:B,onFundCreated:t=>{_({title:"Dream fund created!",description:"Your savings journey begins now. Start contributing today!"}),O("/travel-fund")}}),r.destinations.length>0&&e.jsxs(m,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[e.jsx(E,{children:e.jsxs($,{className:"text-white flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-purple-400"}),e.jsx("span",{children:"My Dream Destinations"})]})}),e.jsx(x,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.destinations.map((t,M)=>e.jsxs(m,{className:"bg-white/5 border-white/10 overflow-hidden",children:[e.jsx("div",{className:"h-32",children:e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs(x,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:t.name}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-purple-300",children:[t.days," days"]}),e.jsxs("span",{className:"text-blue-300",children:["$",t.price,"/day"]})]})]})]},M))})})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(m,{className:"bg-white shadow-lg border border-orange-100 rounded-2xl",children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-green-500 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"M"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"What's your dream journey called?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Give your adventure a memorable name"}),e.jsx(ge,{placeholder:"My Epic Adventure, Honeymoon Bliss, Squad Goals Trip...",value:n,onChange:t=>C(t.target.value),className:"text-center text-xl bg-orange-50 border-orange-200 text-gray-800 placeholder:text-gray-500 focus:border-orange-400 focus:ring-orange-400 rounded-full py-4 px-6"})]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Who's joining your adventure?"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Choose your travel style and unlock personalized AI recommendations"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:re.map(t=>e.jsx(m,{className:"group cursor-pointer bg-white shadow-lg border border-orange-100 hover:border-orange-300 hover:shadow-xl transition-all duration-300 hover:scale-105 rounded-2xl overflow-hidden",onClick:()=>Ne(t),children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx("div",{className:"mb-6 transform group-hover:scale-110 transition-transform duration-300",children:t.icon}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:t.journeyType}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:t.description}),e.jsx("div",{className:"space-y-2 mb-6",children:t.perks.map((M,P)=>e.jsx(w,{className:"bg-orange-100 text-orange-700 border-orange-200 text-xs px-3 py-1 rounded-full font-medium",children:M},P))}),e.jsx(S,{className:"w-full bg-gradient-to-r from-orange-500 via-green-500 to-orange-500 hover:from-orange-600 hover:via-green-600 hover:to-orange-600 text-white font-semibold py-2 px-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",onClick:()=>Ne(t),children:e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"Start Journey"}),e.jsx(ae,{className:"h-4 w-4"})]})})]})},t.type))})]})}),e.jsxs(L,{value:"dream-destinations",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Build Your Dream Collection"}),e.jsx("p",{className:"text-purple-200",children:"Add destinations that spark joy and excitement in your journey"}),p&&W.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs(w,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),W.length," AI-Recommended Destinations Available"]})})]}),p&&W.length>0&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 via-purple-900/50 to-pink-900/50 border border-blue-500/30 backdrop-blur-xl rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5 text-blue-400"}),e.jsx("span",{children:"AI-Powered Perfect Matches"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.slice(0,3).map((t,M)=>e.jsx(m,{className:"bg-black/40 backdrop-blur-xl border-white/10 hover:border-blue-400/50 transition-all duration-500",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-white",children:t.destination_name}),e.jsxs(w,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[t.recommendation_score,"% Match"]})]}),e.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:[t.country,", ",t.continent]}),t.recommendation_reasons.slice(0,1).map((P,be)=>e.jsx("p",{className:"text-blue-300 text-xs mb-3",children:P.reason_text},be)),e.jsxs(S,{onClick:()=>{const P={id:`ai-${t.destination_name.toLowerCase().replace(" ","-")}`,name:t.destination_name,country:t.country,image:X[M%X.length].image,price:t.estimated_budget||120,days:t.recommended_duration||5,excitement:t.recommendation_score,perfectFor:["AI Recommended","Perfect Match"]};ie(P)},className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white text-sm",disabled:!r,children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Add AI Match"]})]})},M))})]})}),A&&p&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 via-purple-900/50 to-pink-900/50 border border-purple-500/30 backdrop-blur-xl rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-2 flex items-center space-x-2",children:[e.jsx(He,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{children:"Enhanced Provider Recommendations"})]}),e.jsxs("p",{className:"text-purple-200 text-sm",children:[Y," personalized options from ",G==null?void 0:G.searchMetadata.providersQueried.join(", "),"• ",Math.round((G==null?void 0:G.aggregatedInsights.aiProcessingTime)||0),"ms AI processing"]})]}),xe&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400"}),e.jsx("span",{className:"text-sm",children:"Enhancing results..."})]})]}),f&&e.jsxs("div",{className:"flex items-center space-x-3 p-6 bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border border-yellow-500/30 rounded-xl mb-6",children:[e.jsx(Ve,{className:"h-5 w-5 animate-spin text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-100",children:"Finding Best Providers & Scoring with AI..."}),e.jsx("p",{className:"text-sm text-yellow-300/80",children:"Using provider rotation + ChatGPT Pro analysis"})]})]}),v&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-xl mb-6",children:[e.jsx("p",{className:"text-sm text-red-300",children:v}),((Pe=o==null?void 0:o.searchMetadata)==null?void 0:Pe.correlationId)&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Correlation ID: ",o.searchMetadata.correlationId]})]}),(o==null?void 0:o.hotels)&&o.hotels.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-pink-400"}),e.jsx("span",{children:"AI-Scored Hotels"})]}),e.jsxs(w,{className:"bg-green-900/50 text-green-300 border border-green-500/30",children:[((Re=o.searchMetadata)==null?void 0:Re.providerUsed)||"Provider"," • ",((Le=o.aggregatedInsights)==null?void 0:Le.aiScoredCount)||0," AI-scored"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.hotels.slice(0,3).map((t,M)=>e.jsx(m,{className:"bg-black/40 backdrop-blur-xl border-white/10 hover:border-pink-400/50 transition-all duration-300",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-bold text-white text-sm",children:t.name}),e.jsxs(w,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white text-xs",children:[Math.min(100,Math.round(t.aiConfidenceScore)),"% AI Match"]})]}),e.jsx("p",{className:"text-gray-300 text-xs mb-2",children:t.location}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-pink-400 font-bold",children:["$",t.price,"/night"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-3 w-3 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-yellow-400 text-xs ml-1",children:t.rating||4.5})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Companion: ",Math.min(100,Math.round(t.companionSuitability||0)),"%"]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-1 rounded-full",style:{width:`${Math.min(100,t.companionSuitability||0)}%`}})})]}),t.recommendationReasons&&t.recommendationReasons.length>0&&e.jsx("div",{className:"text-xs text-blue-300 mb-3",children:t.recommendationReasons.slice(0,2).join(" • ")}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(w,{variant:"outline",className:"text-xs border-gray-600 text-gray-400",children:["From: ",t.provider]}),t.isDreamDestination&&e.jsxs(w,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-xs",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Dream"]})]}),e.jsxs(S,{onClick:()=>{const P={id:t.id,name:t.location,country:t.location,image:X[M%X.length].image,price:t.price,days:3,excitement:t.aiConfidenceScore,perfectFor:t.recommendationReasons||["Smart Match"]};ie(P)},className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white text-xs",disabled:!r,children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Add to Journey"]})]})},t.id))}),((Ee=o.searchMetadata)==null?void 0:Ee.correlationId)&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Search ID: ",o.searchMetadata.correlationId]})]}),!o&&k("hotels",3).length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-pink-400"}),e.jsx("span",{children:"Smart Hotel Matches"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:k("hotels",3).map((t,M)=>e.jsx(m,{className:"bg-black/40 backdrop-blur-xl border-white/10 hover:border-pink-400/50 transition-all duration-300",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-bold text-white text-sm",children:t.name}),e.jsxs(w,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white text-xs",children:[t.aiConfidenceScore,"% AI Match"]})]}),e.jsx("p",{className:"text-gray-300 text-xs mb-2",children:t.location}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-pink-400 font-bold",children:["$",t.price,"/night"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-3 w-3 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-yellow-400 text-xs ml-1",children:t.rating})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Companion Match: ",t.companionSuitability,"%"]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-1 rounded-full",style:{width:`${t.companionSuitability}%`}})})]}),e.jsxs(S,{onClick:()=>{const P={id:t.id,name:t.location,country:t.location,image:X[M%X.length].image,price:t.price,days:3,excitement:t.aiConfidenceScore,perfectFor:t.recommendationReasons};ie(P)},className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white text-xs",disabled:!r,children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Add to Journey"]})]})},t.id))})]}),k("activities",2).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center space-x-2",children:[e.jsx(le,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{children:"Curated Experiences"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k("activities",2).map(t=>e.jsx(m,{className:"bg-black/40 backdrop-blur-xl border-white/10 hover:border-blue-400/50 transition-all duration-300",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-bold text-white text-sm",children:t.name}),e.jsxs(w,{className:"bg-gradient-to-r from-blue-500 to-green-500 text-white text-xs",children:["Rank #",t.aiRecommendationRank]})]}),e.jsx("p",{className:"text-gray-300 text-xs mb-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-blue-400 font-bold",children:["$",t.price]}),e.jsx("span",{className:"text-gray-400 text-xs",children:t.duration})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Experience Match: ",t.companionMatch,"%"]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-1 rounded-full",style:{width:`${t.companionMatch}%`}})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:t.highlights.slice(0,2).map((M,P)=>e.jsx(w,{variant:"outline",className:"bg-white/5 border-white/20 text-white text-xs",children:M},P))}),e.jsxs(S,{className:"w-full bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white text-xs",disabled:!r,children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Add Experience"]})]})},t.id))})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:X.map(t=>e.jsxs(m,{className:"group overflow-hidden bg-black/40 backdrop-blur-xl border-white/10 hover:border-purple-400/50 transition-all duration-500 hover:scale-[1.02]",children:[e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs(w,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-lg font-bold",children:[t.excitement,"% ✨"]})}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:t.name}),e.jsxs("p",{className:"text-purple-200 flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),t.country]})]})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["$",t.price]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["per day • ",t.days," days"]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Perfect for:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.perfectFor.map((M,P)=>e.jsx(w,{variant:"outline",className:"bg-white/5 border-white/20 text-white text-xs",children:M},P))})]}),e.jsxs(S,{onClick:()=>ie(t),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",disabled:!r,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),r?"Add to My Journey":"Start Journey First"]})]})]},t.id))})]}),e.jsxs(L,{value:"ai-intelligence",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Your Travel DNA & AI Insights"}),e.jsx("p",{className:"text-purple-200",children:"Discover your unique travel personality and get personalized recommendations"})]}),p?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(ds,{travelDNA:H,loading:Z,onRefresh:me})}),e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(ms,{recommendations:W,loading:Z,onRefresh:se})}),e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(xs,{insights:de,loading:Z,onRefresh:q})}),e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(hs,{})})]}):e.jsx(m,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:e.jsxs(x,{className:"p-12 text-center",children:[e.jsx(pe,{className:"h-24 w-24 mx-auto mb-6 text-gray-400"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"AI Intelligence Disabled"}),e.jsx("p",{className:"text-gray-300 mb-6 max-w-2xl mx-auto",children:"Enable AI Intelligence to unlock personalized travel recommendations, DNA analysis, and predictive insights."}),e.jsxs(S,{onClick:()=>T(!0),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8 py-3 text-lg",children:[e.jsx(pe,{className:"h-5 w-5 mr-2"}),"Enable AI Intelligence"]})]})})]}),e.jsxs(L,{value:"achievements",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Your Travel Achievements"}),e.jsx("p",{className:"text-purple-200",children:"Unlock badges, earn points, and level up your journey"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(m,{className:"bg-gradient-to-r from-yellow-900/50 to-orange-900/50 border-yellow-500/30 backdrop-blur-xl text-center",children:e.jsxs(x,{className:"p-6",children:[e.jsx(fe,{className:"h-12 w-12 mx-auto mb-4 text-yellow-400"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:(r==null?void 0:r.achievements.length)||0}),e.jsx("div",{className:"text-yellow-200 text-sm",children:"Badges Earned"})]})}),e.jsx(m,{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 border-purple-500/30 backdrop-blur-xl text-center",children:e.jsxs(x,{className:"p-6",children:[e.jsx(ee,{className:"h-12 w-12 mx-auto mb-4 text-purple-400"}),e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:((r==null?void 0:r.achievements.length)||0)*250}),e.jsx("div",{className:"text-purple-200 text-sm",children:"Total Points"})]})}),e.jsx(m,{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 border-blue-500/30 backdrop-blur-xl text-center",children:e.jsxs(x,{className:"p-6",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-4 text-blue-400"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:["Level ",Math.floor(((r==null?void 0:r.achievements.length)||0)/2)+1]}),e.jsx("div",{className:"text-blue-200 text-sm",children:"Dream Explorer"})]})}),e.jsx(m,{className:"bg-gradient-to-r from-green-900/50 to-teal-900/50 border-green-500/30 backdrop-blur-xl text-center",children:e.jsxs(x,{className:"p-6",children:[e.jsx(De,{className:"h-12 w-12 mx-auto mb-4 text-green-400"}),e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[g,"%"]}),e.jsx("div",{className:"text-green-200 text-sm",children:"Excitement"})]})})]}),r&&r.achievements.length>0&&e.jsxs(m,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[e.jsx(E,{children:e.jsx($,{className:"text-white",children:"Your Achievements"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:r.achievements.map((t,M)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white/5 rounded-xl",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full",children:e.jsx(F,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white",children:t}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Congratulations on this milestone!"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"+250"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"points"})]})]},M))})})]})]}),e.jsx(L,{value:"social-hub",className:"space-y-8 mt-8",children:e.jsx(Is,{})}),e.jsxs(L,{value:"planner",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Plan Together"}),e.jsx("p",{className:"text-purple-200",children:"Collaborate with friends, family, or your travel companions"})]}),e.jsx(m,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(D,{className:"h-24 w-24 mx-auto mb-6 text-purple-400"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Collaborative Travel Planning"}),e.jsx("p",{className:"text-gray-300 mb-6 max-w-2xl mx-auto",children:"Invite your travel companions to vote on destinations, pool budgets with Travel Fund, share Smart Dreams, and build your perfect journey together."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(S,{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8 py-3 text-lg",onClick:()=>O("/collaborative-planning"),children:[e.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Planning Together"]}),e.jsxs(S,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10 px-8 py-3 text-lg",onClick:()=>O("/travel-fund"),children:[e.jsx($e,{className:"h-5 w-5 mr-2"}),"Pool Budgets in Travel Fund"]})]})]})})]})]})})]})},Xt=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(as,{}),e.jsx("main",{className:"pt-16",children:e.jsx($s,{})}),e.jsx(js,{})]});export{Xt as default};
