import{r as l,u as B,j as e,d as i,e as c,B as n,a as F,s as $}from"./index-CmnXGmSR-1761324991663.js";import{I as o}from"./input-DuoUWz5u-1761324991663.js";import{S as A,a as I,b as T,c as D,d as P}from"./select-BSl65-33-1761324991663.js";import{N as G}from"./Navbar-DHYrZaZ7-1761324991663.js";import{M}from"./map-pin-CgF1PKxj-1761324991663.js";import{C as p}from"./calendar-Chp3S92P-1761324991663.js";import{S as z}from"./search-Q6EvFPtU-1761324991663.js";import"./index-BdQq_4o_-1761324991663.js";import"./index-O-8XG9Cn-1761324991663.js";import"./chevron-down-C3nyfvlR-1761324991663.js";import"./useApiHealth-CHcSkqs5-1761324991663.js";import"./avatar-Ddfda0T3-1761324991663.js";import"./index-DEnrlHIR-1761324991663.js";import"./globe-GblMF2IX-1761324991663.js";import"./useHealthMonitor-CCNghsMS-1761324991663.js";import"./useAIIntelligence-CeJmtpSh-1761324991663.js";import"./plane-Ua1WiuKG-1761324991663.js";import"./sparkles-Dp6eIVk--1761324991663.js";import"./brain-pesvfUWO-1761324991663.js";import"./zap-C0GkxUD1-1761324991663.js";import"./users-B5hxtXMM-1761324991663.js";import"./settings-CjWD3Xqt-1761324991663.js";import"./shield-CJiHJfpS-1761324991663.js";import"./user-PjfeMBXp-1761324991663.js";const ne=()=>{const[t,j]=l.useState("hotels"),[d,f]=l.useState(""),[m,g]=l.useState(""),[h,v]=l.useState(""),[x,N]=l.useState(2),[b,y]=l.useState(0),[S,u]=l.useState(!0),{user:r}=B();l.useEffect(()=>{(async()=>{if(!r){u(!1);return}try{const{data:a,error:w}=await $.from("funds").select("balance").eq("user_id",r.id).single();!w&&a&&y(a.balance||0)}catch(a){console.error("Failed to fetch fund balance:",a)}finally{u(!1)}})()},[r]);const k=[{location:"Bali, Indonesia",type:"Spiritual",savings:"15% off"},{location:"Gold Coast, Australia",type:"Family",savings:"Group fund applies"},{location:"Tokyo, Japan",type:"Solo",savings:"Single room deals"},{location:"Sydney, Australia",type:"Pet",savings:"Pet-friendly certified"}],C=()=>{window.location.href=`/booking/select?type=${t}&destination=${d}&checkin=${m}&checkout=${h}&guests=${x}`};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(G,{}),e.jsx("div",{className:"pt-24 pb-8 px-6 bg-gradient-to-b from-muted/30 to-background",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2 font-['Playfair_Display']",children:["Search & ",e.jsx("span",{className:"hero-text",children:"Book"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Find the perfect stay, flight, or car rental for your journey"})]}),r&&e.jsx(i,{className:"travel-card",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Travel Fund Balance"}),S?e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-8 bg-muted rounded w-20 mx-auto mb-2"})}):e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",b]}),e.jsx(n,{variant:"outline",size:"sm",className:"mt-2",children:"Manage Fund"})]})})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 pb-20",children:[e.jsx(i,{className:"travel-card mb-8",children:e.jsxs(c,{className:"p-6",children:[e.jsx("div",{className:"flex space-x-4 mb-6",children:["hotels","flights","cars"].map(s=>e.jsx(n,{variant:t===s?"default":"ghost",onClick:()=>j(s),className:"capitalize",children:s},s))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="flights"?"From / To":"Destination"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(o,{placeholder:t==="flights"?"Sydney to Bali":"Where to?",value:d,onChange:s=>f(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="flights"?"Departure":"Check-in"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(o,{type:"date",value:m,onChange:s=>g(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="flights"?"Return":"Check-out"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(o,{type:"date",value:h,onChange:s=>v(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t==="cars"?"Driver Age":"Guests"}),e.jsxs(A,{value:x.toString(),onValueChange:s=>N(parseInt(s)),children:[e.jsx(I,{children:e.jsx(T,{})}),e.jsx(D,{children:Array.from({length:8},(s,a)=>a+1).map(s=>e.jsx(P,{value:s.toString(),children:t==="cars"?`${s+17} years`:`${s} guest${s>1?"s":""}`},s))})]})]})]}),e.jsxs(n,{onClick:C,className:"w-full mt-6 btn-primary h-12",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Search ",t]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Smart Suggestions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map((s,a)=>e.jsx(i,{className:"travel-card cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.location}),e.jsx(F,{variant:"secondary",children:s.type})]}),e.jsx("p",{className:"text-sm text-primary font-medium",children:s.savings})]})},a))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Searches"}),e.jsx("div",{className:"space-y-3",children:["Hotels in Bali • Mar 15-22 • 2 guests","Flights Sydney to Tokyo • Apr 1 • 1 passenger"].map((s,a)=>e.jsx(i,{className:"travel-card cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:s}),e.jsx(n,{variant:"ghost",size:"sm",children:"Search Again"})]})})},a))})]})]})]})};export{ne as default};
