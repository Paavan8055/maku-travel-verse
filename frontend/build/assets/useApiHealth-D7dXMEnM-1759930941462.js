import{r as l,s as n,l as a}from"./index-7HSUJgza-1759930941462.js";const p=()=>{const[r,c]=l.useState({activities:!0,hotels:!0,flights:!0,transfers:!0}),[f,h]=l.useState(!0);l.useEffect(()=>{u()},[]);const u=async()=>{try{h(!0);let i=!0;try{const{data:t,error:e}=await n.functions.invoke("provider-rotation",{body:{searchType:"activity",params:{destination:"sydney",date:new Date().toISOString().split("T")[0],participants:1,radius:10}}});(e||!t||!t.success)&&(i=!1,a.warn("Activities rotation unavailable:",e||(t==null?void 0:t.error)))}catch(t){i=!1,a.error("Activities rotation health check failed:",t)}let s=!0;try{const{data:t,error:e}=await n.functions.invoke("provider-rotation",{body:{searchType:"hotel",params:{cityCode:"SYD",checkInDate:new Date().toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0],adults:1,roomQuantity:1}}});(e||!t||!t.success)&&(s=!1,a.warn("Hotels rotation unavailable:",e||(t==null?void 0:t.error)))}catch(t){s=!1,a.error("Hotels rotation health check failed:",t)}let o=!0;try{const{data:t,error:e}=await n.functions.invoke("provider-rotation",{body:{searchType:"flight",params:{originLocationCode:"SYD",destinationLocationCode:"MEL",departureDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],adults:1}}});(e||!t||!t.success)&&(o=!1,a.warn("Flights rotation unavailable:",e||(t==null?void 0:t.error)))}catch(t){o=!1,a.error("Flights rotation health check failed:",t)}c({activities:i,hotels:s,flights:o,transfers:!0})}catch(i){a.error("API health check failed:",i),c({activities:!0,hotels:!0,flights:!0,transfers:!0})}finally{h(!1)}};return{apiHealth:r,loading:f,checkApiHealth:u,isActivitiesAvailable:r.activities,isHotelsAvailable:r.hotels,isFlightsAvailable:r.flights,isTransfersAvailable:r.transfers}};export{p as u};
