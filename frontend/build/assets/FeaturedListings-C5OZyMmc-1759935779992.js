import{r as S,s as q,l as C,j as e,R as O,B as P,a as D,b as k,f as x}from"./index-D-GNMzbY-1759935779992.js";import{I as Z}from"./SessionRecoveryBanner-Cxx--aC8-1759935779992.js";import{u as J}from"./Navbar-BkOPF8sw-1759935779992.js";import{Z as A}from"./zap-9L2DK5VR-1759935779992.js";import{H as Q}from"./heart-Bywub18f-1759935779992.js";import{S as V}from"./shield-rFYFlV5t-1759935779992.js";import{M as H}from"./map-pin-CDL93JUS-1759935779992.js";import{S as U}from"./star-oCABYGpq-1759935779992.js";import{C as K}from"./calendar-DdMSO3Ob-1759935779992.js";import{W}from"./wifi-S7ELKaJM-1759935779992.js";import{C as z}from"./car-gZ0LLvI9-1759935779992.js";import{U as Y}from"./utensils-B82wo5Jr-1759935779992.js";import"./circle-alert-Dq2NvjcS-1759935779992.js";import"./clock-DhA54DJF-1759935779992.js";import"./useApiHealth-DFCi-2lC-1759935779992.js";import"./avatar-Cni_uW81-1759935779992.js";import"./index-CkrITfQE-1759935779992.js";import"./globe-BNcdo3UA-1759935779992.js";import"./useHealthMonitor-BiErJNRX-1759935779992.js";import"./useAIIntelligence-B6mwoxHn-1759935779992.js";import"./plane-u8buF5l0-1759935779992.js";import"./sparkles-sC8S1NPG-1759935779992.js";import"./chevron-down-j7aeQmXU-1759935779992.js";import"./brain-CjfP8leK-1759935779992.js";import"./menu-Zm8MjVyH-1759935779992.js";import"./users-BCGW0sbz-1759935779992.js";import"./settings-Dx5WmXme-1759935779992.js";import"./user-DsYEtQPx-1759935779992.js";const M={hotels:[{id:"h1",type:"hotel",name:"Ocean View Resort & Spa",location:"Maldives",price:350,originalPrice:450,rating:4.8,reviews:1234,image:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"Best Deal",marketplace:"Family"},{id:"h2",type:"hotel",name:"Urban Luxury Suites",location:"Sydney, Australia",price:280,originalPrice:350,rating:4.7,reviews:892,image:"https://images.unsplash.com/photo-1564501049412-61c2a3083791?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"City Center",marketplace:"Solo"},{id:"h3",type:"hotel",name:"Mountain Lodge Retreat",location:"Swiss Alps",price:220,originalPrice:290,rating:4.9,reviews:2156,image:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"Pet Friendly",marketplace:"Pet"},{id:"h4",type:"hotel",name:"Zen Wellness Resort",location:"Bali, Indonesia",price:180,originalPrice:240,rating:4.9,reviews:756,image:"https://images.unsplash.com/photo-1540541338287-41700207dee6?w=300&h=192&fit=crop&fm=webp&q=70",verified:!0,badge:"Spa Special",marketplace:"Spiritual"}],flights:[{id:"f1",type:"flight",name:"Sydney to Melbourne",from:"Sydney",to:"Melbourne",location:"Australia",price:180,originalPrice:250,airline:"Qantas",duration:"1h 30m",stops:"Direct",rating:4.6,image:"https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=300&h=130&fit=crop&fm=webp&q=70"},{id:"f2",type:"flight",name:"London to Tokyo",from:"London",to:"Tokyo",location:"International",price:750,originalPrice:950,airline:"Japan Airlines",duration:"11h 45m",stops:"Direct",rating:4.8,image:"https://images.unsplash.com/photo-1544168190-79c17527004f?w=300&h=130&fit=crop&fm=webp&q=70"}],activities:[{id:"a1",type:"activity",name:"Harbour Bridge Climb",location:"Sydney, Australia",price:120,originalPrice:160,duration:"3 hours",rating:4.9,reviews:342,image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=200&fit=crop&fm=webp&q=80"},{id:"a2",type:"activity",name:"Cooking Class with Local Chef",location:"Tuscany, Italy",price:85,originalPrice:110,duration:"4 hours",rating:4.8,reviews:567,image:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop&fm=webp&q=80"}],loading:!1,error:null,lastFetched:null},G=()=>{const[L,$]=S.useState(M),y=S.useCallback((l,o)=>{var h,f;const m=((h=l==null?void 0:l.data)==null?void 0:h.data)||((f=l==null?void 0:l.data)==null?void 0:f[`${o}s`])||(l==null?void 0:l.data);return Array.isArray(m)?m.slice(0,4).map((a,r)=>{var s,t,c,p,F,I,g,v,j,b,w,N,i,B,_,E;const d=a.isDemoData||((t=(s=l==null?void 0:l.data)==null?void 0:s.meta)==null?void 0:t.isDemoData),n=`${o}_${d?"demo":"live"}_${Date.now()}_${r}`;return o==="hotel"?{id:n,type:"hotel",name:a.name||`Premium Hotel ${r+1}`,location:a.address||a.location||a.city||"Prime Location",price:Math.round(((c=a.price)==null?void 0:c.amount)||150+r*50),originalPrice:Math.round((((p=a.price)==null?void 0:p.amount)||150+r*50)*1.3),rating:((F=a.rating)==null?void 0:F.score)||a.rating||4.5+Math.random()*.4,reviews:((I=a.rating)==null?void 0:I.reviews)||Math.floor(Math.random()*1e3)+200,image:`https://images.unsplash.com/photo-1566073771259-6a8506099945?w=300&h=192&fit=crop&fm=webp&q=70&sig=${r}`,verified:!0,badge:d?"Demo Data":["Best Deal","Top Rated","Exclusive","Limited Time"][r%4],marketplace:["Family","Solo","Pet","Spiritual"][r%4]}:o==="flight"?{id:n,type:"flight",name:`${((g=a.departure)==null?void 0:g.airport)||a.from||"SYD"} to ${((v=a.arrival)==null?void 0:v.airport)||a.to||"MEL"}`,from:((j=a.departure)==null?void 0:j.city)||a.from||"Sydney",to:((b=a.arrival)==null?void 0:b.city)||a.to||"Melbourne",location:"Flight Route",price:Math.round(((w=a.price)==null?void 0:w.amount)||200+r*100),originalPrice:Math.round((((N=a.price)==null?void 0:N.amount)||200+r*100)*1.25),airline:a.airline||"Demo Airways",duration:a.duration||"2h 30m",stops:a.stops||"Direct",rating:4.4+Math.random()*.5,image:`https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=300&h=130&fit=crop&fm=webp&q=70&sig=${r}`}:o==="activity"?{id:n,type:"activity",name:a.name||`Exciting Activity ${r+1}`,location:a.location||"Sydney",price:Math.round(((i=a.price)==null?void 0:i.amount)||80+r*40),originalPrice:Math.round((((B=a.price)==null?void 0:B.amount)||80+r*40)*1.4),duration:a.duration||`${2+r} hours`,rating:((_=a.rating)==null?void 0:_.score)||4.6+Math.random()*.3,reviews:((E=a.rating)==null?void 0:E.reviews)||Math.floor(Math.random()*500)+100,image:`https://images.unsplash.com/photo-1483347756197-71ef80e95f73?w=300&h=200&fit=crop&fm=webp&q=80&sig=${r}`}:{id:n,type:o,name:"Featured Deal",location:"Unknown",price:100,image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=200&fit=crop&fm=webp&q=80"}}):[]},[]),u=S.useCallback(async()=>{var l,o,m,h,f,a,r,d,n;$(s=>({...s,loading:!0,error:null}));try{const s=new Date,t=new Date(s);t.setDate(t.getDate()+1);const c=new Date(s);c.setDate(c.getDate()+7);const p=s.toISOString().split("T")[0],F=t.toISOString().split("T")[0],I=[q.functions.invoke("provider-rotation",{body:{searchType:"hotel",params:{cityCode:"SYD",checkInDate:p,checkOutDate:F,adults:2,roomQuantity:1,timeout:8e3}}}).catch(()=>null),q.functions.invoke("provider-rotation",{body:{searchType:"flight",params:{originLocationCode:"SYD",destinationLocationCode:"MEL",departureDate:c.toISOString().split("T")[0],adults:1,timeout:8e3}}}).catch(()=>null),q.functions.invoke("provider-rotation",{body:{searchType:"activity",params:{destination:"sydney",date:p,participants:2,radius:20,timeout:8e3}}}).catch(()=>null)],[g,v,j]=await Promise.allSettled(I);let b=M.hotels,w=M.flights,N=M.activities;if(g.status==="fulfilled"&&((l=g.value)!=null&&l.data)){const i=y(g.value.data,"hotel");i.length>0&&(b=i,C.info("✅ Featured deals: Using hotel data",{count:i.length,isDemo:(m=(o=g.value.data)==null?void 0:o.meta)==null?void 0:m.isDemoData}))}if(v.status==="fulfilled"&&((h=v.value)!=null&&h.data)){const i=y(v.value.data,"flight");i.length>0&&(w=i,C.info("✅ Featured deals: Using flight data",{count:i.length,isDemo:(a=(f=v.value.data)==null?void 0:f.meta)==null?void 0:a.isDemoData}))}if(j.status==="fulfilled"&&((r=j.value)!=null&&r.data)){const i=y(j.value.data,"activity");i.length>0&&(N=i,C.info("✅ Featured deals: Using activity data",{count:i.length,isDemo:(n=(d=j.value.data)==null?void 0:d.meta)==null?void 0:n.isDemoData}))}$({hotels:b,flights:w,activities:N,loading:!1,error:null,lastFetched:new Date}),C.info("✅ Featured deals refresh completed",{hotelsCount:b.length,flightsCount:w.length,activitiesCount:N.length,hasApiData:b.some(i=>i.id.includes("demo")||i.id.includes("live"))||w.some(i=>i.id.includes("demo")||i.id.includes("live"))||N.some(i=>i.id.includes("demo")||i.id.includes("live"))})}catch(s){C.error("❌ Featured deals fetch failed",s),$(t=>({...t,loading:!1,error:"Failed to load latest deals"}))}},[y]);S.useEffect(()=>{const l=setTimeout(u,2e3),o=setInterval(u,10*60*1e3);return()=>{clearTimeout(l),clearInterval(o)}},[u]);const T=S.useCallback(()=>{u()},[u]);return{...L,refresh:T}},Se=()=>{const{t:L}=J(),[$,y]=S.useState([]),{hotels:u,flights:T,activities:l,loading:o,error:m,lastFetched:h,refresh:f}=G(),a=s=>{y(t=>t.includes(s)?t.filter(c=>c!==s):[...t,s])},r=s=>s?[W,z,Y]:[W,z,Y],d=s=>s.includes("live"),n=s=>s.includes("demo");return e.jsx("section",{className:"py-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold font-['Playfair_Display']",children:["Featured ",e.jsx("span",{className:"hero-text",children:"Travel Deals"})]}),o&&e.jsx(O,{className:"h-6 w-6 animate-spin text-travel-coral"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed mb-4",children:"Live travel deals updated in real-time from our partner networks."}),h&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx(A,{className:"h-4 w-4 text-travel-coral"}),e.jsxs("span",{children:["Last updated: ",h.toLocaleTimeString()]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:f,disabled:o,children:e.jsx(O,{className:`h-4 w-4 ${o?"animate-spin":""}`})})]}),m&&e.jsxs("div",{className:"text-sm text-orange-600 bg-orange-50 px-4 py-2 rounded-full inline-block",children:["Showing cached deals - ",m]})]}),e.jsxs("div",{className:"mb-20",children:[e.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:"Featured Hotels"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o?[...Array(4)].map((s,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted"}),e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded"})]})]},`hotel-skeleton-${t}`)):u.map((s,t)=>e.jsxs(D,{className:"travel-card overflow-hidden group cursor-pointer animate-fadeIn",style:{animationDelay:`${t*.1}s`},children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(Z,{src:s.image,alt:s.name,width:300,height:192,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",quality:80}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),e.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-1",children:[e.jsx(x,{variant:"secondary",className:"bg-travel-coral text-white",children:s.badge}),d(s.id)&&e.jsxs(x,{variant:"secondary",className:"bg-green-500 text-white text-xs",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Live"]}),n(s.id)&&e.jsx(x,{variant:"secondary",className:"bg-blue-500 text-white text-xs",children:"API Demo"})]}),e.jsx(P,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 bg-white/20 backdrop-blur-sm hover:bg-white/30",onClick:()=>a(s.id),children:e.jsx(Q,{className:`h-4 w-4 ${$.includes(s.id)?"text-red-500 fill-red-500":"text-white"}`})}),s.verified&&e.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center space-x-1 bg-green-500 text-white px-2 py-1 rounded-full text-xs",children:[e.jsx(V,{className:"h-3 w-3"}),e.jsx("span",{children:"Verified"})]})]}),e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"font-bold text-lg leading-tight",children:s.name})}),e.jsxs("div",{className:"flex items-center text-muted-foreground text-sm mb-3",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.location})]}),e.jsx("div",{className:"flex items-center mb-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"ml-1 font-semibold",children:s.rating}),e.jsxs("span",{className:"ml-1 text-sm text-muted-foreground",children:["(",s.reviews," reviews)"]})]})}),e.jsx("div",{className:"flex items-center space-x-3 mb-4",children:r(s.amenities).map((c,p)=>e.jsx(c,{className:"h-4 w-4 text-muted-foreground"},p))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",s.price]}),e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",s.originalPrice]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"per night"})]}),e.jsxs(x,{variant:"outline",className:"text-travel-forest border-travel-forest",children:[s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):25,"% off"]})]}),e.jsx(P,{className:"w-full mt-4 btn-primary",onClick:()=>window.location.href=`/booking/hotel?hotel=${encodeURIComponent(JSON.stringify({id:s.id,name:s.name,pricePerNight:s.price}))}`,children:L("booking.bookNow")})]})]},s.id))})]}),e.jsxs("div",{className:"mb-20",children:[e.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:"Featured Flights"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o?[...Array(2)].map((s,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-32 bg-muted"}),e.jsxs(k,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-full"})]})]},`flight-skeleton-${t}`)):T.map((s,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-fadeIn",style:{animationDelay:`${t*.1}s`},children:[e.jsxs("div",{className:"relative h-32 overflow-hidden",children:[e.jsx("img",{src:s.image,alt:`${s.from} to ${s.to}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-6",children:[e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.from," → ",s.to]}),e.jsx("div",{className:"text-white/90",children:s.airline})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[d(s.id)&&e.jsxs(x,{variant:"secondary",className:"bg-green-500 text-white text-xs",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Live"]}),n(s.id)&&e.jsx(x,{variant:"secondary",className:"bg-blue-500 text-white text-xs",children:"API Demo"})]})]})]}),e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsx("div",{className:"font-semibold",children:s.duration})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Stops"}),e.jsx("div",{className:"font-semibold",children:s.stops})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"ml-1 font-semibold",children:s.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-3xl font-bold",children:["$",s.price]}),e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",s.originalPrice]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"per person"})]}),e.jsx(P,{className:"btn-primary",onClick:()=>window.location.href=`/booking/flight?flightId=${s.id}&price=${s.price}&from=${encodeURIComponent(s.from)}&to=${encodeURIComponent(s.to)}`,children:"Book Flight"})]})]})]},s.id))})]}),e.jsxs("div",{className:"mb-20",children:[e.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:"Featured Activities"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o?[...Array(3)].map((s,t)=>e.jsxs(D,{className:"travel-card overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted"}),e.jsxs(k,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-full"})]})]},`activity-skeleton-${t}`)):l.map((s,t)=>e.jsxs(D,{className:"travel-card overflow-hidden group cursor-pointer animate-fadeIn",style:{animationDelay:`${t*.1}s`},children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:"font-bold text-lg flex-1",children:s.name}),e.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[d(s.id)&&e.jsxs(x,{variant:"secondary",className:"bg-green-500 text-white text-xs",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Live"]}),n(s.id)&&e.jsx(x,{variant:"secondary",className:"bg-blue-500 text-white text-xs",children:"API Demo"})]})]}),e.jsxs("div",{className:"flex items-center text-white/90 text-sm",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.location})]})]})})]}),e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"ml-1 font-semibold",children:s.rating}),e.jsxs("span",{className:"ml-1 text-sm text-muted-foreground",children:["(",s.reviews,")"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(K,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.duration})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",s.price]}),e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",s.originalPrice]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"per person"})]}),e.jsx(P,{className:"btn-primary",onClick:()=>window.location.href=`/booking/activity?activityId=${s.id}&price=${s.price}&name=${encodeURIComponent(s.name)}`,children:"Book Now"})]})]})]},s.id))})]})]})})};export{Se as default};
