var f=Object.defineProperty;var x=(s,r,t)=>r in s?f(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var n=(s,r,t)=>x(s,typeof r!="symbol"?r+"":r,t);import{c as y,r as C,l,j as e,a as g,d as N,e as D,T as h,b as w,A as S,v as A,q as j,B as u}from"./index-DQQjtSjM-1760115523726.js";import{c as v,w as p}from"./correlationId-CGklolSJ-1760115523726.js";import{S as R}from"./search-DDNKiYj9-1760115523726.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=y("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);class M extends C.Component{constructor(){super(...arguments);n(this,"retryCount",0);n(this,"maxRetries",2);n(this,"state",{hasError:!1});n(this,"handleRetry",()=>{this.retryCount<this.maxRetries?(this.retryCount++,this.setState({hasError:!1,error:void 0,errorId:void 0}),l.info("Search error boundary retry attempt",p({retryCount:this.retryCount}))):window.location.reload()});n(this,"handleReset",()=>{this.retryCount=0,this.setState({hasError:!1,error:void 0,errorId:void 0})})}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorId:v.generateId()}}componentDidCatch(t,a){const i=p({error:t.message,stack:t.stack,componentStack:a.componentStack,section:"search",retryCount:this.retryCount,timestamp:new Date().toISOString()});l.error("Search Error Boundary caught an error:",i),typeof window<"u"&&window.Sentry&&window.Sentry.captureException(t,{tags:{section:"search",correlationId:i.correlationId},contexts:{react:a}}),this.setState({error:t,errorId:i.correlationId})}render(){return this.state.hasError?e.jsxs(g,{className:"border-destructive",children:[e.jsx(N,{children:e.jsxs(D,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(h,{className:"h-5 w-5"}),"Search Error"]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs(S,{className:"border-destructive",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx(A,{children:"Something went wrong with your search"}),e.jsx(j,{children:this.props.fallbackMessage||"We encountered an issue while processing your search. This could be due to temporary server issues or invalid search parameters."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{onClick:this.handleRetry,className:"flex-1",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),this.retryCount<this.maxRetries?"Try Again":"Reload Page"]}),e.jsxs(u,{variant:"outline",onClick:this.handleReset,className:"flex-1",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"New Search"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"What you can try:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[e.jsx("li",{children:"Check your search dates and destination"}),e.jsx("li",{children:"Try a different destination or date range"}),e.jsx("li",{children:"Refresh the page and search again"}),e.jsx("li",{children:"Contact support if the problem persists"})]}),this.state.errorId&&e.jsxs("p",{className:"text-xs mt-2",children:["Error ID: ",e.jsx("code",{className:"bg-muted px-1 rounded",children:this.state.errorId})]})]}),!1]})]}):this.props.children}}const I=["SYD","MEL","BNE","PER","ADL","DRW","HBA","CBR","LAX","JFK","LGA","ORD","DFW","ATL","DEN","SFO","SEA","LAS","LHR","CDG","FRA","AMS","MAD","FCO","ZUR","VIE","ARN","NRT","KIX","ICN","PVG","PEK","HKG","SIN","BKK","KUL","DXB","DOH","AUH","CAI","JNB","CPT","NBO"],m=s=>{const r=s.toUpperCase();return/^[A-Z]{3}$/.test(r)?I.includes(r)||/^[A-Z]{3}$/.test(r):!1},k=s=>{const{origin:r,destination:t,departureDate:a,passengers:i}=s;if(!r||!m(r))return{isValid:!1,error:"Please enter a valid origin airport code (e.g., SYD, LAX, LHR)"};if(!t||!m(t))return{isValid:!1,error:"Please enter a valid destination airport code (e.g., MEL, JFK, CDG)"};if(r.toUpperCase()===t.toUpperCase())return{isValid:!1,error:"Origin and destination must be different"};if(!a||a.trim()==="")return{isValid:!1,error:"Please select a departure date"};if(!/^\d{4}-\d{2}-\d{2}$/.test(a))return{isValid:!1,error:"Date must be in YYYY-MM-DD format"};const d=new Date(a+"T00:00:00.000Z"),c=new Date;return c.setHours(0,0,0,0),isNaN(d.getTime())?{isValid:!1,error:"Please enter a valid departure date"}:d<c?{isValid:!1,error:"Departure date cannot be in the past"}:!i||i<1||i>9?{isValid:!1,error:"Number of passengers must be between 1 and 9"}:{isValid:!0}},B=s=>{const{destination:r,date:t,participants:a}=s;if(!r||r.trim().length<2)return{isValid:!1,error:"Please enter a destination (minimum 2 characters)"};const i=new Date(t),o=new Date;return o.setHours(0,0,0,0),isNaN(i.getTime())?{isValid:!1,error:"Please enter a valid date"}:i<o?{isValid:!1,error:"Activity date cannot be in the past"}:!a||a<1||a>20?{isValid:!1,error:"Number of participants must be between 1 and 20"}:{isValid:!0}};export{M as S,B as a,k as v};
