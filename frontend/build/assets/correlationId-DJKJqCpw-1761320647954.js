const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-WZ5873Kb-1761320647954.js","assets/index-BGyc0aYA-1761320647954.css"])))=>i.map(i=>d[i]);
var h=Object.defineProperty;var w=(r,t,e)=>t in r?h(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var o=(r,t,e)=>w(r,typeof t!="symbol"?t+"":t,e);import{_ as D}from"./index-WZ5873Kb-1761320647954.js";import{v as f}from"./v4-BToUZ8VQ-1761320647954.js";const n=class n{constructor(){o(this,"currentId",null)}static getInstance(){return n.instance||(n.instance=new n),n.instance}generateId(){return this.currentId=f(),this.currentId}getCurrentId(){return this.currentId||this.generateId()}setId(t){this.currentId=t}clear(){this.currentId=null}getHeaders(t={}){return{"X-Correlation-ID":this.getCurrentId(),...t}}async logCorrelationData(t,e,u,d,s,c,I,g){try{const{supabase:a}=await D(async()=>{const{supabase:p}=await import("./index-WZ5873Kb-1761320647954.js").then(m=>m.aW);return{supabase:p}},__vite__mapDeps([0,1])),_={correlation_id:this.getCurrentId(),request_type:t,status:e,request_data:{...u,...s?{service_name:s}:{},...c?{error_message:c}:{}},response_data:d,duration_ms:I,user_id:g,created_at:new Date().toISOString(),completed_at:e!=="in_progress"?new Date().toISOString():null},{error:l}=await a.from("correlation_tracking").upsert(_);l&&console.error("Failed to log correlation data:",l)}catch(a){console.error("Error logging correlation data:",a)}}extractFromHeaders(t){return t instanceof Headers?t.get("X-Correlation-ID"):t["X-Correlation-ID"]||t["x-correlation-id"]||null}};o(n,"instance");let i=n;const C=i.getInstance(),x=r=>({...r,correlationId:C.getCurrentId()});export{C as c,x as w};
