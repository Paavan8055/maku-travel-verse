import{k as b,b as g,h as N,r as i,s as v,l as w,j as e,d as C,f as k,g as S,e as _,a as u,B as x,ax as P}from"./index-CmnXGmSR-1761324991663.js";import{C as A}from"./circle-check-big-Dm6-6eRM-1761324991663.js";import{A as B}from"./arrow-right-CqtNyAsY-1761324991663.js";const E=()=>{const[t]=b(),o=g(),{toast:l}=N(),[h,d]=i.useState(!0),[s,p]=i.useState(null),r=t.get("session_id"),a=t.get("setup_intent"),n=t.get("payment_intent");i.useEffect(()=>{r||a||n?f():d(!1)},[r,a,n]);const f=async()=>{try{const{data:c,error:m}=await v.functions.invoke("verify-partner-payment",{body:{session_id:r,setup_intent_id:a,payment_intent_id:n}});if(m)throw m;p(c),l({title:"Payment Successful",description:"Your payment has been processed successfully"})}catch(c){w.error("Payment verification error:",c),l({title:"Verification Error",description:"Unable to verify payment status",variant:"destructive"})}finally{d(!1)}},y=()=>{o("/partner-dashboard")},j=()=>{o("/")};return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-lg w-full",children:e.jsxs(C,{className:"border-none shadow-2xl bg-card/80 backdrop-blur-sm",children:[e.jsxs(k,{className:"text-center pb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(A,{className:"h-8 w-8 text-green-600"})}),e.jsx(S,{className:"text-2xl font-bold text-green-700",children:"Payment Successful!"})]}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Thank you for your payment. Your partner account is now being processed."}),(s==null?void 0:s.type)==="trial_setup"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"7-Day Trial Started"}),e.jsx("br",{}),"Your payment method has been secured. You'll be charged after your trial ends unless you cancel."]})}),(s==null?void 0:s.type)==="immediate"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Full Access Activated"}),e.jsx("br",{}),"Your payment has been processed and you now have full platform access."]})})]}),s&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Business Type"}),e.jsx(u,{variant:"secondary",className:"capitalize",children:s.business_type})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount"}),e.jsxs("span",{className:"font-medium",children:["A$",(s.amount/100).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(u,{variant:"default",children:s.status})]})]}),e.jsxs("div",{className:"border-t pt-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-center",children:"What's Next?"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Check your email for account verification instructions"}),e.jsx("li",{children:"• Access your partner dashboard to set up your business profile"}),e.jsx("li",{children:"• Upload required documents for verification"}),e.jsx("li",{children:"• Start listing your services once approved"})]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs(x,{onClick:y,className:"w-full h-12 bg-gradient-to-r from-primary to-secondary",children:["Go to Dashboard",e.jsx(B,{className:"ml-2 h-4 w-4"})]}),e.jsxs(x,{variant:"outline",onClick:j,className:"w-full",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back to Home"]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need help? Contact our support team at support@maku.travel"})})]})]})})})};export{E as default};
