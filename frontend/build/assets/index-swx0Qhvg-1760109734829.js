import{c as ge,h as be,r as o,j as e,a as c,d as L,e as $,b as d,f as w,B as C,g as Me,l as ae,t as B,P as Y,u as Pe}from"./index-Cmnr9LP--1760109734829.js";import{I as de}from"./input-CvRviaNF-1760109734829.js";import{T as je,a as fe,b as P,c as R}from"./tabs-UK-FnbdU-1760109734829.js";import{L as ie}from"./label-CCXh4509-1760109734829.js";import{S as Re}from"./separator-DvuR2XD2-1760109734829.js";import{D as Le,a as $e,b as Fe,c as ze}from"./dialog-D1gGeF_6-1760109734829.js";import{u as Be}from"./useTravelFunds-B3ekMDIi-1760109734829.js";import{u as Te}from"./useAIIntelligence-87wtlTya-1760109734829.js";import{B as oe}from"./brain-D2wQsiMb-1760109734829.js";import{S as re}from"./sparkles-kuvVAQ1t-1760109734829.js";import{D as Ue}from"./dollar-sign-ChxCbXtL-1760109734829.js";import{C as K}from"./calendar-BUQGgIDp-1760109734829.js";import{T as ne}from"./trending-up-By45kzVr-1760109734829.js";import{T as O}from"./target-CJyDsYmJ-1760109734829.js";import{U as I}from"./users-ClTqJ9Ip-1760109734829.js";import{C as he}from"./clock-Bwk96H2g-1760109734829.js";import{gamificationService as z}from"./gamification-service-Gf-IiNC--1760109734829.js";import{T as F,N as Ge}from"./Navbar-1MHM_w1Y-1760109734829.js";import{M as q}from"./map-pin-C4oG_6Pe-1760109734829.js";import{G as ke}from"./globe-BGiF-LM9-1760109734829.js";import{A as me}from"./award-fUa9iDo6-1760109734829.js";import{S as V}from"./star-DeoYuk0n-1760109734829.js";import{L as Oe}from"./lock-DAdEO71d-1760109734829.js";import{C as xe}from"./crown-BqEC9TeA-1760109734829.js";import{A as ve,a as ye,b as we}from"./avatar-C8cn6lxX-1760109734829.js";import{T as Ye}from"./trending-down-BzqXGb41-1760109734829.js";import{M as He}from"./minus-CBS7n89h-1760109734829.js";import{H as X}from"./heart-BEsZ5qBW-1760109734829.js";import{M as Je}from"./message-circle-6BByA37c-1760109734829.js";import{S as Ne,C as We}from"./share-2-Bq1QgqXe-1760109734829.js";import{U as Ze}from"./user-plus-BuxTIkFQ-1760109734829.js";import{Z as De}from"./zap-Dld185ud-1760109734829.js";import{C as Ce}from"./circle-check-big-ycpJfV8o-1760109734829.js";import{T as Qe,I as Xe,P as Ke,J as qe}from"./JourneyOptimizerCard-DDgFPfQ0-1760109734829.js";import{u as Ve}from"./useEnhancedDreams-FEYPFapV-1760109734829.js";import{C as es}from"./menu-CGbF4wBN-1760109734829.js";import{U as ss}from"./user-DjUI55yL-1760109734829.js";import{F as ts}from"./Footer-9sZuJCYh-1760109734829.js";import"./index-9R6FWUVH-1760109734829.js";import"./travelFundClient-DC9rMR-2-1760109734829.js";import"./useApiHealth-si2Mscj1-1760109734829.js";import"./useHealthMonitor-CamWMgFK-1760109734829.js";import"./plane-CKGwpvIs-1760109734829.js";import"./chevron-down-CdmpM009-1760109734829.js";import"./settings-ZcJfgv_u-1760109734829.js";import"./shield-Df6Ze5q_-1760109734829.js";import"./index-Bthw-N6u-1760109734829.js";import"./activity-BotcgPdd-1760109734829.js";import"./select-BZeH6B5n-1760109734829.js";import"./index-BdQq_4o_-1760109734829.js";import"./index-BbuU9_Dk-1760109734829.js";import"./search-BWeEUHRK-1760109734829.js";import"./lightbulb-DdHoDNtA-1760109734829.js";import"./external-link-A5iQO1pK-1760109734829.js";import"./arrow-right-BLb6lbh5-1760109734829.js";import"./plus-CxT9ZGOn-1760109734829.js";import"./bot-4R9unzkz-1760109734829.js";import"./cpu-B5R0nvNL-1760109734829.js";import"./map-DELfP5xb-1760109734829.js";import"./play-2i87H3yk-1760109734829.js";import"./book-open-DP2vzAED-1760109734829.js";import"./file-text-_s5zPK9Y-1760109734829.js";import"./mail-CJuRoZSv-1760109734829.js";import"./twitter-CtHu-Rfr-1760109734829.js";import"./send-R2Y4V84Q-1760109734829.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ge("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=ge("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ge("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=ge("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),ns=({dreamData:s,open:i,onOpenChange:a,onFundCreated:x})=>{const{toast:r}=be(),{createFund:b}=Be(),{travelDNA:g}=Te(),[n,l]=o.useState(null),[A,p]=o.useState(""),[E,S]=o.useState(0),[U,j]=o.useState(""),[u,_]=o.useState("personal"),[h,N]=o.useState([]),[T,m]=o.useState(!1);o.useEffect(()=>{const v=async()=>{var M;try{const J={hotel:s.duration*150,flights:800+s.companions*200,activities:s.duration*100,food:s.duration*75,local:s.duration*50},se=Object.values(J).reduce((f,k)=>f+k,0),H=se*.2,W=se+H,le=(g==null?void 0:g.planning_style)==="spontaneous"?.5:1.5,Z=Math.max(3,Math.round(12*le)),G=W/Z;l({suggestedAmount:Math.round(W),timelineMonths:Z,monthlyContribution:Math.round(G),riskAssessment:G>500?"high":G>200?"medium":"low",successProbability:Math.min(95,100-G/50)});const te=s.dreamName||`${s.destination} Adventure`;p(`${te} 2025`),S(Math.round(W));const Q=((M=s.travelDates)==null?void 0:M.start)||new Date(Date.now()+Z*30*24*60*60*1e3);j(Q.toISOString().split("T")[0])}catch(J){console.error("Error generating recommendation:",J)}};s.destination&&v()},[s,g]);const ee=async()=>{m(!0);try{const v={name:A,description:`AI-generated savings plan for ${s.destination} adventure`,target_amount:E,deadline:U,destination:s.destination,fund_type:u,smart_dreams_integration:{source:"smart_dreams",dream_data:s,ai_recommendation:n,generated_at:new Date().toISOString()}},M=await b(v);M&&(r({title:"Dream fund created!",description:`Your ${s.destination} savings fund is ready. Start inviting friends!`}),x(M.id),a(!1))}catch{r({title:"Error",description:"Failed to create fund. Please try again.",variant:"destructive"})}finally{m(!1)}};return e.jsx(Le,{open:i,onOpenChange:a,children:e.jsxs($e,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Fe,{children:e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-6 w-6 text-purple-600"}),"Turn Your Dream Into Reality"]})}),e.jsxs("div",{className:"space-y-6",children:[n&&e.jsxs(c,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:[e.jsx(L,{children:e.jsxs($,{className:"flex items-center gap-2 text-lg",children:[e.jsx(re,{className:"h-5 w-5 text-purple-600"}),"AI Budget Analysis for ",s.destination]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(Ue,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Estimated Cost"}),e.jsxs("p",{className:"text-xl font-bold",children:["$",n.suggestedAmount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(K,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Timeline"}),e.jsxs("p",{className:"text-xl font-bold",children:[n.timelineMonths," months"]})]}),e.jsxs("div",{children:[e.jsx(ne,{className:"h-6 w-6 mx-auto mb-1 text-orange-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Goal"}),e.jsxs("p",{className:"text-xl font-bold",children:["$",n.monthlyContribution]})]}),e.jsxs("div",{children:[e.jsx(O,{className:"h-6 w-6 mx-auto mb-1 text-purple-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-xl font-bold",children:[n.successProbability,"%"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Budget Breakdown"}),e.jsx(w,{variant:"outline",children:"AI Estimated"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Accommodation (",s.duration," nights)"]}),e.jsxs("span",{children:["$",(s.duration*150).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Flights (",s.companions+1," people)"]}),e.jsxs("span",{children:["$",(800+s.companions*200).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Activities & Experiences"}),e.jsxs("span",{children:["$",(s.duration*100).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Food & Dining"}),e.jsxs("span",{children:["$",(s.duration*75).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Local Transport"}),e.jsxs("span",{children:["$",(s.duration*50).toLocaleString()]})]}),e.jsx(Re,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Safety Buffer (20%)"}),e.jsxs("span",{children:["$",Math.round(n.suggestedAmount*.2).toLocaleString()]})]})]})]})]})]}),e.jsxs(c,{children:[e.jsx(L,{children:e.jsx($,{children:"Create Your Dream Fund"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{htmlFor:"fundName",children:"Fund Name"}),e.jsx(de,{id:"fundName",value:A,onChange:v=>p(v.target.value),placeholder:"e.g., Bali Adventure 2025"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{htmlFor:"targetAmount",children:"Target Amount ($)"}),e.jsx(de,{id:"targetAmount",type:"number",value:E,onChange:v=>S(Number(v.target.value)),min:"100",step:"50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{htmlFor:"deadline",children:"Target Date"}),e.jsx(de,{id:"deadline",type:"date",value:U,onChange:v=>j(v.target.value),min:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{children:"Fund Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["personal","group","family"].map(v=>e.jsxs(C,{variant:u===v?"default":"outline",onClick:()=>_(v),className:"capitalize",children:[v==="personal"&&e.jsx(O,{className:"h-4 w-4 mr-1"}),v==="group"&&e.jsx(I,{className:"h-4 w-4 mr-1"}),v==="family"&&e.jsx(I,{className:"h-4 w-4 mr-1"}),v]},v))})]}),(u==="group"||u==="family")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{children:"Invite Companions"}),e.jsxs("div",{className:"space-y-2",children:[s.companions>0&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Your dream includes ",s.companions," companion",s.companions>1?"s":"",". Invite them to contribute!"]}),e.jsx(de,{placeholder:"Enter email addresses (comma separated)",onChange:v=>N(v.target.value.split(",").map(M=>M.trim()))})]})]}),n&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4 text-green-600"}),"Your Savings Strategy"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Contribution:"}),e.jsxs("span",{className:"font-semibold ml-2",children:["$",n.monthlyContribution]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Success Probability:"}),e.jsxs("span",{className:"font-semibold ml-2 text-green-600",children:[n.successProbability,"%"]})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-white rounded",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress Timeline"}),e.jsxs("span",{children:[n.timelineMonths," months to go"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500",style:{width:"5%"}})})]})]})]})]}),e.jsx(c,{className:"border-orange-200 bg-gradient-to-r from-orange-50 to-yellow-50",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("h4",{className:"font-semibold text-orange-700 mb-3 flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Smart Dreams Benefits"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-3 w-3 text-orange-500"}),e.jsx("span",{children:"AI-optimized budget planning"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{children:"Milestone NFT rewards"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-3 w-3 text-blue-500"}),e.jsx("span",{children:"Automatic companion invites"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-3 w-3 text-purple-500"}),e.jsx("span",{children:"Progress tracking in Smart Dreams"})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(C,{onClick:ee,disabled:!A||!E||T,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:T?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating Dream Fund..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Create Dream Fund"]})}),e.jsx(C,{variant:"outline",onClick:()=>a(!1),children:"Maybe Later"})]})]})]})})},ls=()=>{const{user:s}=Me(),{toast:i}=be(),[a,x]=o.useState(null),[r,b]=o.useState([]),[g,n]=o.useState([]),[l,A]=o.useState([]),[p,E]=o.useState([]),[S,U]=o.useState([]),[j,u]=o.useState(null),[_,h]=o.useState(null),[N,T]=o.useState(!0),[m,ee]=o.useState(null),v=o.useCallback(async()=>{if(s!=null&&s.id)try{T(!0),ee(null);const[f,k,t,y,D,pe,Ie,Ee]=await Promise.all([z.getUserGameStats(s.id),z.getUserAchievements(s.id),z.getLeaderboards(["global","weekly","friends"]),z.getSocialConnections(s.id),z.getSocialActivityFeed(s.id,20),z.getChallenges(s.id),z.getDreamCollectionStats(s.id),z.getSocialInsights(s.id)]);x(f),b(k),n(t),A(y),E(D),U(pe),u(Ie),h(Ee)}catch(f){const k=f instanceof Error?f.message:"Failed to fetch gamification data";ee(k),ae.error("Error fetching gamification data:",f)}finally{T(!1)}},[s==null?void 0:s.id]),M=o.useCallback(async(f,k)=>{if(!(s!=null&&s.id))return null;try{const t=await z.checkAchievements(s.id,f,k);if(t.newly_unlocked.length>0){t.newly_unlocked.forEach(D=>{i({title:"🏆 Achievement Unlocked!",description:`${D.name}: ${D.description}`,duration:5e3})});const y=await z.getUserAchievements(s.id);b(y)}if(t.points_earned>0&&i({title:"✨ Points Earned!",description:`You earned ${t.points_earned} points!`,duration:3e3}),t.level_up){i({title:"🎉 Level Up!",description:`Welcome to Level ${t.level_up.new_level}!`,duration:6e3});const y=await z.getUserGameStats(s.id);x(y)}return t}catch(t){return ae.error("Error checking achievements:",t),null}},[s==null?void 0:s.id,i]),J=o.useCallback(async f=>{if(!(s!=null&&s.id))return i({title:"Authentication Required",description:"Please log in to join challenges.",variant:"destructive"}),!1;try{const k=await z.joinChallenge(s.id,f);if(k.success){i({title:"Challenge Joined!",description:k.message});const t=await z.getChallenges(s.id);return U(t),await z.trackGameEvent(s.id,{event_type:"challenge_joined",event_data:{challenge_id:f},timestamp:new Date,user_context:{current_level:(a==null?void 0:a.level)||1,current_points:(a==null?void 0:a.total_points)||0,active_challenges:S.filter(y=>y.is_participating).map(y=>y.id)}}),!0}else return i({title:"Failed to Join Challenge",description:k.message,variant:"destructive"}),!1}catch{return i({title:"Error",description:"Failed to join challenge. Please try again.",variant:"destructive"}),!1}},[s==null?void 0:s.id,a,S,i]),se=o.useCallback(async(f,k)=>{if(s!=null&&s.id)try{await z.trackGameEvent(s.id,{event_type:f,event_data:k,timestamp:new Date,user_context:{current_level:(a==null?void 0:a.level)||1,current_points:(a==null?void 0:a.total_points)||0,active_challenges:S.filter(t=>t.is_participating).map(t=>t.id)}})}catch(t){ae.error("Error tracking game event:",t)}},[s==null?void 0:s.id,a,S]),H=o.useCallback(()=>{if(!a)return{current:0,next:0,progress:0};const f=(a.level-1)*1e3,k=a.level*1e3,t=(a.total_points-f)/(k-f)*100;return{current:f,next:k,progress:Math.min(Math.max(t,0),100)}},[a]),W=o.useCallback(f=>f?r.filter(k=>k.category===f):r,[r]),le=o.useCallback(()=>r.filter(f=>f.unlocked),[r]),Z=o.useCallback(()=>r.filter(f=>!f.unlocked),[r]),G=o.useCallback(()=>{const f=new Date(Date.now()-6048e5);return r.filter(k=>k.unlocked&&k.unlocked_at&&new Date(k.unlocked_at)>f)},[r]),te=o.useCallback(()=>S.filter(f=>f.status==="active"&&f.is_participating),[S]),Q=o.useCallback(()=>S.filter(f=>f.status==="active"&&!f.is_participating),[S]);return o.useEffect(()=>{s!=null&&s.id&&v()},[s==null?void 0:s.id,v]),o.useEffect(()=>{if(!(s!=null&&s.id))return;const f=setInterval(()=>{v()},5*60*1e3);return()=>clearInterval(f)},[s==null?void 0:s.id,v]),{userStats:a,achievements:r,leaderboards:g,socialConnections:l,socialActivity:p,challenges:S,collectionStats:j,socialInsights:_,loading:N,error:m,checkAchievements:M,joinChallenge:J,trackGameEvent:se,refetch:v,levelProgress:H(),unlockedAchievements:le(),availableAchievements:Z(),recentAchievements:G(),activeChallenges:te(),availableChallenges:Q(),getAchievementsByCategory:W}},is=({stats:s,levelProgress:i,compact:a=!1})=>{const x=g=>g>=30?"text-purple-600 bg-purple-50 border-purple-200":g>=14?"text-blue-600 bg-blue-50 border-blue-200":g>=7?"text-green-600 bg-green-50 border-green-200":g>=3?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-gray-600 bg-gray-50 border-gray-200",b=(g=>g<=10?{icon:"👑",text:"Elite",color:"bg-gradient-to-r from-yellow-400 to-orange-500"}:g<=100?{icon:"🏆",text:"Expert",color:"bg-gradient-to-r from-blue-400 to-purple-500"}:g<=1e3?{icon:"⭐",text:"Rising",color:"bg-gradient-to-r from-green-400 to-blue-500"}:{icon:"🎯",text:"Explorer",color:"bg-gradient-to-r from-gray-400 to-gray-500"})(s.exploration_rank);return a?e.jsx(c,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent/5",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:B("flex items-center justify-center w-8 h-8 rounded-full text-white text-sm font-bold",b.color),children:s.level}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:["Level ",s.level]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.total_points.toLocaleString()," points"]})]})]}),e.jsxs(w,{className:B("border",x(s.current_streak)),children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),s.current_streak]})]}),e.jsx(Y,{value:i.progress,className:"h-2 mb-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[Math.round(i.progress),"% to Level ",s.level+1]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(c,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-accent/5",children:[e.jsx(L,{className:"pb-3",children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:B("flex items-center justify-center w-12 h-12 rounded-full text-white text-lg font-bold",b.color),children:s.level}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold",children:["Level ",s.level]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[b.text," Explorer"]})]})]}),e.jsxs(w,{variant:"outline",className:"bg-background/50",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"#",s.exploration_rank.toLocaleString()]})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:s.total_points.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Points"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Level Progress"}),e.jsxs("span",{children:[Math.round(i.progress),"%"]})]}),e.jsx(Y,{value:i.progress,className:"h-3"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-center",children:[(i.next-s.total_points).toLocaleString()," points to Level ",s.level+1]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(c,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(q,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:s.destinations_collected}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Dreams"}),e.jsx(Y,{value:Math.min(s.destinations_collected/100*100,100),className:"h-1 mt-2"})]})}),e.jsx(c,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(ke,{className:"h-6 w-6 mx-auto mb-2 text-accent"}),e.jsx("div",{className:"text-2xl font-bold",children:s.continents_unlocked}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Continents"}),e.jsx(Y,{value:s.continents_unlocked/7*100,className:"h-1 mt-2"})]})}),e.jsx(c,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(me,{className:"h-6 w-6 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-2xl font-bold",children:s.achievements_unlocked}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Achievements"})]})}),e.jsx(c,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(ue,{className:"h-6 w-6 mx-auto mb-2 text-orange-500"}),e.jsx("div",{className:"text-2xl font-bold",children:s.current_streak}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"}),s.current_streak>0&&e.jsx(w,{className:B("mt-1 text-xs",x(s.current_streak)),children:"🔥 On Fire!"})]})})]}),e.jsxs(c,{children:[e.jsx(L,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Category Progress"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(s.category_stats).map(([g,n])=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"capitalize font-medium",children:[g," (",n.count,")"]}),e.jsxs("span",{className:"text-muted-foreground",children:[n.completion_percentage,"% complete"]})]}),e.jsx(Y,{value:n.completion_percentage,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Avg rarity: ",n.average_rarity,"/100"]})]},g))})})]}),e.jsxs(c,{children:[e.jsx(L,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Continental Explorer"]})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(s.continent_progress).map(([g,n])=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium",children:g}),e.jsxs(w,{variant:"outline",className:"text-xs",children:[n.destinations_count," places"]})]}),e.jsx(Y,{value:n.completion_percentage,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.completion_percentage,"% explored",n.rare_destinations_count>0&&e.jsxs("span",{className:"ml-2",children:["✨ ",n.rare_destinations_count," rare"]})]})]},g))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Rarity Score"})]}),e.jsx("div",{className:"text-xl font-bold text-purple-600",children:s.rarity_score})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Based on rare destinations collected"})]})}),e.jsx(c,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Social Score"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s.social_score})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Friends and social interactions"})]})})]}),e.jsx(c,{className:"border-muted bg-muted/30",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(K,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Longest Streak"}),e.jsxs("div",{className:"text-lg font-bold text-orange-500",children:[s.longest_streak," days"]})]}),e.jsxs("div",{children:[e.jsx(ne,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Last Activity"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.last_activity).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(F,{className:"h-4 w-4 mx-auto mb-1 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Global Rank"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:["#",s.exploration_rank.toLocaleString()]})]})]})})})]})},cs=({achievement:s,onClick:i,size:a="md",showProgress:x=!0})=>{const r=l=>{switch(l){case"legendary":return"from-purple-500 to-pink-500 text-white border-purple-300";case"epic":return"from-blue-500 to-cyan-500 text-white border-blue-300";case"rare":return"from-green-500 to-emerald-500 text-white border-green-300";case"common":return"from-gray-400 to-gray-500 text-white border-gray-300";default:return"from-gray-400 to-gray-500 text-white border-gray-300"}},b=l=>{switch(l){case"legendary":return e.jsx(xe,{className:"h-4 w-4"});case"epic":return e.jsx(rs,{className:"h-4 w-4"});case"rare":return e.jsx(V,{className:"h-4 w-4"});case"common":return e.jsx(F,{className:"h-4 w-4"});default:return e.jsx(F,{className:"h-4 w-4"})}},g=()=>{switch(a){case"sm":return"p-3";case"lg":return"p-6";default:return"p-4"}},n=()=>{switch(a){case"sm":return"text-sm";case"lg":return"text-lg";default:return"text-base"}};return e.jsx(c,{className:B("group cursor-pointer transition-all duration-300 hover:shadow-lg",s.unlocked?"border-primary/30 bg-gradient-to-br from-primary/5 to-accent/5":"border-muted bg-muted/30 opacity-75",i&&"hover:scale-105"),onClick:i,children:e.jsx(d,{className:g(),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:B("flex items-center justify-center rounded-lg w-12 h-12 bg-gradient-to-br shrink-0",r(s.rarity)),children:e.jsx("span",{className:"text-2xl",role:"img","aria-label":s.name,children:s.icon})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:B("font-semibold truncate",n()),children:s.name}),!s.unlocked&&e.jsx(Oe,{className:"h-3 w-3 text-muted-foreground shrink-0"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description}),x&&s.max_progress>1&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"/",s.max_progress]})]}),e.jsx(Y,{value:s.progress/s.max_progress*100,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:"outline",className:B("text-xs bg-gradient-to-r border",r(s.rarity)),children:[b(s.rarity),e.jsx("span",{className:"ml-1 capitalize",children:s.rarity})]}),e.jsx(w,{variant:"secondary",className:"text-xs capitalize",children:s.category})]}),e.jsxs("div",{className:"text-xs font-medium text-primary",children:[s.points_value," pts"]})]}),s.unlocked&&s.unlocked_at&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Unlocked ",new Date(s.unlocked_at).toLocaleDateString()]})]})]})})})},ce=({achievements:s,onAchievementClick:i,maxDisplayed:a})=>{const x=a?s.slice(0,a):s;return s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(F,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No achievements to display"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[x.map(r=>e.jsx(cs,{achievement:r,onClick:()=>i==null?void 0:i(r)},r.id)),a&&s.length>a&&e.jsx(c,{className:"border-dashed border-2 border-muted-foreground/20",children:e.jsx(d,{className:"p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsxs("div",{className:"text-2xl mb-2",children:["+",s.length-a]}),e.jsx("div",{className:"text-sm",children:"More achievements"})]})})})]})},ds=({leaderboard:s,onViewAll:i,maxEntries:a=5})=>{const x=n=>{switch(n){case 1:return e.jsx(xe,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(_e,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(me,{className:"h-5 w-5 text-amber-600"});default:return e.jsxs("span",{className:"text-sm font-bold text-muted-foreground",children:["#",n]})}},r=n=>n>0?e.jsx(ne,{className:"h-3 w-3 text-green-500"}):n<0?e.jsx(Ye,{className:"h-3 w-3 text-red-500"}):e.jsx(He,{className:"h-3 w-3 text-muted-foreground"}),b=n=>n>0?"text-green-600":n<0?"text-red-600":"text-muted-foreground",g=s.entries.slice(0,a);return e.jsxs(c,{children:[e.jsxs(L,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2 text-lg",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),s.name]}),e.jsxs(w,{variant:"outline",className:"text-xs",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),s.total_participants.toLocaleString()]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs(d,{className:"space-y-3",children:[g.map((n,l)=>e.jsxs("div",{className:B("flex items-center justify-between p-3 rounded-lg border transition-colors",n.rank<=3?"bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20":"bg-muted/30 border-muted"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:x(n.rank)}),e.jsxs(ve,{className:"h-8 w-8",children:[e.jsx(ye,{src:n.avatar_url,alt:n.username}),e.jsx(we,{className:"text-xs",children:n.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:n.username}),n.specialization&&e.jsx(w,{variant:"secondary",className:"text-xs px-1 py-0",children:n.specialization})]}),n.badges&&n.badges.length>0&&e.jsxs("div",{className:"flex gap-1 mt-1",children:[n.badges.slice(0,3).map((A,p)=>e.jsx("span",{className:"text-xs",role:"img",children:A},p)),n.badges.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",n.badges.length-3]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-primary",children:n.score.toLocaleString()}),n.change_from_last_week!==0&&e.jsxs("div",{className:B("flex items-center gap-1 text-xs",b(n.change_from_last_week)),children:[r(n.change_from_last_week),e.jsx("span",{children:Math.abs(n.change_from_last_week)})]})]})]},n.user_id)),s.user_rank&&s.user_rank>a&&e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Your rank:"}),e.jsxs(w,{variant:"outline",children:["#",s.user_rank.toLocaleString()]})]})}),s.entries.length>a&&i&&e.jsx(C,{variant:"outline",className:"w-full mt-3",onClick:i,children:"View Full Leaderboard"}),e.jsx("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Updated ",new Date(s.updated_at).toLocaleDateString()]}),s.ends_at&&e.jsxs("span",{children:["Ends ",new Date(s.ends_at).toLocaleDateString()]})]})})]})]})},Se=({entries:s,title:i="Top Players"})=>e.jsxs(c,{children:[e.jsx(L,{className:"pb-2",children:e.jsx($,{className:"text-base",children:i})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:s.slice(0,3).map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:os(a.rank)}),e.jsx("span",{className:"text-sm font-medium truncate",children:a.username})]}),e.jsx("div",{className:"text-sm font-bold text-primary",children:a.score.toLocaleString()})]},a.user_id))})})]}),os=s=>{switch(s){case 1:return e.jsx(xe,{className:"h-4 w-4 text-yellow-500"});case 2:return e.jsx(_e,{className:"h-4 w-4 text-gray-400"});case 3:return e.jsx(me,{className:"h-4 w-4 text-amber-600"});default:return e.jsxs("span",{className:"text-xs font-bold text-muted-foreground",children:["#",s]})}},ms=({activities:s,onLike:i,onComment:a,onShare:x,loading:r=!1})=>{const b=l=>{switch(l){case"destination_added":return e.jsx(q,{className:"h-4 w-4 text-blue-500"});case"achievement_unlocked":return e.jsx(F,{className:"h-4 w-4 text-yellow-500"});case"level_up":return e.jsx(ne,{className:"h-4 w-4 text-green-500"});case"friend_added":return e.jsx(Ze,{className:"h-4 w-4 text-purple-500"});case"challenge_completed":return e.jsx(O,{className:"h-4 w-4 text-orange-500"});case"trip_planned":return e.jsx(Ne,{className:"h-4 w-4 text-pink-500"});default:return e.jsx(I,{className:"h-4 w-4 text-gray-500"})}},g=l=>{const{activity_type:A,activity_data:p}=l;switch(A){case"destination_added":return`added ${p.destination_name} to their dream destinations`;case"achievement_unlocked":return`unlocked the "${p.achievement_name}" achievement`;case"level_up":return`reached Level ${p.level}`;case"friend_added":return`became travel buddies with ${p.friend_name}`;case"challenge_completed":return`completed the "${p.challenge_name}" challenge`;case"trip_planned":return`planned a trip to ${p.destination_name}`;default:return"had some travel activity"}},n=l=>{const p=Math.floor((new Date().getTime()-new Date(l).getTime())/1e3);return p<60?"just now":p<3600?`${Math.floor(p/60)}m ago`:p<86400?`${Math.floor(p/3600)}h ago`:p<604800?`${Math.floor(p/86400)}d ago`:new Date(l).toLocaleDateString()};return r?e.jsxs(c,{children:[e.jsx(L,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((l,A)=>e.jsxs("div",{className:"flex gap-3 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},A))})})]}):s.length===0?e.jsxs(c,{children:[e.jsx(L,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsx(d,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Activity Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with friends to see their travel activities here!"})]})})]}):e.jsxs(c,{children:[e.jsx(L,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Social Activity"]})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-4",children:s.map(l=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ve,{className:"h-10 w-10",children:[e.jsx(ye,{src:l.avatar_url,alt:l.username}),e.jsx(we,{children:l.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:"mt-1",children:b(l.activity_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:l.username})," ",e.jsx("span",{className:"text-muted-foreground",children:g(l)})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n(l.created_at)})]}),l.visibility!=="public"&&e.jsx(w,{variant:"outline",className:"text-xs",children:l.visibility})]}),l.activity_type==="destination_added"&&l.activity_data.destination_name&&e.jsx("div",{className:"ml-6 p-2 bg-muted/30 rounded-lg mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:l.activity_data.destination_name})]})}),l.activity_type==="achievement_unlocked"&&e.jsx("div",{className:"ml-6 p-2 bg-yellow-50 border border-yellow-200 rounded-lg mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-3 w-3 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:l.activity_data.achievement_name})]})}),e.jsxs("div",{className:"flex items-center gap-4 ml-6 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(C,{variant:"ghost",size:"sm",className:B("h-6 px-2 text-xs",l.is_liked_by_user?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-red-500"),onClick:()=>i==null?void 0:i(l.id),children:[e.jsx(X,{className:B("h-3 w-3 mr1",l.is_liked_by_user&&"fill-current")}),l.likes_count>0&&l.likes_count]}),e.jsxs(C,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-blue-500",onClick:()=>a==null?void 0:a(l.id),children:[e.jsx(Je,{className:"h-3 w-3 mr-1"}),l.comments_count>0&&l.comments_count]}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-green-500",onClick:()=>x==null?void 0:x(l.id),children:e.jsx(Ne,{className:"h-3 w-3"})})]})]})]}),s.indexOf(l)<s.length-1&&e.jsx("div",{className:"border-t border-muted mt-4"})]},l.id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(C,{variant:"outline",size:"sm",children:"Load More Activities"})})]})]})},xs=({activities:s,maxItems:i=3})=>{const a=s.slice(0,i);return a.length===0?e.jsx(c,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(I,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]})}):e.jsxs(c,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Recent Activity"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:a.map(x=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ve,{className:"h-6 w-6",children:[e.jsx(ye,{src:x.avatar_url,alt:x.username}),e.jsx(we,{className:"text-xs",children:x.username.slice(0,1).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[e.jsx("span",{className:"font-medium text-foreground",children:x.username})," ",hs(x)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:us(x.created_at)})]})]},x.id))})})]})},hs=s=>{const{activity_type:i,activity_data:a}=s;switch(i){case"destination_added":return`added ${a.destination_name}`;case"achievement_unlocked":return`unlocked "${a.achievement_name}"`;case"level_up":return`reached Level ${a.level}`;case"friend_added":return`added ${a.friend_name}`;case"challenge_completed":return`completed "${a.challenge_name}"`;case"trip_planned":return`planned trip to ${a.destination_name}`;default:return"had some activity"}},us=s=>{const a=Math.floor((new Date().getTime()-new Date(s).getTime())/1e3);return a<60?"now":a<3600?`${Math.floor(a/60)}m`:a<86400?`${Math.floor(a/3600)}h`:`${Math.floor(a/86400)}d`},Ae=({challenge:s,onJoin:i,onViewDetails:a,loading:x=!1})=>{const r=l=>{switch(l){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-orange-100 text-orange-800 border-orange-200";case"expert":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},b=l=>{switch(l){case"active":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";case"expired":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=()=>{const l=new Date,p=new Date(s.ends_at).getTime()-l.getTime();if(p<=0)return"Expired";const E=Math.floor(p/(1e3*60*60*24)),S=Math.floor(p%(1e3*60*60*24)/(1e3*60*60));return E>0?`${E}d ${S}h left`:S>0?`${S}h left`:"Ending soon"},n=s.target_value>0?Math.min(s.current_progress/s.target_value*100,100):0;return e.jsxs(c,{className:B("group cursor-pointer transition-all duration-300 hover:shadow-lg",s.is_participating&&"border-primary/30 bg-gradient-to-br from-primary/5 to-accent/5"),children:[e.jsxs(L,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx($,{className:"text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-gradient-to-br from-primary to-accent text-white shrink-0",children:e.jsx(O,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(w,{className:B("border",b(s.status)),children:[s.status==="active"&&e.jsx(De,{className:"h-3 w-3 mr-1"}),s.status==="upcoming"&&e.jsx(he,{className:"h-3 w-3 mr-1"}),s.status==="completed"&&e.jsx(Ce,{className:"h-3 w-3 mr-1"}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]}),e.jsxs(w,{variant:"outline",className:r(s.difficulty),children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1)]}),e.jsxs(w,{variant:"outline",children:[s.type==="individual"&&"👤",s.type==="group"&&"👥",s.type==="community"&&"🌍",e.jsx("span",{className:"ml-1 capitalize",children:s.type})]})]})]}),e.jsxs(d,{className:"space-y-4",children:[s.is_participating&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Your Progress"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.current_progress,"/",s.target_value]})]}),e.jsx(Y,{value:n,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[n.toFixed(0),"% Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Reward:"}),e.jsxs("span",{className:"font-medium",children:[s.points_reward," pts"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Participants:"}),e.jsx("span",{className:"font-medium",children:s.participants_count.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[s.duration_days," days"]})]}),s.status==="active"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"font-medium text-orange-600",children:g()})]})]}),s.badge_reward&&e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(me,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Special Badge:"}),e.jsx("span",{className:"font-medium",children:s.badge_reward})]})}),s.special_unlock&&e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(V,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Unlocks:"}),e.jsx("span",{className:"font-medium text-purple-700",children:s.special_unlock})]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[!s.is_participating&&s.status==="active"&&e.jsx(C,{onClick:()=>i==null?void 0:i(s.id),disabled:x,className:"flex-1",children:x?"Joining...":"Join Challenge"}),s.is_participating&&s.status==="active"&&e.jsxs(w,{variant:"default",className:"flex-1 justify-center py-2",children:[e.jsx(Ce,{className:"h-3 w-3 mr-1"}),"Participating"]}),s.status==="upcoming"&&e.jsxs(C,{variant:"outline",className:"flex-1",disabled:!0,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Starts ",new Date(s.starts_at).toLocaleDateString()]}),s.status==="completed"&&e.jsxs(w,{variant:"secondary",className:"flex-1 justify-center py-2",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Completed"]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>a==null?void 0:a(s),children:"Details"})]}),s.leaderboard&&s.leaderboard.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-yellow-500"}),"Top Participants"]}),e.jsx("div",{className:"space-y-1",children:s.leaderboard.slice(0,3).map((l,A)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:["#",l.rank]}),e.jsx("span",{children:l.username})]}),e.jsx("span",{className:"font-medium text-primary",children:l.score.toLocaleString()})]},l.user_id))})]})]})]})},gs=({challenge:s,onJoin:i})=>{const a=s.target_value>0?Math.min(s.current_progress/s.target_value*100,100):0;return e.jsx(c,{className:"border-primary/20",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]}),e.jsx(w,{className:B("text-xs",ps(s.status)),children:s.status})]}),s.is_participating&&e.jsxs("div",{className:"mb-3",children:[e.jsx(Y,{value:a,className:"h-1 mb-1"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.current_progress,"/",s.target_value]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.points_reward," pts"]}),!s.is_participating&&s.status==="active"&&e.jsx(C,{size:"sm",variant:"outline",onClick:()=>i==null?void 0:i(s.id),children:"Join"})]})]})})},ps=s=>{switch(s){case"active":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";case"expired":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},js=()=>{const{user:s}=Me(),[i,a]=o.useState("overview"),{userStats:x,achievements:r,leaderboards:b,socialActivity:g,challenges:n,loading:l,error:A,levelProgress:p,unlockedAchievements:E,availableAchievements:S,recentAchievements:U,activeChallenges:j,availableChallenges:u,joinChallenge:_}=ls();return s?l?e.jsx("div",{className:"space-y-6",children:Array.from({length:3}).map((h,N)=>e.jsx(c,{className:"animate-pulse",children:e.jsxs(d,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-20 bg-muted rounded"})]})},N))}):A?e.jsx(c,{children:e.jsxs(d,{className:"p-6 text-center",children:[e.jsxs("p",{className:"text-destructive mb-4",children:["Error loading gamification data: ",A]}),e.jsx(C,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):e.jsxs("div",{className:"space-y-6",children:[x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(c,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(F,{className:"h-6 w-6 mx-auto mb-2"}),e.jsxs("div",{className:"text-2xl font-bold",children:["Level ",x.level]}),e.jsxs("div",{className:"text-xs opacity-80",children:[x.total_points.toLocaleString()," points"]})]})}),e.jsx(c,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(O,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:x.destinations_collected}),e.jsx("div",{className:"text-xs opacity-80",children:"Dream Destinations"})]})}),e.jsx(c,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(me,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:x.achievements_unlocked}),e.jsx("div",{className:"text-xs opacity-80",children:"Achievements"})]})}),e.jsx(c,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(ue,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:x.current_streak}),e.jsx("div",{className:"text-xs opacity-80",children:"Day Streak"})]})})]}),e.jsxs(je,{value:i,onValueChange:a,className:"w-full",children:[e.jsxs(fe,{className:"grid w-full grid-cols-5",children:[e.jsx(P,{value:"overview",children:"Overview"}),e.jsx(P,{value:"achievements",children:"Achievements"}),e.jsx(P,{value:"leaderboards",children:"Leaderboards"}),e.jsx(P,{value:"challenges",children:"Challenges"}),e.jsx(P,{value:"social",children:"Activity"})]}),e.jsx(R,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:x&&e.jsx(is,{stats:x,levelProgress:p})}),e.jsxs("div",{className:"space-y-4",children:[U.length>0&&e.jsxs(c,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-yellow-500"}),"Recent Achievements"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:U.slice(0,3).map(h=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-lg",children:h.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:h.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[h.points_value," points"]})]})]},h.id))})})]}),b.length>0&&e.jsx(Se,{entries:b[0].entries.slice(0,3),title:"Global Ranking"}),j.length>0&&e.jsxs(c,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-green-500"}),"Active Challenges"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:j.slice(0,2).map(h=>e.jsx(gs,{challenge:h},h.id))})})]})]})]})}),e.jsxs(R,{value:"achievements",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Your Achievements"}),e.jsxs("p",{className:"text-muted-foreground",children:[E.length," unlocked • ",S.length," available"]})]}),e.jsxs(w,{variant:"outline",className:"bg-primary/10",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),(x==null?void 0:x.achievements_unlocked)||0," Achievements"]})]}),e.jsxs(je,{defaultValue:"all",className:"w-full",children:[e.jsxs(fe,{children:[e.jsx(P,{value:"all",children:"All"}),e.jsx(P,{value:"unlocked",children:"Unlocked"}),e.jsx(P,{value:"available",children:"Available"}),e.jsx(P,{value:"explorer",children:"Explorer"}),e.jsx(P,{value:"social",children:"Social"})]}),e.jsx(R,{value:"all",children:e.jsx(ce,{achievements:r})}),e.jsx(R,{value:"unlocked",children:e.jsx(ce,{achievements:E})}),e.jsx(R,{value:"available",children:e.jsx(ce,{achievements:S})}),e.jsx(R,{value:"explorer",children:e.jsx(ce,{achievements:r.filter(h=>h.category==="explorer")})}),e.jsx(R,{value:"social",children:e.jsx(ce,{achievements:r.filter(h=>h.category==="social")})})]})]}),e.jsxs(R,{value:"leaderboards",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Leaderboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Compete with travelers worldwide"})]}),x&&e.jsxs(w,{variant:"outline",className:"bg-primary/10",children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),"Rank #",x.exploration_rank.toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:b.map(h=>e.jsx(ds,{leaderboard:h,maxEntries:10},h.id))})]}),e.jsxs(R,{value:"challenges",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Travel Challenges"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete challenges to earn points and unlock rewards"})]}),e.jsxs(w,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),j.length," Active"]})]}),j.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-orange-500"}),"Your Active Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(h=>e.jsx(Ae,{challenge:h},h.id))})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-blue-500"}),"Available Challenges"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(h=>e.jsx(Ae,{challenge:h,onJoin:_},h.id))})]}),n.length===0&&e.jsx(c,{children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(O,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Challenges Available"}),e.jsx("p",{className:"text-muted-foreground",children:"Check back later for exciting travel challenges!"})]})})]}),e.jsxs(R,{value:"social",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Social Activity"}),e.jsx("p",{className:"text-muted-foreground",children:"See what your travel buddies are up to"})]}),e.jsxs(C,{variant:"outline",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Find Friends"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ms,{activities:g})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(xs,{activities:g,maxItems:5}),b.length>0&&e.jsx(Se,{entries:b[0].entries,title:"Top This Week"})]})]})]})]})]}):e.jsx(c,{children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(I,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Join the Community!"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Sign in to unlock achievements, compete on leaderboards, and connect with fellow travelers."}),e.jsx(C,{onClick:()=>window.location.href="/auth",children:"Sign In to Play"})]})})},fs=()=>{const[s,i]=o.useState(null),[a,x]=o.useState(!1),[r,b]=o.useState(null),[g,n]=o.useState([]),l=o.useCallback(async j=>{try{x(!0),b(null),ae.info("Starting Smart Dreams provider search",{companionType:j.companionType,destination:j.destination});const u="https://journey-planner-137.preview.emergentagent.com",_={companion_type:j.companionType,travel_dna:j.travelDNA,destination:j.destination,date_range:j.dateRange?{start:j.dateRange.start.toISOString(),end:j.dateRange.end.toISOString()}:null,budget:j.budget,preferences:j.preferences},h=await fetch(`${u}/api/smart-dreams/provider-search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!h.ok)throw new Error(`Provider search failed: ${h.status} ${h.statusText}`);const N=await h.json();if(N.error)throw new Error(N.error);const T={hotels:N.hotels.map(m=>({id:m.id,name:m.name,provider:m.provider,price:m.price,rating:m.rating,aiConfidenceScore:m.ai_confidence_score,personalityMatch:m.personality_match,companionSuitability:m.companion_suitability,dreamDestinationMatch:m.dream_destination_match,recommendationReasons:m.recommendation_reasons,location:m.location,amenities:m.amenities})),flights:N.flights.map(m=>({id:m.id,provider:m.provider,price:m.price,duration:m.duration,aiOptimizationScore:m.ai_optimization_score,journeyFlow:m.journey_flow,airline:m.airline,companions:m.companions,route:m.route,departureTime:m.departure_time,arrivalTime:m.arrival_time})),activities:N.activities.map(m=>({id:m.id,name:m.name,provider:m.provider,price:m.price,personalityAlignment:m.personality_alignment,companionMatch:m.companion_match,experienceType:m.experience_type,aiRecommendationRank:m.ai_recommendation_rank,duration:m.duration,category:m.category,description:m.description,highlights:m.highlights})),aggregatedInsights:{totalOptions:N.aggregated_insights.total_options,avgPersonalityMatch:N.aggregated_insights.avg_personality_match,topRecommendationProvider:N.aggregated_insights.top_recommendation_provider,aiProcessingTime:N.aggregated_insights.ai_processing_time,cacheHitRate:N.aggregated_insights.cache_hit_rate,companionOptimization:N.aggregated_insights.companion_optimization},searchMetadata:{companionType:N.search_metadata.companion_type,destination:N.search_metadata.destination,searchTimestamp:N.search_metadata.search_timestamp,providersQueried:N.search_metadata.providers_queried,aiEnhancementEnabled:N.search_metadata.ai_enhancement_enabled}};return i(T),n(m=>[j,...m.slice(0,9)]),ae.info("Smart Dreams provider search completed successfully",{totalResults:T.aggregatedInsights.totalOptions,processingTime:T.aggregatedInsights.aiProcessingTime,topProvider:T.aggregatedInsights.topRecommendationProvider}),T}catch(u){const _=u instanceof Error?u.message:"Provider search failed";return b(_),ae.error("Smart Dreams provider search failed",u),null}finally{x(!1)}},[]),A=o.useCallback(()=>{i(null),b(null)},[]),p=o.useCallback(()=>{n([])},[]),E=o.useCallback((j,u=5)=>{if(!s)return[];switch(j){case"hotels":return s.hotels.sort((_,h)=>h.aiConfidenceScore-_.aiConfidenceScore).slice(0,u);case"flights":return s.flights.sort((_,h)=>h.aiOptimizationScore-_.aiOptimizationScore).slice(0,u);case"activities":return s.activities.sort((_,h)=>h.aiRecommendationRank-_.aiRecommendationRank).slice(0,u);default:return[]}},[s]),S=o.useCallback(j=>s?{hotels:s.hotels.filter(u=>u.companionSuitability>80),flights:s.flights.filter(u=>u.companions[j]>80),activities:s.activities.filter(u=>u.companionMatch>80)}:{hotels:[],flights:[],activities:[]},[s]),U=o.useCallback(()=>{if(!s)return{};const j={};return[...s.hotels,...s.flights,...s.activities].forEach(u=>{j[u.provider]||(j[u.provider]={hotels:0,flights:0,activities:0,avgScore:0})}),s.hotels.forEach(u=>{j[u.provider].hotels++}),s.flights.forEach(u=>{j[u.provider].flights++}),s.activities.forEach(u=>{j[u.provider].activities++}),Object.keys(j).forEach(u=>{const _=[...s.hotels.filter(N=>N.provider===u),...s.flights.filter(N=>N.provider===u),...s.activities.filter(N=>N.provider===u)],h=_.reduce((N,T)=>{const m=T.aiConfidenceScore||T.aiOptimizationScore||T.aiRecommendationRank||0;return N+m},0);j[u].avgScore=_.length>0?Math.round(h/_.length):0}),j},[s]);return{results:s,loading:a,error:r,searchHistory:g,searchProviders:l,clearResults:A,clearSearchHistory:p,getTopRecommendations:E,getRecommendationsByCompanion:S,getProviderStats:U,hasResults:!!s,totalResults:(s==null?void 0:s.aggregatedInsights.totalOptions)||0,aiProcessingTime:(s==null?void 0:s.aggregatedInsights.aiProcessingTime)||0,topProvider:s==null?void 0:s.aggregatedInsights.topRecommendationProvider}},Ns=()=>{var k;const[s,i]=o.useState("my-journey"),[a,x]=o.useState(null),[r,b]=o.useState(null),[g,n]=o.useState(85),[l,A]=o.useState(""),[p,E]=o.useState(!0),[S,U]=o.useState(!1),{toast:j}=be(),u=Pe();Ve({includeAIContext:!0});const{travelDNA:_,intelligentRecommendations:h,predictiveInsights:N,loading:T,analyzeTravelDNA:m,getIntelligentRecommendations:ee,getPredictiveInsights:v}=Te(),{results:M,loading:J,searchProviders:se,getTopRecommendations:H,hasResults:W,totalResults:le}=fs(),Z=[{type:"solo",name:"Solo Adventure",description:"Just me, my dreams, and endless possibilities",icon:e.jsx(ss,{className:"h-8 w-8 text-purple-500"}),perks:["Complete freedom","Self-discovery"],journeyType:"Soul Quest"},{type:"partner",name:"Romantic Journey",description:"Creating magical memories with my special someone",icon:e.jsx(X,{className:"h-8 w-8 text-pink-500"}),perks:["Romantic moments","Shared experiences"],journeyType:"Love Story"},{type:"friends",name:"Squad Adventure",description:"Epic adventures with my favorite people",icon:e.jsx(I,{className:"h-8 w-8 text-blue-500"}),perks:["Shared costs","Group activities"],journeyType:"Friendship Quest"},{type:"family",name:"Family Bonding",description:"Building precious family moments together",icon:e.jsx(as,{className:"h-8 w-8 text-green-500"}),perks:["Family bonding","Kid-friendly fun"],journeyType:"Family Saga"}],G=[{id:"bali-indonesia",name:"Bali",country:"Indonesia",image:"https://images.pexels.com/photos/261204/pexels-photo-261204.jpeg",price:95,days:7,excitement:92,perfectFor:["Solo soul searching","Romantic getaways"]},{id:"tokyo-japan",name:"Tokyo",country:"Japan",image:"https://images.unsplash.com/photo-1698923824953-a0bf7462e79d?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NTY2NzV8MHwxfHNlYXJjaHwyfHxsdXh1cnklMjB0cmF2ZWwlMjBkZXN0aW5hdGlvbnN8ZW58MHx8fHwxNzU4MzAxMjQ2fDA&ixlib=rb-4.1.0&q=85",price:180,days:5,excitement:95,perfectFor:["Cultural exploration","Food adventures"]},{id:"santorini-greece",name:"Santorini",country:"Greece",image:"https://images.unsplash.com/photo-1552873547-b88e7b2760e2?crop=entropy&cs=srgb&fm=jpg",price:220,days:6,excitement:98,perfectFor:["Romantic escapes","Photography lovers"]}],te=async t=>{const y={id:`journey_${Date.now()}`,title:l||`My ${t.journeyType}`,companion:t,destinations:[],totalDays:0,totalBudget:0,progress:10,excitement:g,achievements:["Journey Starter"]};if(b(y),x(t),p)try{await se({companionType:t.type==="partner"?"romantic":t.type,travelDNA:_,preferences:t.perks})}catch(D){console.error("Enhanced provider search failed:",D)}i("dream-destinations")},Q=t=>{if(!r)return;const y={...r,destinations:[...r.destinations,t],totalDays:r.totalDays+t.days,totalBudget:r.totalBudget+t.price*t.days,progress:Math.min(r.progress+25,100),achievements:[...r.achievements,"Dream Collector"]};b(y),n(Math.min(g+5,100)),alert(`🎉 ${t.name} added to your journey! Excitement level: ${g+5}%`)},f=()=>{if(!r)return;const t=`🌟 I'm planning my ${r.title}! ${r.destinations.length} amazing destinations, ${r.totalDays} days of adventure. Join me! 🗺️✈️`;navigator.share?navigator.share({title:r.title,text:t,url:window.location.href}):(navigator.clipboard.writeText(t),alert("Journey details copied to clipboard! 📋"))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-orange-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-green-500 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold",children:"M"})}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Maku"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-3 bg-orange-50 px-4 py-2 rounded-full border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full animate-pulse shadow-sm"}),e.jsxs("span",{className:"text-sm font-medium text-orange-700",children:["AI Match: ",_?Math.round(_.confidence_score*100):0,"%"]})]}),e.jsx("div",{className:"w-px h-4 bg-orange-200"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Excitement: ",g,"%"]})]}),e.jsx("div",{className:"w-px h-4 bg-orange-200"}),e.jsxs("button",{onClick:()=>E(!p),className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium transition-all duration-200 ${p?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":`AI is currently ${p?"enabled":"disabled"}`,children:[e.jsx(re,{className:`h-3 w-3 ${p?"text-green-500":"text-gray-400"}`}),e.jsxs("span",{children:["AI ",p?"On":"Off"]})]})]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(je,{value:s,onValueChange:i,className:"w-full",children:[e.jsxs(fe,{className:"grid w-full grid-cols-6 bg-white shadow-sm border border-orange-100 rounded-xl p-1",children:[e.jsxs(P,{value:"my-journey",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Journey"})]}),e.jsxs(P,{value:"dream-destinations",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Dreams"}),M&&e.jsx("div",{className:"ml-1 bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full font-medium",children:M.hotels.length+M.flights.length+M.activities.length})]}),e.jsxs(P,{value:"ai-intelligence",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"AI DNA"}),_&&e.jsxs("div",{className:"ml-1 bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full font-medium",children:[Math.round(_.confidence_score*100),"%"]})]}),e.jsxs(P,{value:"achievements",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Achievements"})]}),e.jsxs(P,{value:"social-hub",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Social"})]}),e.jsxs(P,{value:"planner",className:"flex items-center space-x-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white text-gray-600 hover:text-orange-500 transition-all duration-200 rounded-lg py-3",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Plan"})]})]}),e.jsx(R,{value:"my-journey",className:"space-y-8 mt-8",children:r?e.jsxs("div",{className:"space-y-8",children:[e.jsx(c,{className:"bg-white shadow-lg border border-green-200 rounded-2xl overflow-hidden",children:e.jsxs(d,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-green-500 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold",children:"M"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:r.title}),e.jsx("p",{className:"text-gray-600",children:a==null?void 0:a.description})]})]}),e.jsxs(C,{className:"bg-gradient-to-r from-orange-500 via-green-500 to-orange-500 hover:from-orange-600 hover:via-green-600 hover:to-orange-600 text-white font-semibold py-2 px-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",onClick:f,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Share Journey"]})]}),e.jsxs("div",{className:"mb-6 bg-orange-50 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-800 font-semibold",children:"Journey Progress"}),e.jsxs("span",{className:"text-orange-600 font-medium",children:[r.progress,"% Complete"]})]}),e.jsx(Y,{value:r.progress,className:"h-3 bg-orange-100"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-xl border border-orange-100",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.destinations.length}),e.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"Dreams Added"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl border border-green-100",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.totalDays}),e.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Total Days"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl border border-yellow-100",children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:["$",r.totalBudget]}),e.jsx("div",{className:"text-sm text-yellow-700 font-medium",children:"Estimated Cost"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl border border-green-100",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[g,"%"]}),e.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Excitement Level"})]})]}),e.jsx(c,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200 mt-6",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-purple-600"}),"Turn Your Dream Into Savings Goal"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Create a travel fund to make this $",r.totalBudget," journey a reality"]})]}),e.jsxs(C,{onClick:()=>U(!0),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Create Fund"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Goal"}),e.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["$",Math.round(r.totalBudget/12)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Timeline"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:"12 months"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NFT Rewards"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:"4+ NFTs"})]})]})]})})]})}),e.jsx(ns,{dreamData:{destination:((k=r.destinations[0])==null?void 0:k.name)||"Dream Destination",travelStyle:(a==null?void 0:a.type)||"adventure",duration:r.totalDays,companions:(a==null?void 0:a.type)==="solo"?0:1,budget:r.totalBudget,dreamName:l||r.title,travelDates:{start:new Date(Date.now()+365*24*60*60*1e3),end:new Date(Date.now()+365*24*60*60*1e3+r.totalDays*24*60*60*1e3)}},open:S,onOpenChange:U,onFundCreated:t=>{j({title:"Dream fund created!",description:"Your savings journey begins now. Start contributing today!"}),u("/travel-fund")}}),r.destinations.length>0&&e.jsxs(c,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[e.jsx(L,{children:e.jsxs($,{className:"text-white flex items-center space-x-2",children:[e.jsx(q,{className:"h-5 w-5 text-purple-400"}),e.jsx("span",{children:"My Dream Destinations"})]})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.destinations.map((t,y)=>e.jsxs(c,{className:"bg-white/5 border-white/10 overflow-hidden",children:[e.jsx("div",{className:"h-32",children:e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:t.name}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-purple-300",children:[t.days," days"]}),e.jsxs("span",{className:"text-blue-300",children:["$",t.price,"/day"]})]})]})]},y))})})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(c,{className:"bg-white shadow-lg border border-orange-100 rounded-2xl",children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-green-500 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"M"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"What's your dream journey called?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Give your adventure a memorable name"}),e.jsx(de,{placeholder:"My Epic Adventure, Honeymoon Bliss, Squad Goals Trip...",value:l,onChange:t=>A(t.target.value),className:"text-center text-xl bg-orange-50 border-orange-200 text-gray-800 placeholder:text-gray-500 focus:border-orange-400 focus:ring-orange-400 rounded-full py-4 px-6"})]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Who's joining your adventure?"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Choose your travel style and unlock personalized AI recommendations"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Z.map(t=>e.jsx(c,{className:"group cursor-pointer bg-white shadow-lg border border-orange-100 hover:border-orange-300 hover:shadow-xl transition-all duration-300 hover:scale-105 rounded-2xl overflow-hidden",onClick:()=>te(t),children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx("div",{className:"mb-6 transform group-hover:scale-110 transition-transform duration-300",children:t.icon}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:t.journeyType}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:t.description}),e.jsx("div",{className:"space-y-2 mb-6",children:t.perks.map((y,D)=>e.jsx(w,{className:"bg-orange-100 text-orange-700 border-orange-200 text-xs px-3 py-1 rounded-full font-medium",children:y},D))}),e.jsx(C,{className:"w-full bg-gradient-to-r from-orange-500 via-green-500 to-orange-500 hover:from-orange-600 hover:via-green-600 hover:to-orange-600 text-white font-semibold py-2 px-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",onClick:()=>te(t),children:e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"Start Journey"}),e.jsx(q,{className:"h-4 w-4"})]})})]})},t.type))})]})}),e.jsxs(R,{value:"dream-destinations",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Build Your Dream Collection"}),e.jsx("p",{className:"text-purple-200",children:"Add destinations that spark joy and excitement in your journey"}),p&&h.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs(w,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),h.length," AI-Recommended Destinations Available"]})})]}),p&&h.length>0&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 via-purple-900/50 to-pink-900/50 border border-blue-500/30 backdrop-blur-xl rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center space-x-2",children:[e.jsx(O,{className:"h-5 w-5 text-blue-400"}),e.jsx("span",{children:"AI-Powered Perfect Matches"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.slice(0,3).map((t,y)=>e.jsx(c,{className:"bg-black/40 backdrop-blur-xl border-white/10 hover:border-blue-400/50 transition-all duration-500",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-white",children:t.destination_name}),e.jsxs(w,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[t.recommendation_score,"% Match"]})]}),e.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:[t.country,", ",t.continent]}),t.recommendation_reasons.slice(0,1).map((D,pe)=>e.jsx("p",{className:"text-blue-300 text-xs mb-3",children:D.reason_text},pe)),e.jsxs(C,{onClick:()=>{const D={id:`ai-${t.destination_name.toLowerCase().replace(" ","-")}`,name:t.destination_name,country:t.country,image:G[y%G.length].image,price:Math.floor(Math.random()*150)+80,days:Math.floor(Math.random()*7)+3,excitement:t.recommendation_score,perfectFor:["AI Recommended","Perfect Match"]};Q(D)},className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white text-sm",disabled:!r,children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"Add AI Match"]})]})},y))})]})}),W&&p&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/50 via-purple-900/50 to-pink-900/50 border border-purple-500/30 backdrop-blur-xl rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-2 flex items-center space-x-2",children:[e.jsx(De,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{children:"Enhanced Provider Recommendations"})]}),e.jsxs("p",{className:"text-purple-200 text-sm",children:[le," personalized options from ",M==null?void 0:M.searchMetadata.providersQueried.join(", "),"• ",Math.round((M==null?void 0:M.aggregatedInsights.aiProcessingTime)||0),"ms AI processing"]})]}),J&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400"}),e.jsx("span",{className:"text-sm",children:"Enhancing results..."})]})]}),H("hotels",3).length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-pink-400"}),e.jsx("span",{children:"Smart Hotel Matches"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:H("hotels",3).map((t,y)=>e.jsx(c,{className:"bg-black/40 backdrop-blur-xl border-white/10 hover:border-pink-400/50 transition-all duration-300",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-bold text-white text-sm",children:t.name}),e.jsxs(w,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white text-xs",children:[t.aiConfidenceScore,"% AI Match"]})]}),e.jsx("p",{className:"text-gray-300 text-xs mb-2",children:t.location}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-pink-400 font-bold",children:["$",t.price,"/night"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-3 w-3 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-yellow-400 text-xs ml-1",children:t.rating})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Companion Match: ",t.companionSuitability,"%"]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-1 rounded-full",style:{width:`${t.companionSuitability}%`}})})]}),e.jsxs(C,{onClick:()=>{const D={id:t.id,name:t.location,country:t.location,image:G[y%G.length].image,price:t.price,days:3,excitement:t.aiConfidenceScore,perfectFor:t.recommendationReasons};Q(D)},className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white text-xs",disabled:!r,children:[e.jsx(X,{className:"h-3 w-3 mr-1"}),"Add to Journey"]})]})},t.id))})]}),H("activities",2).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{children:"Curated Experiences"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:H("activities",2).map(t=>e.jsx(c,{className:"bg-black/40 backdrop-blur-xl border-white/10 hover:border-blue-400/50 transition-all duration-300",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-bold text-white text-sm",children:t.name}),e.jsxs(w,{className:"bg-gradient-to-r from-blue-500 to-green-500 text-white text-xs",children:["Rank #",t.aiRecommendationRank]})]}),e.jsx("p",{className:"text-gray-300 text-xs mb-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-blue-400 font-bold",children:["$",t.price]}),e.jsx("span",{className:"text-gray-400 text-xs",children:t.duration})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Experience Match: ",t.companionMatch,"%"]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-1 rounded-full",style:{width:`${t.companionMatch}%`}})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:t.highlights.slice(0,2).map((y,D)=>e.jsx(w,{variant:"outline",className:"bg-white/5 border-white/20 text-white text-xs",children:y},D))}),e.jsxs(C,{className:"w-full bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white text-xs",disabled:!r,children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Add Experience"]})]})},t.id))})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:G.map(t=>e.jsxs(c,{className:"group overflow-hidden bg-black/40 backdrop-blur-xl border-white/10 hover:border-purple-400/50 transition-all duration-500 hover:scale-[1.02]",children:[e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs(w,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-lg font-bold",children:[t.excitement,"% ✨"]})}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:t.name}),e.jsxs("p",{className:"text-purple-200 flex items-center",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),t.country]})]})]}),e.jsxs(d,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["$",t.price]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["per day • ",t.days," days"]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Perfect for:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.perfectFor.map((y,D)=>e.jsx(w,{variant:"outline",className:"bg-white/5 border-white/20 text-white text-xs",children:y},D))})]}),e.jsxs(C,{onClick:()=>Q(t),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",disabled:!r,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),r?"Add to My Journey":"Start Journey First"]})]})]},t.id))})]}),e.jsxs(R,{value:"ai-intelligence",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Your Travel DNA & AI Insights"}),e.jsx("p",{className:"text-purple-200",children:"Discover your unique travel personality and get personalized recommendations"})]}),p?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(Qe,{travelDNA:_,loading:T,onRefresh:m})}),e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(Xe,{recommendations:h,loading:T,onRefresh:ee})}),e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(Ke,{insights:N,loading:T,onRefresh:v})}),e.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:e.jsx(qe,{})})]}):e.jsx(c,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(oe,{className:"h-24 w-24 mx-auto mb-6 text-gray-400"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"AI Intelligence Disabled"}),e.jsx("p",{className:"text-gray-300 mb-6 max-w-2xl mx-auto",children:"Enable AI Intelligence to unlock personalized travel recommendations, DNA analysis, and predictive insights."}),e.jsxs(C,{onClick:()=>E(!0),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8 py-3 text-lg",children:[e.jsx(oe,{className:"h-5 w-5 mr-2"}),"Enable AI Intelligence"]})]})})]}),e.jsxs(R,{value:"achievements",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Your Travel Achievements"}),e.jsx("p",{className:"text-purple-200",children:"Unlock badges, earn points, and level up your journey"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(c,{className:"bg-gradient-to-r from-yellow-900/50 to-orange-900/50 border-yellow-500/30 backdrop-blur-xl text-center",children:e.jsxs(d,{className:"p-6",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto mb-4 text-yellow-400"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:(r==null?void 0:r.achievements.length)||0}),e.jsx("div",{className:"text-yellow-200 text-sm",children:"Badges Earned"})]})}),e.jsx(c,{className:"bg-gradient-to-r from-purple-900/50 to-pink-900/50 border-purple-500/30 backdrop-blur-xl text-center",children:e.jsxs(d,{className:"p-6",children:[e.jsx(V,{className:"h-12 w-12 mx-auto mb-4 text-purple-400"}),e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:((r==null?void 0:r.achievements.length)||0)*250}),e.jsx("div",{className:"text-purple-200 text-sm",children:"Total Points"})]})}),e.jsx(c,{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 border-blue-500/30 backdrop-blur-xl text-center",children:e.jsxs(d,{className:"p-6",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-4 text-blue-400"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:["Level ",Math.floor(((r==null?void 0:r.achievements.length)||0)/2)+1]}),e.jsx("div",{className:"text-blue-200 text-sm",children:"Dream Explorer"})]})}),e.jsx(c,{className:"bg-gradient-to-r from-green-900/50 to-teal-900/50 border-green-500/30 backdrop-blur-xl text-center",children:e.jsxs(d,{className:"p-6",children:[e.jsx(_e,{className:"h-12 w-12 mx-auto mb-4 text-green-400"}),e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[g,"%"]}),e.jsx("div",{className:"text-green-200 text-sm",children:"Excitement"})]})})]}),r&&r.achievements.length>0&&e.jsxs(c,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:[e.jsx(L,{children:e.jsx($,{className:"text-white",children:"Your Achievements"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:r.achievements.map((t,y)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white/5 rounded-xl",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full",children:e.jsx(F,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white",children:t}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Congratulations on this milestone!"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-yellow-400 font-bold",children:"+250"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"points"})]})]},y))})})]})]}),e.jsx(R,{value:"social-hub",className:"space-y-8 mt-8",children:e.jsx(js,{})}),e.jsxs(R,{value:"planner",className:"space-y-8 mt-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Plan Together"}),e.jsx("p",{className:"text-purple-200",children:"Collaborate with friends, family, or your partner"})]}),e.jsx(c,{className:"bg-black/40 backdrop-blur-xl border-white/10",children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(K,{className:"h-24 w-24 mx-auto mb-6 text-purple-400"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Collaborative Planning"}),e.jsx("p",{className:"text-gray-300 mb-6 max-w-2xl mx-auto",children:"Invite your travel companions to vote on destinations, share ideas, and build your dream journey together."}),e.jsxs(C,{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8 py-3 text-lg",onClick:()=>alert("Collaborative planning feature coming soon! 🚀"),children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),"Start Planning Together"]})]})})]})]})})]})},Dt=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ge,{}),e.jsx("main",{className:"pt-16",children:e.jsx(Ns,{})}),e.jsx(ts,{})]});export{Dt as default};
