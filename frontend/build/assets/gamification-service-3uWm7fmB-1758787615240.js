var c=Object.defineProperty;var l=(n,t,e)=>t in n?c(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>l(n,typeof t!="symbol"?t+"":t,e);import{y as a}from"./index-sjMrv3Ur-1758787615240.js";class u{constructor(){s(this,"backendUrl","https://travel-portal-dev.preview.emergentagent.com")}async getUserGameStats(t){try{const e=await fetch(`${this.backendUrl}/api/gamification/stats/${t}`);return e.ok?await e.json():this.getMockUserStats(t)}catch(e){return a.error("Error fetching user game stats:",e),this.getMockUserStats(t)}}async checkAchievements(t,e,r){try{const i=await fetch(`${this.backendUrl}/api/gamification/achievements/check`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,action_type:e,action_data:r})});return i.ok?await i.json():this.mockAchievementCheck(e,r)}catch(i){return a.error("Error checking achievements:",i),{newly_unlocked:[],progress_updates:[],points_earned:0}}}async getUserAchievements(t){try{const e=await fetch(`${this.backendUrl}/api/gamification/achievements/${t}`);return e.ok?await e.json():this.getMockAchievements()}catch(e){return a.error("Error fetching achievements:",e),this.getMockAchievements()}}async getLeaderboards(t=["global","weekly","friends"]){try{const e=await fetch(`${this.backendUrl}/api/gamification/leaderboards?types=${t.join(",")}`);return e.ok?await e.json():this.getMockLeaderboards()}catch(e){return a.error("Error fetching leaderboards:",e),this.getMockLeaderboards()}}async getSocialConnections(t){try{const e=await fetch(`${this.backendUrl}/api/social/connections/${t}`);return e.ok?await e.json():this.getMockSocialConnections()}catch(e){return a.error("Error fetching social connections:",e),this.getMockSocialConnections()}}async getSocialActivityFeed(t,e=20){try{const r=await fetch(`${this.backendUrl}/api/social/activity/${t}?limit=${e}`);return r.ok?await r.json():this.getMockSocialActivity()}catch(r){return a.error("Error fetching social activity:",r),this.getMockSocialActivity()}}async getChallenges(t){try{const e=await fetch(`${this.backendUrl}/api/gamification/challenges/${t}`);return e.ok?await e.json():this.getMockChallenges()}catch(e){return a.error("Error fetching challenges:",e),this.getMockChallenges()}}async joinChallenge(t,e){try{const r=await fetch(`${this.backendUrl}/api/gamification/challenges/${e}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t})});return r.ok?await r.json():{success:!1,message:"Failed to join challenge"}}catch(r){return a.error("Error joining challenge:",r),{success:!1,message:"Network error"}}}async trackGameEvent(t,e){try{await fetch(`${this.backendUrl}/api/gamification/events`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,...e})})}catch(r){a.error("Error tracking game event:",r)}}async getDreamCollectionStats(t){try{const e=await fetch(`${this.backendUrl}/api/gamification/collection-stats/${t}`);return e.ok?await e.json():this.getMockCollectionStats()}catch(e){return a.error("Error fetching collection stats:",e),this.getMockCollectionStats()}}async getSocialInsights(t){try{const e=await fetch(`${this.backendUrl}/api/social/insights/${t}`);return e.ok?await e.json():this.getMockSocialInsights()}catch(e){return a.error("Error fetching social insights:",e),this.getMockSocialInsights()}}getMockUserStats(t){return{user_id:t,level:4,total_points:2847,destinations_collected:23,continents_unlocked:5,achievements_unlocked:12,current_streak:7,longest_streak:15,rarity_score:342,social_score:156,exploration_rank:847,last_activity:new Date,category_stats:{beaches:{count:8,average_rarity:65,completion_percentage:32},cultural:{count:7,average_rarity:45,completion_percentage:28},adventure:{count:5,average_rarity:78,completion_percentage:20},mountains:{count:3,average_rarity:82,completion_percentage:12}},continent_progress:{Europe:{destinations_count:9,completion_percentage:18,rare_destinations_count:2},Asia:{destinations_count:7,completion_percentage:14,rare_destinations_count:3},"North America":{destinations_count:4,completion_percentage:8,rare_destinations_count:1},"South America":{destinations_count:2,completion_percentage:4,rare_destinations_count:1},Africa:{destinations_count:1,completion_percentage:2,rare_destinations_count:1}}}}getMockAchievements(){return[{id:"1",name:"First Steps",description:"Add your first dream destination",category:"explorer",icon:"üéØ",progress:100,max_progress:1,unlocked:!0,unlocked_at:new Date("2024-01-15"),rarity:"common",points_value:50,requirements:[{type:"destinations_count",target_value:1,current_value:23}],reward_type:"points"},{id:"2",name:"Continental Explorer",description:"Collect destinations from 5 different continents",category:"explorer",icon:"üåç",progress:100,max_progress:5,unlocked:!0,unlocked_at:new Date("2024-02-20"),rarity:"rare",points_value:200,requirements:[{type:"continents_count",target_value:5,current_value:5}],reward_type:"badge"},{id:"3",name:"Hidden Gems Hunter",description:"Discover 3 legendary rarity destinations",category:"adventurer",icon:"üíé",progress:67,max_progress:3,unlocked:!1,rarity:"epic",points_value:500,requirements:[{type:"rare_destinations",target_value:3,current_value:2}],reward_type:"feature_unlock",reward_value:"advanced_search"},{id:"4",name:"Social Butterfly",description:"Connect with 10 travel buddies",category:"social",icon:"üë•",progress:30,max_progress:10,unlocked:!1,rarity:"common",points_value:150,requirements:[{type:"social_interactions",target_value:10,current_value:3}],reward_type:"points"},{id:"5",name:"Streak Master",description:"Maintain a 30-day discovery streak",category:"planner",icon:"üî•",progress:23,max_progress:30,unlocked:!1,rarity:"epic",points_value:750,requirements:[{type:"streak_days",target_value:30,current_value:7}],reward_type:"discount",reward_value:15}]}mockAchievementCheck(t,e){const r=[],i=[];let o=0;return t==="destination_bookmarked"&&(e.total_destinations||1)===10&&(r.push({id:"explorer_10",name:"Dream Collector",description:"Collect 10 dream destinations",category:"explorer",icon:"üèÜ",progress:100,max_progress:10,unlocked:!0,unlocked_at:new Date,rarity:"common",points_value:100,requirements:[{type:"destinations_count",target_value:10,current_value:10}],reward_type:"points"}),o+=100),{newly_unlocked:r,progress_updates:i,points_earned:o}}getMockLeaderboards(){return[{id:"global_explorer",name:"Global Explorers",description:"Top dream collectors worldwide",type:"global",entries:[{user_id:"1",username:"WanderlustMike",avatar_url:"/api/placeholder/40/40?text=WM",score:5420,rank:1,change_from_last_week:2,badges:["üåç","üíé","üèÜ"],specialization:"Adventure Seeker"},{user_id:"2",username:"CulturalExplorer",avatar_url:"/api/placeholder/40/40?text=CE",score:4890,rank:2,change_from_last_week:-1,badges:["üèõÔ∏è","üé≠","üìö"],specialization:"Cultural Explorer"},{user_id:"3",username:"BeachHopper",avatar_url:"/api/placeholder/40/40?text=BH",score:4350,rank:3,change_from_last_week:3,badges:["üèñÔ∏è","üåä","‚òÄÔ∏è"],specialization:"Beach Lover"}],user_rank:847,total_participants:12453,updated_at:new Date}]}getMockSocialConnections(){return[{connection_id:"1",friend_user_id:"friend_1",friend_username:"AdventureAnna",friend_avatar_url:"/api/placeholder/40/40?text=AA",connection_type:"friend",established_at:new Date("2024-01-20"),shared_dreams_count:15,travel_compatibility_score:87,last_interaction:new Date("2024-03-01"),mutual_friends_count:3,similar_personality_factors:["adventure","photography"],potential_group_trips:2,interaction_frequency:"high"},{connection_id:"2",friend_user_id:"friend_2",friend_username:"CultureSeeker",friend_avatar_url:"/api/placeholder/40/40?text=CS",connection_type:"travel_buddy",established_at:new Date("2024-02-15"),shared_dreams_count:8,travel_compatibility_score:92,last_interaction:new Date("2024-02-28"),mutual_friends_count:1,similar_personality_factors:["culture","food"],potential_group_trips:1,interaction_frequency:"medium"}]}getMockSocialActivity(){return[{id:"1",user_id:"friend_1",username:"AdventureAnna",avatar_url:"/api/placeholder/40/40?text=AA",activity_type:"destination_added",activity_data:{destination_name:"Mount Kilimanjaro"},visibility:"public",likes_count:12,comments_count:3,created_at:new Date("2024-03-01T10:30:00Z"),is_liked_by_user:!1},{id:"2",user_id:"friend_2",username:"CultureSeeker",avatar_url:"/api/placeholder/40/40?text=CS",activity_type:"achievement_unlocked",activity_data:{achievement_name:"Cultural Master"},visibility:"friends",likes_count:8,comments_count:1,created_at:new Date("2024-02-28T15:45:00Z"),is_liked_by_user:!0}]}getMockChallenges(){return[{id:"march_explorer",title:"March Explorer Challenge",description:"Discover 5 new dream destinations this month",type:"individual",category:"exploration",difficulty:"medium",target_metric:"destinations_count",target_value:5,current_progress:2,duration_days:31,starts_at:new Date("2024-03-01"),ends_at:new Date("2024-03-31"),points_reward:250,badge_reward:"üåü",participants_count:1247,is_participating:!0,status:"active"}]}getMockCollectionStats(){return{total_dreams:23,unique_countries:18,unique_continents:5,rarity_breakdown:{common:12,rare:7,epic:3,legendary:1},category_breakdown:{beaches:8,cultural:7,adventure:5,mountains:3},average_rarity_score:58.7,completion_milestones:[{milestone:"First 10 Dreams",target:10,current:23,percentage:100,unlocked:!0},{milestone:"Quarter Century",target:25,current:23,percentage:92,unlocked:!1},{milestone:"Half Century",target:50,current:23,percentage:46,unlocked:!1},{milestone:"Dream Master",target:100,current:23,percentage:23,unlocked:!1}]}}getMockSocialInsights(){return{friends_with_shared_dreams:[],trending_destinations_in_network:[{destination_id:"1",destination_name:"Iceland",friend_count:3,recent_additions:2}],group_trip_opportunities:[{suggested_destination:"Japan",compatible_friends:["AdventureAnna","CultureSeeker"],estimated_savings:450,optimal_timing:"April 2024"}],social_achievements_available:[]}}}const g=new u;export{g as gamificationService};
